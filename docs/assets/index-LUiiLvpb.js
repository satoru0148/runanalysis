(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ih(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Vu={exports:{}},ci={},Wu={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gr=Symbol.for("react.element"),Ah=Symbol.for("react.portal"),Lh=Symbol.for("react.fragment"),$h=Symbol.for("react.strict_mode"),Mh=Symbol.for("react.profiler"),Uh=Symbol.for("react.provider"),Dh=Symbol.for("react.context"),zh=Symbol.for("react.forward_ref"),Fh=Symbol.for("react.suspense"),Bh=Symbol.for("react.memo"),Hh=Symbol.for("react.lazy"),ma=Symbol.iterator;function Vh(t){return t===null||typeof t!="object"?null:(t=ma&&t[ma]||t["@@iterator"],typeof t=="function"?t:null)}var Ku={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qu=Object.assign,Gu={};function Yn(t,e,n){this.props=t,this.context=e,this.refs=Gu,this.updater=n||Ku}Yn.prototype.isReactComponent={};Yn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qu(){}Qu.prototype=Yn.prototype;function gl(t,e,n){this.props=t,this.context=e,this.refs=Gu,this.updater=n||Ku}var vl=gl.prototype=new Qu;vl.constructor=gl;qu(vl,Yn.prototype);vl.isPureReactComponent=!0;var ga=Array.isArray,Ju=Object.prototype.hasOwnProperty,yl={current:null},Yu={key:!0,ref:!0,__self:!0,__source:!0};function Xu(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ju.call(e,r)&&!Yu.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Gr,type:t,key:i,ref:o,props:s,_owner:yl.current}}function Wh(t,e){return{$$typeof:Gr,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _l(t){return typeof t=="object"&&t!==null&&t.$$typeof===Gr}function Kh(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var va=/\/+/g;function Oi(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Kh(""+t.key):e.toString(36)}function js(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Gr:case Ah:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Oi(o,0):r,ga(s)?(n="",t!=null&&(n=t.replace(va,"$&/")+"/"),js(s,e,n,"",function(u){return u})):s!=null&&(_l(s)&&(s=Wh(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(va,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ga(t))for(var l=0;l<t.length;l++){i=t[l];var a=r+Oi(i,l);o+=js(i,e,n,a,s)}else if(a=Vh(t),typeof a=="function")for(t=a.call(t),l=0;!(i=t.next()).done;)i=i.value,a=r+Oi(i,l++),o+=js(i,e,n,a,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function rs(t,e,n){if(t==null)return t;var r=[],s=0;return js(t,r,"","",function(i){return e.call(n,i,s++)}),r}function qh(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var je={current:null},Ts={transition:null},Gh={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:Ts,ReactCurrentOwner:yl};function Zu(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:rs,forEach:function(t,e,n){rs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rs(t,function(){e++}),e},toArray:function(t){return rs(t,function(e){return e})||[]},only:function(t){if(!_l(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};F.Component=Yn;F.Fragment=Lh;F.Profiler=Mh;F.PureComponent=gl;F.StrictMode=$h;F.Suspense=Fh;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gh;F.act=Zu;F.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qu({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=yl.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Ju.call(e,a)&&!Yu.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Gr,type:t.type,key:s,ref:i,props:r,_owner:o}};F.createContext=function(t){return t={$$typeof:Dh,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Uh,_context:t},t.Consumer=t};F.createElement=Xu;F.createFactory=function(t){var e=Xu.bind(null,t);return e.type=t,e};F.createRef=function(){return{current:null}};F.forwardRef=function(t){return{$$typeof:zh,render:t}};F.isValidElement=_l;F.lazy=function(t){return{$$typeof:Hh,_payload:{_status:-1,_result:t},_init:qh}};F.memo=function(t,e){return{$$typeof:Bh,type:t,compare:e===void 0?null:e}};F.startTransition=function(t){var e=Ts.transition;Ts.transition={};try{t()}finally{Ts.transition=e}};F.unstable_act=Zu;F.useCallback=function(t,e){return je.current.useCallback(t,e)};F.useContext=function(t){return je.current.useContext(t)};F.useDebugValue=function(){};F.useDeferredValue=function(t){return je.current.useDeferredValue(t)};F.useEffect=function(t,e){return je.current.useEffect(t,e)};F.useId=function(){return je.current.useId()};F.useImperativeHandle=function(t,e,n){return je.current.useImperativeHandle(t,e,n)};F.useInsertionEffect=function(t,e){return je.current.useInsertionEffect(t,e)};F.useLayoutEffect=function(t,e){return je.current.useLayoutEffect(t,e)};F.useMemo=function(t,e){return je.current.useMemo(t,e)};F.useReducer=function(t,e,n){return je.current.useReducer(t,e,n)};F.useRef=function(t){return je.current.useRef(t)};F.useState=function(t){return je.current.useState(t)};F.useSyncExternalStore=function(t,e,n){return je.current.useSyncExternalStore(t,e,n)};F.useTransition=function(){return je.current.useTransition()};F.version="18.3.1";Wu.exports=F;var $=Wu.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qh=$,Jh=Symbol.for("react.element"),Yh=Symbol.for("react.fragment"),Xh=Object.prototype.hasOwnProperty,Zh=Qh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ef={key:!0,ref:!0,__self:!0,__source:!0};function ec(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Xh.call(e,r)&&!ef.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Jh,type:t,key:i,ref:o,props:s,_owner:Zh.current}}ci.Fragment=Yh;ci.jsx=ec;ci.jsxs=ec;Vu.exports=ci;var h=Vu.exports,tc={exports:{}},De={},nc={exports:{}},rc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,R){var I=C.length;C.push(R);e:for(;0<I;){var A=I-1>>>1,L=C[A];if(0<s(L,R))C[A]=R,C[I]=L,I=A;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var R=C[0],I=C.pop();if(I!==R){C[0]=I;e:for(var A=0,L=C.length,pe=L>>>1;A<pe;){var ce=2*(A+1)-1,Se=C[ce],Pe=ce+1,st=C[Pe];if(0>s(Se,I))Pe<L&&0>s(st,Se)?(C[A]=st,C[Pe]=I,A=Pe):(C[A]=Se,C[ce]=I,A=ce);else if(Pe<L&&0>s(st,I))C[A]=st,C[Pe]=I,A=Pe;else break e}}return R}function s(C,R){var I=C.sortIndex-R.sortIndex;return I!==0?I:C.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,d=null,f=3,v=!1,y=!1,k=!1,T=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(C){for(var R=n(u);R!==null;){if(R.callback===null)r(u);else if(R.startTime<=C)r(u),R.sortIndex=R.expirationTime,e(a,R);else break;R=n(u)}}function _(C){if(k=!1,m(C),!y)if(n(a)!==null)y=!0,V(S);else{var R=n(u);R!==null&&fe(_,R.startTime-C)}}function S(C,R){y=!1,k&&(k=!1,g(N),N=-1),v=!0;var I=f;try{for(m(R),d=n(a);d!==null&&(!(d.expirationTime>R)||C&&!D());){var A=d.callback;if(typeof A=="function"){d.callback=null,f=d.priorityLevel;var L=A(d.expirationTime<=R);R=t.unstable_now(),typeof L=="function"?d.callback=L:d===n(a)&&r(a),m(R)}else r(a);d=n(a)}if(d!==null)var pe=!0;else{var ce=n(u);ce!==null&&fe(_,ce.startTime-R),pe=!1}return pe}finally{d=null,f=I,v=!1}}var x=!1,P=null,N=-1,w=5,E=-1;function D(){return!(t.unstable_now()-E<w)}function B(){if(P!==null){var C=t.unstable_now();E=C;var R=!0;try{R=P(!0,C)}finally{R?q():(x=!1,P=null)}}else x=!1}var q;if(typeof p=="function")q=function(){p(B)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,U=j.port2;j.port1.onmessage=B,q=function(){U.postMessage(null)}}else q=function(){T(B,0)};function V(C){P=C,x||(x=!0,q())}function fe(C,R){N=T(function(){C(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){y||v||(y=!0,V(S))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(C){switch(f){case 1:case 2:case 3:var R=3;break;default:R=f}var I=f;f=R;try{return C()}finally{f=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,R){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var I=f;f=C;try{return R()}finally{f=I}},t.unstable_scheduleCallback=function(C,R,I){var A=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?A+I:A):I=A,C){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=I+L,C={id:c++,callback:R,priorityLevel:C,startTime:I,expirationTime:L,sortIndex:-1},I>A?(C.sortIndex=I,e(u,C),n(a)===null&&C===n(u)&&(k?(g(N),N=-1):k=!0,fe(_,I-A))):(C.sortIndex=L,e(a,C),y||v||(y=!0,V(S))),C},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(C){var R=f;return function(){var I=f;f=R;try{return C.apply(this,arguments)}finally{f=I}}}})(rc);nc.exports=rc;var tf=nc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nf=$,Ue=tf;function b(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sc=new Set,Nr={};function fn(t,e){Hn(t,e),Hn(t+"Capture",e)}function Hn(t,e){for(Nr[t]=e,t=0;t<e.length;t++)sc.add(e[t])}var wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fo=Object.prototype.hasOwnProperty,rf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ya={},_a={};function sf(t){return fo.call(_a,t)?!0:fo.call(ya,t)?!1:rf.test(t)?_a[t]=!0:(ya[t]=!0,!1)}function of(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lf(t,e,n,r){if(e===null||typeof e>"u"||of(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Te(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ve[t]=new Te(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ve[e]=new Te(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ve[t]=new Te(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ve[t]=new Te(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ve[t]=new Te(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ve[t]=new Te(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ve[t]=new Te(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ve[t]=new Te(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ve[t]=new Te(t,5,!1,t.toLowerCase(),null,!1,!1)});var wl=/[\-:]([a-z])/g;function kl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wl,kl);ve[e]=new Te(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wl,kl);ve[e]=new Te(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wl,kl);ve[e]=new Te(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ve[t]=new Te(t,1,!1,t.toLowerCase(),null,!1,!1)});ve.xlinkHref=new Te("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ve[t]=new Te(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sl(t,e,n,r){var s=ve.hasOwnProperty(e)?ve[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lf(e,n,s,r)&&(n=null),r||s===null?sf(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Et=nf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ss=Symbol.for("react.element"),En=Symbol.for("react.portal"),bn=Symbol.for("react.fragment"),xl=Symbol.for("react.strict_mode"),po=Symbol.for("react.profiler"),ic=Symbol.for("react.provider"),oc=Symbol.for("react.context"),El=Symbol.for("react.forward_ref"),mo=Symbol.for("react.suspense"),go=Symbol.for("react.suspense_list"),bl=Symbol.for("react.memo"),Pt=Symbol.for("react.lazy"),lc=Symbol.for("react.offscreen"),wa=Symbol.iterator;function sr(t){return t===null||typeof t!="object"?null:(t=wa&&t[wa]||t["@@iterator"],typeof t=="function"?t:null)}var te=Object.assign,Ri;function fr(t){if(Ri===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ri=e&&e[1]||""}return`
`+Ri+t}var Ii=!1;function Ai(t,e){if(!t||Ii)return"";Ii=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Ii=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fr(t):""}function af(t){switch(t.tag){case 5:return fr(t.type);case 16:return fr("Lazy");case 13:return fr("Suspense");case 19:return fr("SuspenseList");case 0:case 2:case 15:return t=Ai(t.type,!1),t;case 11:return t=Ai(t.type.render,!1),t;case 1:return t=Ai(t.type,!0),t;default:return""}}function vo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bn:return"Fragment";case En:return"Portal";case po:return"Profiler";case xl:return"StrictMode";case mo:return"Suspense";case go:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case oc:return(t.displayName||"Context")+".Consumer";case ic:return(t._context.displayName||"Context")+".Provider";case El:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bl:return e=t.displayName||null,e!==null?e:vo(t.type)||"Memo";case Pt:e=t._payload,t=t._init;try{return vo(t(e))}catch{}}return null}function uf(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vo(e);case 8:return e===xl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ht(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ac(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cf(t){var e=ac(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function is(t){t._valueTracker||(t._valueTracker=cf(t))}function uc(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ac(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Us(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yo(t,e){var n=e.checked;return te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ka(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ht(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cc(t,e){e=e.checked,e!=null&&Sl(t,"checked",e,!1)}function _o(t,e){cc(t,e);var n=Ht(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wo(t,e.type,n):e.hasOwnProperty("defaultValue")&&wo(t,e.type,Ht(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sa(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wo(t,e,n){(e!=="number"||Us(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pr=Array.isArray;function $n(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ht(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ko(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(b(91));return te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xa(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(b(92));if(pr(n)){if(1<n.length)throw Error(b(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ht(n)}}function dc(t,e){var n=Ht(e.value),r=Ht(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ea(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hc(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function So(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hc(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var os,fc=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(os=os||document.createElement("div"),os.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=os.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Or(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},df=["Webkit","ms","Moz","O"];Object.keys(yr).forEach(function(t){df.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yr[e]=yr[t]})});function pc(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||yr.hasOwnProperty(t)&&yr[t]?(""+e).trim():e+"px"}function mc(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=pc(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var hf=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xo(t,e){if(e){if(hf[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(b(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(b(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(b(61))}if(e.style!=null&&typeof e.style!="object")throw Error(b(62))}}function Eo(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bo=null;function jl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jo=null,Mn=null,Un=null;function ba(t){if(t=Yr(t)){if(typeof jo!="function")throw Error(b(280));var e=t.stateNode;e&&(e=mi(e),jo(t.stateNode,t.type,e))}}function gc(t){Mn?Un?Un.push(t):Un=[t]:Mn=t}function vc(){if(Mn){var t=Mn,e=Un;if(Un=Mn=null,ba(t),e)for(t=0;t<e.length;t++)ba(e[t])}}function yc(t,e){return t(e)}function _c(){}var Li=!1;function wc(t,e,n){if(Li)return t(e,n);Li=!0;try{return yc(t,e,n)}finally{Li=!1,(Mn!==null||Un!==null)&&(_c(),vc())}}function Rr(t,e){var n=t.stateNode;if(n===null)return null;var r=mi(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(b(231,e,typeof n));return n}var To=!1;if(wt)try{var ir={};Object.defineProperty(ir,"passive",{get:function(){To=!0}}),window.addEventListener("test",ir,ir),window.removeEventListener("test",ir,ir)}catch{To=!1}function ff(t,e,n,r,s,i,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var _r=!1,Ds=null,zs=!1,Po=null,pf={onError:function(t){_r=!0,Ds=t}};function mf(t,e,n,r,s,i,o,l,a){_r=!1,Ds=null,ff.apply(pf,arguments)}function gf(t,e,n,r,s,i,o,l,a){if(mf.apply(this,arguments),_r){if(_r){var u=Ds;_r=!1,Ds=null}else throw Error(b(198));zs||(zs=!0,Po=u)}}function pn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kc(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ja(t){if(pn(t)!==t)throw Error(b(188))}function vf(t){var e=t.alternate;if(!e){if(e=pn(t),e===null)throw Error(b(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ja(s),t;if(i===r)return ja(s),e;i=i.sibling}throw Error(b(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(b(189))}}if(n.alternate!==r)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?t:e}function Sc(t){return t=vf(t),t!==null?xc(t):null}function xc(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xc(t);if(e!==null)return e;t=t.sibling}return null}var Ec=Ue.unstable_scheduleCallback,Ta=Ue.unstable_cancelCallback,yf=Ue.unstable_shouldYield,_f=Ue.unstable_requestPaint,se=Ue.unstable_now,wf=Ue.unstable_getCurrentPriorityLevel,Tl=Ue.unstable_ImmediatePriority,bc=Ue.unstable_UserBlockingPriority,Fs=Ue.unstable_NormalPriority,kf=Ue.unstable_LowPriority,jc=Ue.unstable_IdlePriority,di=null,ut=null;function Sf(t){if(ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(di,t,void 0,(t.current.flags&128)===128)}catch{}}var tt=Math.clz32?Math.clz32:bf,xf=Math.log,Ef=Math.LN2;function bf(t){return t>>>=0,t===0?32:31-(xf(t)/Ef|0)|0}var ls=64,as=4194304;function mr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bs(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=mr(l):(i&=o,i!==0&&(r=mr(i)))}else o=n&~s,o!==0?r=mr(o):i!==0&&(r=mr(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tt(e),s=1<<n,r|=t[n],e&=~s;return r}function jf(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tf(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-tt(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=jf(l,e)):a<=e&&(t.expiredLanes|=l),i&=~l}}function Co(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Tc(){var t=ls;return ls<<=1,!(ls&4194240)&&(ls=64),t}function $i(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qr(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tt(e),t[e]=n}function Pf(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-tt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Pl(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var W=0;function Pc(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cc,Cl,Nc,Oc,Rc,No=!1,us=[],Lt=null,$t=null,Mt=null,Ir=new Map,Ar=new Map,Nt=[],Cf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pa(t,e){switch(t){case"focusin":case"focusout":Lt=null;break;case"dragenter":case"dragleave":$t=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":Ir.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(e.pointerId)}}function or(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Yr(e),e!==null&&Cl(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Nf(t,e,n,r,s){switch(e){case"focusin":return Lt=or(Lt,t,e,n,r,s),!0;case"dragenter":return $t=or($t,t,e,n,r,s),!0;case"mouseover":return Mt=or(Mt,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ir.set(i,or(Ir.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ar.set(i,or(Ar.get(i)||null,t,e,n,r,s)),!0}return!1}function Ic(t){var e=nn(t.target);if(e!==null){var n=pn(e);if(n!==null){if(e=n.tag,e===13){if(e=kc(n),e!==null){t.blockedOn=e,Rc(t.priority,function(){Nc(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ps(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Oo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);bo=r,n.target.dispatchEvent(r),bo=null}else return e=Yr(n),e!==null&&Cl(e),t.blockedOn=n,!1;e.shift()}return!0}function Ca(t,e,n){Ps(t)&&n.delete(e)}function Of(){No=!1,Lt!==null&&Ps(Lt)&&(Lt=null),$t!==null&&Ps($t)&&($t=null),Mt!==null&&Ps(Mt)&&(Mt=null),Ir.forEach(Ca),Ar.forEach(Ca)}function lr(t,e){t.blockedOn===e&&(t.blockedOn=null,No||(No=!0,Ue.unstable_scheduleCallback(Ue.unstable_NormalPriority,Of)))}function Lr(t){function e(s){return lr(s,t)}if(0<us.length){lr(us[0],t);for(var n=1;n<us.length;n++){var r=us[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Lt!==null&&lr(Lt,t),$t!==null&&lr($t,t),Mt!==null&&lr(Mt,t),Ir.forEach(e),Ar.forEach(e),n=0;n<Nt.length;n++)r=Nt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Nt.length&&(n=Nt[0],n.blockedOn===null);)Ic(n),n.blockedOn===null&&Nt.shift()}var Dn=Et.ReactCurrentBatchConfig,Hs=!0;function Rf(t,e,n,r){var s=W,i=Dn.transition;Dn.transition=null;try{W=1,Nl(t,e,n,r)}finally{W=s,Dn.transition=i}}function If(t,e,n,r){var s=W,i=Dn.transition;Dn.transition=null;try{W=4,Nl(t,e,n,r)}finally{W=s,Dn.transition=i}}function Nl(t,e,n,r){if(Hs){var s=Oo(t,e,n,r);if(s===null)Ki(t,e,r,Vs,n),Pa(t,r);else if(Nf(s,t,e,n,r))r.stopPropagation();else if(Pa(t,r),e&4&&-1<Cf.indexOf(t)){for(;s!==null;){var i=Yr(s);if(i!==null&&Cc(i),i=Oo(t,e,n,r),i===null&&Ki(t,e,r,Vs,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ki(t,e,r,null,n)}}var Vs=null;function Oo(t,e,n,r){if(Vs=null,t=jl(r),t=nn(t),t!==null)if(e=pn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kc(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vs=t,null}function Ac(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wf()){case Tl:return 1;case bc:return 4;case Fs:case kf:return 16;case jc:return 536870912;default:return 16}default:return 16}}var It=null,Ol=null,Cs=null;function Lc(){if(Cs)return Cs;var t,e=Ol,n=e.length,r,s="value"in It?It.value:It.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Cs=s.slice(t,1<r?1-r:void 0)}function Ns(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cs(){return!0}function Na(){return!1}function ze(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?cs:Na,this.isPropagationStopped=Na,this}return te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cs)},persist:function(){},isPersistent:cs}),e}var Xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rl=ze(Xn),Jr=te({},Xn,{view:0,detail:0}),Af=ze(Jr),Mi,Ui,ar,hi=te({},Jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Il,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ar&&(ar&&t.type==="mousemove"?(Mi=t.screenX-ar.screenX,Ui=t.screenY-ar.screenY):Ui=Mi=0,ar=t),Mi)},movementY:function(t){return"movementY"in t?t.movementY:Ui}}),Oa=ze(hi),Lf=te({},hi,{dataTransfer:0}),$f=ze(Lf),Mf=te({},Jr,{relatedTarget:0}),Di=ze(Mf),Uf=te({},Xn,{animationName:0,elapsedTime:0,pseudoElement:0}),Df=ze(Uf),zf=te({},Xn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ff=ze(zf),Bf=te({},Xn,{data:0}),Ra=ze(Bf),Hf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kf(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Wf[t])?!!e[t]:!1}function Il(){return Kf}var qf=te({},Jr,{key:function(t){if(t.key){var e=Hf[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ns(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vf[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Il,charCode:function(t){return t.type==="keypress"?Ns(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ns(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gf=ze(qf),Qf=te({},hi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ia=ze(Qf),Jf=te({},Jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Il}),Yf=ze(Jf),Xf=te({},Xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zf=ze(Xf),ep=te({},hi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tp=ze(ep),np=[9,13,27,32],Al=wt&&"CompositionEvent"in window,wr=null;wt&&"documentMode"in document&&(wr=document.documentMode);var rp=wt&&"TextEvent"in window&&!wr,$c=wt&&(!Al||wr&&8<wr&&11>=wr),Aa=" ",La=!1;function Mc(t,e){switch(t){case"keyup":return np.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uc(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jn=!1;function sp(t,e){switch(t){case"compositionend":return Uc(e);case"keypress":return e.which!==32?null:(La=!0,Aa);case"textInput":return t=e.data,t===Aa&&La?null:t;default:return null}}function ip(t,e){if(jn)return t==="compositionend"||!Al&&Mc(t,e)?(t=Lc(),Cs=Ol=It=null,jn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $c&&e.locale!=="ko"?null:e.data;default:return null}}var op={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $a(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!op[t.type]:e==="textarea"}function Dc(t,e,n,r){gc(r),e=Ws(e,"onChange"),0<e.length&&(n=new Rl("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var kr=null,$r=null;function lp(t){Jc(t,0)}function fi(t){var e=Cn(t);if(uc(e))return t}function ap(t,e){if(t==="change")return e}var zc=!1;if(wt){var zi;if(wt){var Fi="oninput"in document;if(!Fi){var Ma=document.createElement("div");Ma.setAttribute("oninput","return;"),Fi=typeof Ma.oninput=="function"}zi=Fi}else zi=!1;zc=zi&&(!document.documentMode||9<document.documentMode)}function Ua(){kr&&(kr.detachEvent("onpropertychange",Fc),$r=kr=null)}function Fc(t){if(t.propertyName==="value"&&fi($r)){var e=[];Dc(e,$r,t,jl(t)),wc(lp,e)}}function up(t,e,n){t==="focusin"?(Ua(),kr=e,$r=n,kr.attachEvent("onpropertychange",Fc)):t==="focusout"&&Ua()}function cp(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fi($r)}function dp(t,e){if(t==="click")return fi(e)}function hp(t,e){if(t==="input"||t==="change")return fi(e)}function fp(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rt=typeof Object.is=="function"?Object.is:fp;function Mr(t,e){if(rt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!fo.call(e,s)||!rt(t[s],e[s]))return!1}return!0}function Da(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function za(t,e){var n=Da(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Da(n)}}function Bc(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Bc(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hc(){for(var t=window,e=Us();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Us(t.document)}return e}function Ll(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pp(t){var e=Hc(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Bc(n.ownerDocument.documentElement,n)){if(r!==null&&Ll(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=za(n,i);var o=za(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mp=wt&&"documentMode"in document&&11>=document.documentMode,Tn=null,Ro=null,Sr=null,Io=!1;function Fa(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Io||Tn==null||Tn!==Us(r)||(r=Tn,"selectionStart"in r&&Ll(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sr&&Mr(Sr,r)||(Sr=r,r=Ws(Ro,"onSelect"),0<r.length&&(e=new Rl("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Tn)))}function ds(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Pn={animationend:ds("Animation","AnimationEnd"),animationiteration:ds("Animation","AnimationIteration"),animationstart:ds("Animation","AnimationStart"),transitionend:ds("Transition","TransitionEnd")},Bi={},Vc={};wt&&(Vc=document.createElement("div").style,"AnimationEvent"in window||(delete Pn.animationend.animation,delete Pn.animationiteration.animation,delete Pn.animationstart.animation),"TransitionEvent"in window||delete Pn.transitionend.transition);function pi(t){if(Bi[t])return Bi[t];if(!Pn[t])return t;var e=Pn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Vc)return Bi[t]=e[n];return t}var Wc=pi("animationend"),Kc=pi("animationiteration"),qc=pi("animationstart"),Gc=pi("transitionend"),Qc=new Map,Ba="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wt(t,e){Qc.set(t,e),fn(e,[t])}for(var Hi=0;Hi<Ba.length;Hi++){var Vi=Ba[Hi],gp=Vi.toLowerCase(),vp=Vi[0].toUpperCase()+Vi.slice(1);Wt(gp,"on"+vp)}Wt(Wc,"onAnimationEnd");Wt(Kc,"onAnimationIteration");Wt(qc,"onAnimationStart");Wt("dblclick","onDoubleClick");Wt("focusin","onFocus");Wt("focusout","onBlur");Wt(Gc,"onTransitionEnd");Hn("onMouseEnter",["mouseout","mouseover"]);Hn("onMouseLeave",["mouseout","mouseover"]);Hn("onPointerEnter",["pointerout","pointerover"]);Hn("onPointerLeave",["pointerout","pointerover"]);fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fn("onBeforeInput",["compositionend","keypress","textInput","paste"]);fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yp=new Set("cancel close invalid load scroll toggle".split(" ").concat(gr));function Ha(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,gf(r,e,void 0,t),t.currentTarget=null}function Jc(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;Ha(s,l,u),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;Ha(s,l,u),i=a}}}if(zs)throw t=Po,zs=!1,Po=null,t}function J(t,e){var n=e[Uo];n===void 0&&(n=e[Uo]=new Set);var r=t+"__bubble";n.has(r)||(Yc(e,t,2,!1),n.add(r))}function Wi(t,e,n){var r=0;e&&(r|=4),Yc(n,t,r,e)}var hs="_reactListening"+Math.random().toString(36).slice(2);function Ur(t){if(!t[hs]){t[hs]=!0,sc.forEach(function(n){n!=="selectionchange"&&(yp.has(n)||Wi(n,!1,t),Wi(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hs]||(e[hs]=!0,Wi("selectionchange",!1,e))}}function Yc(t,e,n,r){switch(Ac(e)){case 1:var s=Rf;break;case 4:s=If;break;default:s=Nl}n=s.bind(null,e,n,t),s=void 0,!To||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ki(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=nn(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}wc(function(){var u=i,c=jl(n),d=[];e:{var f=Qc.get(t);if(f!==void 0){var v=Rl,y=t;switch(t){case"keypress":if(Ns(n)===0)break e;case"keydown":case"keyup":v=Gf;break;case"focusin":y="focus",v=Di;break;case"focusout":y="blur",v=Di;break;case"beforeblur":case"afterblur":v=Di;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Oa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=$f;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Yf;break;case Wc:case Kc:case qc:v=Df;break;case Gc:v=Zf;break;case"scroll":v=Af;break;case"wheel":v=tp;break;case"copy":case"cut":case"paste":v=Ff;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Ia}var k=(e&4)!==0,T=!k&&t==="scroll",g=k?f!==null?f+"Capture":null:f;k=[];for(var p=u,m;p!==null;){m=p;var _=m.stateNode;if(m.tag===5&&_!==null&&(m=_,g!==null&&(_=Rr(p,g),_!=null&&k.push(Dr(p,_,m)))),T)break;p=p.return}0<k.length&&(f=new v(f,y,null,n,c),d.push({event:f,listeners:k}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",f&&n!==bo&&(y=n.relatedTarget||n.fromElement)&&(nn(y)||y[kt]))break e;if((v||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,v?(y=n.relatedTarget||n.toElement,v=u,y=y?nn(y):null,y!==null&&(T=pn(y),y!==T||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=u),v!==y)){if(k=Oa,_="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(k=Ia,_="onPointerLeave",g="onPointerEnter",p="pointer"),T=v==null?f:Cn(v),m=y==null?f:Cn(y),f=new k(_,p+"leave",v,n,c),f.target=T,f.relatedTarget=m,_=null,nn(c)===u&&(k=new k(g,p+"enter",y,n,c),k.target=m,k.relatedTarget=T,_=k),T=_,v&&y)t:{for(k=v,g=y,p=0,m=k;m;m=gn(m))p++;for(m=0,_=g;_;_=gn(_))m++;for(;0<p-m;)k=gn(k),p--;for(;0<m-p;)g=gn(g),m--;for(;p--;){if(k===g||g!==null&&k===g.alternate)break t;k=gn(k),g=gn(g)}k=null}else k=null;v!==null&&Va(d,f,v,k,!1),y!==null&&T!==null&&Va(d,T,y,k,!0)}}e:{if(f=u?Cn(u):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var S=ap;else if($a(f))if(zc)S=hp;else{S=cp;var x=up}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=dp);if(S&&(S=S(t,u))){Dc(d,S,n,c);break e}x&&x(t,f,u),t==="focusout"&&(x=f._wrapperState)&&x.controlled&&f.type==="number"&&wo(f,"number",f.value)}switch(x=u?Cn(u):window,t){case"focusin":($a(x)||x.contentEditable==="true")&&(Tn=x,Ro=u,Sr=null);break;case"focusout":Sr=Ro=Tn=null;break;case"mousedown":Io=!0;break;case"contextmenu":case"mouseup":case"dragend":Io=!1,Fa(d,n,c);break;case"selectionchange":if(mp)break;case"keydown":case"keyup":Fa(d,n,c)}var P;if(Al)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else jn?Mc(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&($c&&n.locale!=="ko"&&(jn||N!=="onCompositionStart"?N==="onCompositionEnd"&&jn&&(P=Lc()):(It=c,Ol="value"in It?It.value:It.textContent,jn=!0)),x=Ws(u,N),0<x.length&&(N=new Ra(N,t,null,n,c),d.push({event:N,listeners:x}),P?N.data=P:(P=Uc(n),P!==null&&(N.data=P)))),(P=rp?sp(t,n):ip(t,n))&&(u=Ws(u,"onBeforeInput"),0<u.length&&(c=new Ra("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=P))}Jc(d,e)})}function Dr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ws(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Rr(t,n),i!=null&&r.unshift(Dr(t,i,s)),i=Rr(t,e),i!=null&&r.push(Dr(t,i,s))),t=t.return}return r}function gn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Va(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,s?(a=Rr(n,i),a!=null&&o.unshift(Dr(n,a,l))):s||(a=Rr(n,i),a!=null&&o.push(Dr(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _p=/\r\n?/g,wp=/\u0000|\uFFFD/g;function Wa(t){return(typeof t=="string"?t:""+t).replace(_p,`
`).replace(wp,"")}function fs(t,e,n){if(e=Wa(e),Wa(t)!==e&&n)throw Error(b(425))}function Ks(){}var Ao=null,Lo=null;function $o(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mo=typeof setTimeout=="function"?setTimeout:void 0,kp=typeof clearTimeout=="function"?clearTimeout:void 0,Ka=typeof Promise=="function"?Promise:void 0,Sp=typeof queueMicrotask=="function"?queueMicrotask:typeof Ka<"u"?function(t){return Ka.resolve(null).then(t).catch(xp)}:Mo;function xp(t){setTimeout(function(){throw t})}function qi(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Lr(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Lr(e)}function Ut(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function qa(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zn=Math.random().toString(36).slice(2),at="__reactFiber$"+Zn,zr="__reactProps$"+Zn,kt="__reactContainer$"+Zn,Uo="__reactEvents$"+Zn,Ep="__reactListeners$"+Zn,bp="__reactHandles$"+Zn;function nn(t){var e=t[at];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kt]||n[at]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=qa(t);t!==null;){if(n=t[at])return n;t=qa(t)}return e}t=n,n=t.parentNode}return null}function Yr(t){return t=t[at]||t[kt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(b(33))}function mi(t){return t[zr]||null}var Do=[],Nn=-1;function Kt(t){return{current:t}}function Y(t){0>Nn||(t.current=Do[Nn],Do[Nn]=null,Nn--)}function Q(t,e){Nn++,Do[Nn]=t.current,t.current=e}var Vt={},ke=Kt(Vt),Re=Kt(!1),an=Vt;function Vn(t,e){var n=t.type.contextTypes;if(!n)return Vt;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ie(t){return t=t.childContextTypes,t!=null}function qs(){Y(Re),Y(ke)}function Ga(t,e,n){if(ke.current!==Vt)throw Error(b(168));Q(ke,e),Q(Re,n)}function Xc(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(b(108,uf(t)||"Unknown",s));return te({},n,r)}function Gs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vt,an=ke.current,Q(ke,t),Q(Re,Re.current),!0}function Qa(t,e,n){var r=t.stateNode;if(!r)throw Error(b(169));n?(t=Xc(t,e,an),r.__reactInternalMemoizedMergedChildContext=t,Y(Re),Y(ke),Q(ke,t)):Y(Re),Q(Re,n)}var mt=null,gi=!1,Gi=!1;function Zc(t){mt===null?mt=[t]:mt.push(t)}function jp(t){gi=!0,Zc(t)}function qt(){if(!Gi&&mt!==null){Gi=!0;var t=0,e=W;try{var n=mt;for(W=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}mt=null,gi=!1}catch(s){throw mt!==null&&(mt=mt.slice(t+1)),Ec(Tl,qt),s}finally{W=e,Gi=!1}}return null}var On=[],Rn=0,Qs=null,Js=0,Be=[],He=0,un=null,gt=1,vt="";function Xt(t,e){On[Rn++]=Js,On[Rn++]=Qs,Qs=t,Js=e}function ed(t,e,n){Be[He++]=gt,Be[He++]=vt,Be[He++]=un,un=t;var r=gt;t=vt;var s=32-tt(r)-1;r&=~(1<<s),n+=1;var i=32-tt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,gt=1<<32-tt(e)+s|n<<s|r,vt=i+t}else gt=1<<i|n<<s|r,vt=t}function $l(t){t.return!==null&&(Xt(t,1),ed(t,1,0))}function Ml(t){for(;t===Qs;)Qs=On[--Rn],On[Rn]=null,Js=On[--Rn],On[Rn]=null;for(;t===un;)un=Be[--He],Be[He]=null,vt=Be[--He],Be[He]=null,gt=Be[--He],Be[He]=null}var Me=null,$e=null,X=!1,et=null;function td(t,e){var n=Ve(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ja(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Me=t,$e=Ut(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Me=t,$e=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=un!==null?{id:gt,overflow:vt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ve(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Me=t,$e=null,!0):!1;default:return!1}}function zo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fo(t){if(X){var e=$e;if(e){var n=e;if(!Ja(t,e)){if(zo(t))throw Error(b(418));e=Ut(n.nextSibling);var r=Me;e&&Ja(t,e)?td(r,n):(t.flags=t.flags&-4097|2,X=!1,Me=t)}}else{if(zo(t))throw Error(b(418));t.flags=t.flags&-4097|2,X=!1,Me=t}}}function Ya(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Me=t}function ps(t){if(t!==Me)return!1;if(!X)return Ya(t),X=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$o(t.type,t.memoizedProps)),e&&(e=$e)){if(zo(t))throw nd(),Error(b(418));for(;e;)td(t,e),e=Ut(e.nextSibling)}if(Ya(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(b(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$e=Ut(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$e=null}}else $e=Me?Ut(t.stateNode.nextSibling):null;return!0}function nd(){for(var t=$e;t;)t=Ut(t.nextSibling)}function Wn(){$e=Me=null,X=!1}function Ul(t){et===null?et=[t]:et.push(t)}var Tp=Et.ReactCurrentBatchConfig;function ur(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(b(309));var r=n.stateNode}if(!r)throw Error(b(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(b(284));if(!n._owner)throw Error(b(290,t))}return t}function ms(t,e){throw t=Object.prototype.toString.call(e),Error(b(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xa(t){var e=t._init;return e(t._payload)}function rd(t){function e(g,p){if(t){var m=g.deletions;m===null?(g.deletions=[p],g.flags|=16):m.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=Bt(g,p),g.index=0,g.sibling=null,g}function i(g,p,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<p?(g.flags|=2,p):m):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,p,m,_){return p===null||p.tag!==6?(p=to(m,g.mode,_),p.return=g,p):(p=s(p,m),p.return=g,p)}function a(g,p,m,_){var S=m.type;return S===bn?c(g,p,m.props.children,_,m.key):p!==null&&(p.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Pt&&Xa(S)===p.type)?(_=s(p,m.props),_.ref=ur(g,p,m),_.return=g,_):(_=Ms(m.type,m.key,m.props,null,g.mode,_),_.ref=ur(g,p,m),_.return=g,_)}function u(g,p,m,_){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=no(m,g.mode,_),p.return=g,p):(p=s(p,m.children||[]),p.return=g,p)}function c(g,p,m,_,S){return p===null||p.tag!==7?(p=ln(m,g.mode,_,S),p.return=g,p):(p=s(p,m),p.return=g,p)}function d(g,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=to(""+p,g.mode,m),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ss:return m=Ms(p.type,p.key,p.props,null,g.mode,m),m.ref=ur(g,null,p),m.return=g,m;case En:return p=no(p,g.mode,m),p.return=g,p;case Pt:var _=p._init;return d(g,_(p._payload),m)}if(pr(p)||sr(p))return p=ln(p,g.mode,m,null),p.return=g,p;ms(g,p)}return null}function f(g,p,m,_){var S=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return S!==null?null:l(g,p,""+m,_);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ss:return m.key===S?a(g,p,m,_):null;case En:return m.key===S?u(g,p,m,_):null;case Pt:return S=m._init,f(g,p,S(m._payload),_)}if(pr(m)||sr(m))return S!==null?null:c(g,p,m,_,null);ms(g,m)}return null}function v(g,p,m,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(m)||null,l(p,g,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ss:return g=g.get(_.key===null?m:_.key)||null,a(p,g,_,S);case En:return g=g.get(_.key===null?m:_.key)||null,u(p,g,_,S);case Pt:var x=_._init;return v(g,p,m,x(_._payload),S)}if(pr(_)||sr(_))return g=g.get(m)||null,c(p,g,_,S,null);ms(p,_)}return null}function y(g,p,m,_){for(var S=null,x=null,P=p,N=p=0,w=null;P!==null&&N<m.length;N++){P.index>N?(w=P,P=null):w=P.sibling;var E=f(g,P,m[N],_);if(E===null){P===null&&(P=w);break}t&&P&&E.alternate===null&&e(g,P),p=i(E,p,N),x===null?S=E:x.sibling=E,x=E,P=w}if(N===m.length)return n(g,P),X&&Xt(g,N),S;if(P===null){for(;N<m.length;N++)P=d(g,m[N],_),P!==null&&(p=i(P,p,N),x===null?S=P:x.sibling=P,x=P);return X&&Xt(g,N),S}for(P=r(g,P);N<m.length;N++)w=v(P,g,N,m[N],_),w!==null&&(t&&w.alternate!==null&&P.delete(w.key===null?N:w.key),p=i(w,p,N),x===null?S=w:x.sibling=w,x=w);return t&&P.forEach(function(D){return e(g,D)}),X&&Xt(g,N),S}function k(g,p,m,_){var S=sr(m);if(typeof S!="function")throw Error(b(150));if(m=S.call(m),m==null)throw Error(b(151));for(var x=S=null,P=p,N=p=0,w=null,E=m.next();P!==null&&!E.done;N++,E=m.next()){P.index>N?(w=P,P=null):w=P.sibling;var D=f(g,P,E.value,_);if(D===null){P===null&&(P=w);break}t&&P&&D.alternate===null&&e(g,P),p=i(D,p,N),x===null?S=D:x.sibling=D,x=D,P=w}if(E.done)return n(g,P),X&&Xt(g,N),S;if(P===null){for(;!E.done;N++,E=m.next())E=d(g,E.value,_),E!==null&&(p=i(E,p,N),x===null?S=E:x.sibling=E,x=E);return X&&Xt(g,N),S}for(P=r(g,P);!E.done;N++,E=m.next())E=v(P,g,N,E.value,_),E!==null&&(t&&E.alternate!==null&&P.delete(E.key===null?N:E.key),p=i(E,p,N),x===null?S=E:x.sibling=E,x=E);return t&&P.forEach(function(B){return e(g,B)}),X&&Xt(g,N),S}function T(g,p,m,_){if(typeof m=="object"&&m!==null&&m.type===bn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case ss:e:{for(var S=m.key,x=p;x!==null;){if(x.key===S){if(S=m.type,S===bn){if(x.tag===7){n(g,x.sibling),p=s(x,m.props.children),p.return=g,g=p;break e}}else if(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Pt&&Xa(S)===x.type){n(g,x.sibling),p=s(x,m.props),p.ref=ur(g,x,m),p.return=g,g=p;break e}n(g,x);break}else e(g,x);x=x.sibling}m.type===bn?(p=ln(m.props.children,g.mode,_,m.key),p.return=g,g=p):(_=Ms(m.type,m.key,m.props,null,g.mode,_),_.ref=ur(g,p,m),_.return=g,g=_)}return o(g);case En:e:{for(x=m.key;p!==null;){if(p.key===x)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(g,p.sibling),p=s(p,m.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=no(m,g.mode,_),p.return=g,g=p}return o(g);case Pt:return x=m._init,T(g,p,x(m._payload),_)}if(pr(m))return y(g,p,m,_);if(sr(m))return k(g,p,m,_);ms(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(g,p.sibling),p=s(p,m),p.return=g,g=p):(n(g,p),p=to(m,g.mode,_),p.return=g,g=p),o(g)):n(g,p)}return T}var Kn=rd(!0),sd=rd(!1),Ys=Kt(null),Xs=null,In=null,Dl=null;function zl(){Dl=In=Xs=null}function Fl(t){var e=Ys.current;Y(Ys),t._currentValue=e}function Bo(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zn(t,e){Xs=t,Dl=In=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Oe=!0),t.firstContext=null)}function qe(t){var e=t._currentValue;if(Dl!==t)if(t={context:t,memoizedValue:e,next:null},In===null){if(Xs===null)throw Error(b(308));In=t,Xs.dependencies={lanes:0,firstContext:t}}else In=In.next=t;return e}var rn=null;function Bl(t){rn===null?rn=[t]:rn.push(t)}function id(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Bl(e)):(n.next=s.next,s.next=n),e.interleaved=n,St(t,r)}function St(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ct=!1;function Hl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function od(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _t(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,H&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,St(t,n)}return s=r.interleaved,s===null?(e.next=e,Bl(r)):(e.next=s.next,s.next=e),r.interleaved=e,St(t,n)}function Os(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pl(t,n)}}function Za(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zs(t,e,n,r){var s=t.updateQueue;Ct=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?i=u:o.next=u,o=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(i!==null){var d=s.baseState;o=0,c=u=a=null,l=i;do{var f=l.lane,v=l.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,k=l;switch(f=e,v=n,k.tag){case 1:if(y=k.payload,typeof y=="function"){d=y.call(v,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=k.payload,f=typeof y=="function"?y.call(v,d,f):y,f==null)break e;d=te({},d,f);break e;case 2:Ct=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else v={eventTime:v,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=v,a=d):c=c.next=v,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(c===null&&(a=d),s.baseState=a,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);dn|=o,t.lanes=o,t.memoizedState=d}}function eu(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(b(191,s));s.call(r)}}}var Xr={},ct=Kt(Xr),Fr=Kt(Xr),Br=Kt(Xr);function sn(t){if(t===Xr)throw Error(b(174));return t}function Vl(t,e){switch(Q(Br,e),Q(Fr,t),Q(ct,Xr),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:So(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=So(e,t)}Y(ct),Q(ct,e)}function qn(){Y(ct),Y(Fr),Y(Br)}function ld(t){sn(Br.current);var e=sn(ct.current),n=So(e,t.type);e!==n&&(Q(Fr,t),Q(ct,n))}function Wl(t){Fr.current===t&&(Y(ct),Y(Fr))}var Z=Kt(0);function ei(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qi=[];function Kl(){for(var t=0;t<Qi.length;t++)Qi[t]._workInProgressVersionPrimary=null;Qi.length=0}var Rs=Et.ReactCurrentDispatcher,Ji=Et.ReactCurrentBatchConfig,cn=0,ee=null,ae=null,de=null,ti=!1,xr=!1,Hr=0,Pp=0;function ye(){throw Error(b(321))}function ql(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rt(t[n],e[n]))return!1;return!0}function Gl(t,e,n,r,s,i){if(cn=i,ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rs.current=t===null||t.memoizedState===null?Rp:Ip,t=n(r,s),xr){i=0;do{if(xr=!1,Hr=0,25<=i)throw Error(b(301));i+=1,de=ae=null,e.updateQueue=null,Rs.current=Ap,t=n(r,s)}while(xr)}if(Rs.current=ni,e=ae!==null&&ae.next!==null,cn=0,de=ae=ee=null,ti=!1,e)throw Error(b(300));return t}function Ql(){var t=Hr!==0;return Hr=0,t}function ot(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?ee.memoizedState=de=t:de=de.next=t,de}function Ge(){if(ae===null){var t=ee.alternate;t=t!==null?t.memoizedState:null}else t=ae.next;var e=de===null?ee.memoizedState:de.next;if(e!==null)de=e,ae=t;else{if(t===null)throw Error(b(310));ae=t,t={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},de===null?ee.memoizedState=de=t:de=de.next=t}return de}function Vr(t,e){return typeof e=="function"?e(t):e}function Yi(t){var e=Ge(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var r=ae,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,u=i;do{var c=u.lane;if((cn&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,ee.lanes|=c,dn|=c}u=u.next}while(u!==null&&u!==i);a===null?o=r:a.next=l,rt(r,e.memoizedState)||(Oe=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ee.lanes|=i,dn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xi(t){var e=Ge(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);rt(i,e.memoizedState)||(Oe=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function ad(){}function ud(t,e){var n=ee,r=Ge(),s=e(),i=!rt(r.memoizedState,s);if(i&&(r.memoizedState=s,Oe=!0),r=r.queue,Jl(hd.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||de!==null&&de.memoizedState.tag&1){if(n.flags|=2048,Wr(9,dd.bind(null,n,r,s,e),void 0,null),he===null)throw Error(b(349));cn&30||cd(n,e,s)}return s}function cd(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ee.updateQueue,e===null?(e={lastEffect:null,stores:null},ee.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dd(t,e,n,r){e.value=n,e.getSnapshot=r,fd(e)&&pd(t)}function hd(t,e,n){return n(function(){fd(e)&&pd(t)})}function fd(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rt(t,n)}catch{return!0}}function pd(t){var e=St(t,1);e!==null&&nt(e,t,1,-1)}function tu(t){var e=ot();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:t},e.queue=t,t=t.dispatch=Op.bind(null,ee,t),[e.memoizedState,t]}function Wr(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ee.updateQueue,e===null?(e={lastEffect:null,stores:null},ee.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function md(){return Ge().memoizedState}function Is(t,e,n,r){var s=ot();ee.flags|=t,s.memoizedState=Wr(1|e,n,void 0,r===void 0?null:r)}function vi(t,e,n,r){var s=Ge();r=r===void 0?null:r;var i=void 0;if(ae!==null){var o=ae.memoizedState;if(i=o.destroy,r!==null&&ql(r,o.deps)){s.memoizedState=Wr(e,n,i,r);return}}ee.flags|=t,s.memoizedState=Wr(1|e,n,i,r)}function nu(t,e){return Is(8390656,8,t,e)}function Jl(t,e){return vi(2048,8,t,e)}function gd(t,e){return vi(4,2,t,e)}function vd(t,e){return vi(4,4,t,e)}function yd(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _d(t,e,n){return n=n!=null?n.concat([t]):null,vi(4,4,yd.bind(null,e,t),n)}function Yl(){}function wd(t,e){var n=Ge();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ql(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kd(t,e){var n=Ge();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ql(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Sd(t,e,n){return cn&21?(rt(n,e)||(n=Tc(),ee.lanes|=n,dn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Oe=!0),t.memoizedState=n)}function Cp(t,e){var n=W;W=n!==0&&4>n?n:4,t(!0);var r=Ji.transition;Ji.transition={};try{t(!1),e()}finally{W=n,Ji.transition=r}}function xd(){return Ge().memoizedState}function Np(t,e,n){var r=Ft(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ed(t))bd(e,n);else if(n=id(t,e,n,r),n!==null){var s=be();nt(n,t,r,s),jd(n,e,r)}}function Op(t,e,n){var r=Ft(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ed(t))bd(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,rt(l,o)){var a=e.interleaved;a===null?(s.next=s,Bl(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}n=id(t,e,s,r),n!==null&&(s=be(),nt(n,t,r,s),jd(n,e,r))}}function Ed(t){var e=t.alternate;return t===ee||e!==null&&e===ee}function bd(t,e){xr=ti=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jd(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pl(t,n)}}var ni={readContext:qe,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useInsertionEffect:ye,useLayoutEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useMutableSource:ye,useSyncExternalStore:ye,useId:ye,unstable_isNewReconciler:!1},Rp={readContext:qe,useCallback:function(t,e){return ot().memoizedState=[t,e===void 0?null:e],t},useContext:qe,useEffect:nu,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Is(4194308,4,yd.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Is(4194308,4,t,e)},useInsertionEffect:function(t,e){return Is(4,2,t,e)},useMemo:function(t,e){var n=ot();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ot();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Np.bind(null,ee,t),[r.memoizedState,t]},useRef:function(t){var e=ot();return t={current:t},e.memoizedState=t},useState:tu,useDebugValue:Yl,useDeferredValue:function(t){return ot().memoizedState=t},useTransition:function(){var t=tu(!1),e=t[0];return t=Cp.bind(null,t[1]),ot().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ee,s=ot();if(X){if(n===void 0)throw Error(b(407));n=n()}else{if(n=e(),he===null)throw Error(b(349));cn&30||cd(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,nu(hd.bind(null,r,i,t),[t]),r.flags|=2048,Wr(9,dd.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ot(),e=he.identifierPrefix;if(X){var n=vt,r=gt;n=(r&~(1<<32-tt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Hr++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Pp++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ip={readContext:qe,useCallback:wd,useContext:qe,useEffect:Jl,useImperativeHandle:_d,useInsertionEffect:gd,useLayoutEffect:vd,useMemo:kd,useReducer:Yi,useRef:md,useState:function(){return Yi(Vr)},useDebugValue:Yl,useDeferredValue:function(t){var e=Ge();return Sd(e,ae.memoizedState,t)},useTransition:function(){var t=Yi(Vr)[0],e=Ge().memoizedState;return[t,e]},useMutableSource:ad,useSyncExternalStore:ud,useId:xd,unstable_isNewReconciler:!1},Ap={readContext:qe,useCallback:wd,useContext:qe,useEffect:Jl,useImperativeHandle:_d,useInsertionEffect:gd,useLayoutEffect:vd,useMemo:kd,useReducer:Xi,useRef:md,useState:function(){return Xi(Vr)},useDebugValue:Yl,useDeferredValue:function(t){var e=Ge();return ae===null?e.memoizedState=t:Sd(e,ae.memoizedState,t)},useTransition:function(){var t=Xi(Vr)[0],e=Ge().memoizedState;return[t,e]},useMutableSource:ad,useSyncExternalStore:ud,useId:xd,unstable_isNewReconciler:!1};function Ye(t,e){if(t&&t.defaultProps){e=te({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ho(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:te({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yi={isMounted:function(t){return(t=t._reactInternals)?pn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=be(),s=Ft(t),i=_t(r,s);i.payload=e,n!=null&&(i.callback=n),e=Dt(t,i,s),e!==null&&(nt(e,t,s,r),Os(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=be(),s=Ft(t),i=_t(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Dt(t,i,s),e!==null&&(nt(e,t,s,r),Os(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=be(),r=Ft(t),s=_t(n,r);s.tag=2,e!=null&&(s.callback=e),e=Dt(t,s,r),e!==null&&(nt(e,t,r,n),Os(e,t,r))}};function ru(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Mr(n,r)||!Mr(s,i):!0}function Td(t,e,n){var r=!1,s=Vt,i=e.contextType;return typeof i=="object"&&i!==null?i=qe(i):(s=Ie(e)?an:ke.current,r=e.contextTypes,i=(r=r!=null)?Vn(t,s):Vt),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yi,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function su(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yi.enqueueReplaceState(e,e.state,null)}function Vo(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Hl(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=qe(i):(i=Ie(e)?an:ke.current,s.context=Vn(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ho(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&yi.enqueueReplaceState(s,s.state,null),Zs(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Gn(t,e){try{var n="",r=e;do n+=af(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Zi(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wo(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Lp=typeof WeakMap=="function"?WeakMap:Map;function Pd(t,e,n){n=_t(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){si||(si=!0,tl=r),Wo(t,e)},n}function Cd(t,e,n){n=_t(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Wo(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Wo(t,e),typeof r!="function"&&(zt===null?zt=new Set([this]):zt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function iu(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Lp;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Qp.bind(null,t,e,n),e.then(t,t))}function ou(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lu(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_t(-1,1),e.tag=2,Dt(n,e,1))),n.lanes|=1),t)}var $p=Et.ReactCurrentOwner,Oe=!1;function Ee(t,e,n,r){e.child=t===null?sd(e,null,n,r):Kn(e,t.child,n,r)}function au(t,e,n,r,s){n=n.render;var i=e.ref;return zn(e,s),r=Gl(t,e,n,r,i,s),n=Ql(),t!==null&&!Oe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xt(t,e,s)):(X&&n&&$l(e),e.flags|=1,Ee(t,e,r,s),e.child)}function uu(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ia(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Nd(t,e,i,r,s)):(t=Ms(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Mr,n(o,r)&&t.ref===e.ref)return xt(t,e,s)}return e.flags|=1,t=Bt(i,r),t.ref=e.ref,t.return=e,e.child=t}function Nd(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Mr(i,r)&&t.ref===e.ref)if(Oe=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Oe=!0);else return e.lanes=t.lanes,xt(t,e,s)}return Ko(t,e,n,r,s)}function Od(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q(Ln,Le),Le|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Q(Ln,Le),Le|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Q(Ln,Le),Le|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Q(Ln,Le),Le|=r;return Ee(t,e,s,n),e.child}function Rd(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ko(t,e,n,r,s){var i=Ie(n)?an:ke.current;return i=Vn(e,i),zn(e,s),n=Gl(t,e,n,r,i,s),r=Ql(),t!==null&&!Oe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xt(t,e,s)):(X&&r&&$l(e),e.flags|=1,Ee(t,e,n,s),e.child)}function cu(t,e,n,r,s){if(Ie(n)){var i=!0;Gs(e)}else i=!1;if(zn(e,s),e.stateNode===null)As(t,e),Td(e,n,r),Vo(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=qe(u):(u=Ie(n)?an:ke.current,u=Vn(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&su(e,o,r,u),Ct=!1;var f=e.memoizedState;o.state=f,Zs(e,r,o,s),a=e.memoizedState,l!==r||f!==a||Re.current||Ct?(typeof c=="function"&&(Ho(e,n,c,r),a=e.memoizedState),(l=Ct||ru(e,n,l,r,f,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,od(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ye(e.type,l),o.props=u,d=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=qe(a):(a=Ie(n)?an:ke.current,a=Vn(e,a));var v=n.getDerivedStateFromProps;(c=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==a)&&su(e,o,r,a),Ct=!1,f=e.memoizedState,o.state=f,Zs(e,r,o,s);var y=e.memoizedState;l!==d||f!==y||Re.current||Ct?(typeof v=="function"&&(Ho(e,n,v,r),y=e.memoizedState),(u=Ct||ru(e,n,u,r,f,y,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return qo(t,e,n,r,i,s)}function qo(t,e,n,r,s,i){Rd(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Qa(e,n,!1),xt(t,e,i);r=e.stateNode,$p.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Kn(e,t.child,null,i),e.child=Kn(e,null,l,i)):Ee(t,e,l,i),e.memoizedState=r.state,s&&Qa(e,n,!0),e.child}function Id(t){var e=t.stateNode;e.pendingContext?Ga(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ga(t,e.context,!1),Vl(t,e.containerInfo)}function du(t,e,n,r,s){return Wn(),Ul(s),e.flags|=256,Ee(t,e,n,r),e.child}var Go={dehydrated:null,treeContext:null,retryLane:0};function Qo(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ad(t,e,n){var r=e.pendingProps,s=Z.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Q(Z,s&1),t===null)return Fo(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ki(o,r,0,null),t=ln(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Qo(n),e.memoizedState=Go,t):Xl(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Mp(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Bt(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Bt(l,i):(i=ln(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Qo(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Go,r}return i=t.child,t=i.sibling,r=Bt(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Xl(t,e){return e=ki({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gs(t,e,n,r){return r!==null&&Ul(r),Kn(e,t.child,null,n),t=Xl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Mp(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Zi(Error(b(422))),gs(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ki({mode:"visible",children:r.children},s,0,null),i=ln(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Kn(e,t.child,null,o),e.child.memoizedState=Qo(o),e.memoizedState=Go,i);if(!(e.mode&1))return gs(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(b(419)),r=Zi(i,r,void 0),gs(t,e,o,r)}if(l=(o&t.childLanes)!==0,Oe||l){if(r=he,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,St(t,s),nt(r,t,s,-1))}return sa(),r=Zi(Error(b(421))),gs(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Jp.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$e=Ut(s.nextSibling),Me=e,X=!0,et=null,t!==null&&(Be[He++]=gt,Be[He++]=vt,Be[He++]=un,gt=t.id,vt=t.overflow,un=e),e=Xl(e,r.children),e.flags|=4096,e)}function hu(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Bo(t.return,e,n)}function eo(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ld(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ee(t,e,r.children,n),r=Z.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hu(t,n,e);else if(t.tag===19)hu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Q(Z,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ei(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),eo(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ei(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}eo(e,!0,n,null,i);break;case"together":eo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function As(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),dn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(b(153));if(e.child!==null){for(t=e.child,n=Bt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Bt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Up(t,e,n){switch(e.tag){case 3:Id(e),Wn();break;case 5:ld(e);break;case 1:Ie(e.type)&&Gs(e);break;case 4:Vl(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Q(Ys,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Q(Z,Z.current&1),e.flags|=128,null):n&e.child.childLanes?Ad(t,e,n):(Q(Z,Z.current&1),t=xt(t,e,n),t!==null?t.sibling:null);Q(Z,Z.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ld(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Q(Z,Z.current),r)break;return null;case 22:case 23:return e.lanes=0,Od(t,e,n)}return xt(t,e,n)}var $d,Jo,Md,Ud;$d=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jo=function(){};Md=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,sn(ct.current);var i=null;switch(n){case"input":s=yo(t,s),r=yo(t,r),i=[];break;case"select":s=te({},s,{value:void 0}),r=te({},r,{value:void 0}),i=[];break;case"textarea":s=ko(t,s),r=ko(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ks)}xo(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Nr.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var a=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Nr.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&J("scroll",t),i||l===a||(i=[])):(i=i||[]).push(u,a))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Ud=function(t,e,n,r){n!==r&&(e.flags|=4)};function cr(t,e){if(!X)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _e(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Dp(t,e,n){var r=e.pendingProps;switch(Ml(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(e),null;case 1:return Ie(e.type)&&qs(),_e(e),null;case 3:return r=e.stateNode,qn(),Y(Re),Y(ke),Kl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ps(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,et!==null&&(sl(et),et=null))),Jo(t,e),_e(e),null;case 5:Wl(e);var s=sn(Br.current);if(n=e.type,t!==null&&e.stateNode!=null)Md(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(b(166));return _e(e),null}if(t=sn(ct.current),ps(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[at]=e,r[zr]=i,t=(e.mode&1)!==0,n){case"dialog":J("cancel",r),J("close",r);break;case"iframe":case"object":case"embed":J("load",r);break;case"video":case"audio":for(s=0;s<gr.length;s++)J(gr[s],r);break;case"source":J("error",r);break;case"img":case"image":case"link":J("error",r),J("load",r);break;case"details":J("toggle",r);break;case"input":ka(r,i),J("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},J("invalid",r);break;case"textarea":xa(r,i),J("invalid",r)}xo(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&fs(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&fs(r.textContent,l,t),s=["children",""+l]):Nr.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&J("scroll",r)}switch(n){case"input":is(r),Sa(r,i,!0);break;case"textarea":is(r),Ea(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ks)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hc(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[at]=e,t[zr]=r,$d(t,e,!1,!1),e.stateNode=t;e:{switch(o=Eo(n,r),n){case"dialog":J("cancel",t),J("close",t),s=r;break;case"iframe":case"object":case"embed":J("load",t),s=r;break;case"video":case"audio":for(s=0;s<gr.length;s++)J(gr[s],t);s=r;break;case"source":J("error",t),s=r;break;case"img":case"image":case"link":J("error",t),J("load",t),s=r;break;case"details":J("toggle",t),s=r;break;case"input":ka(t,r),s=yo(t,r),J("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=te({},r,{value:void 0}),J("invalid",t);break;case"textarea":xa(t,r),s=ko(t,r),J("invalid",t);break;default:s=r}xo(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?mc(t,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&fc(t,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Or(t,a):typeof a=="number"&&Or(t,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Nr.hasOwnProperty(i)?a!=null&&i==="onScroll"&&J("scroll",t):a!=null&&Sl(t,i,a,o))}switch(n){case"input":is(t),Sa(t,r,!1);break;case"textarea":is(t),Ea(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ht(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?$n(t,!!r.multiple,i,!1):r.defaultValue!=null&&$n(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ks)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _e(e),null;case 6:if(t&&e.stateNode!=null)Ud(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(b(166));if(n=sn(Br.current),sn(ct.current),ps(e)){if(r=e.stateNode,n=e.memoizedProps,r[at]=e,(i=r.nodeValue!==n)&&(t=Me,t!==null))switch(t.tag){case 3:fs(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fs(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[at]=e,e.stateNode=r}return _e(e),null;case 13:if(Y(Z),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(X&&$e!==null&&e.mode&1&&!(e.flags&128))nd(),Wn(),e.flags|=98560,i=!1;else if(i=ps(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(b(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(b(317));i[at]=e}else Wn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_e(e),i=!1}else et!==null&&(sl(et),et=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Z.current&1?ue===0&&(ue=3):sa())),e.updateQueue!==null&&(e.flags|=4),_e(e),null);case 4:return qn(),Jo(t,e),t===null&&Ur(e.stateNode.containerInfo),_e(e),null;case 10:return Fl(e.type._context),_e(e),null;case 17:return Ie(e.type)&&qs(),_e(e),null;case 19:if(Y(Z),i=e.memoizedState,i===null)return _e(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)cr(i,!1);else{if(ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ei(t),o!==null){for(e.flags|=128,cr(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Q(Z,Z.current&1|2),e.child}t=t.sibling}i.tail!==null&&se()>Qn&&(e.flags|=128,r=!0,cr(i,!1),e.lanes=4194304)}else{if(!r)if(t=ei(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),cr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!X)return _e(e),null}else 2*se()-i.renderingStartTime>Qn&&n!==1073741824&&(e.flags|=128,r=!0,cr(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=se(),e.sibling=null,n=Z.current,Q(Z,r?n&1|2:n&1),e):(_e(e),null);case 22:case 23:return ra(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Le&1073741824&&(_e(e),e.subtreeFlags&6&&(e.flags|=8192)):_e(e),null;case 24:return null;case 25:return null}throw Error(b(156,e.tag))}function zp(t,e){switch(Ml(e),e.tag){case 1:return Ie(e.type)&&qs(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qn(),Y(Re),Y(ke),Kl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wl(e),null;case 13:if(Y(Z),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(b(340));Wn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Y(Z),null;case 4:return qn(),null;case 10:return Fl(e.type._context),null;case 22:case 23:return ra(),null;case 24:return null;default:return null}}var vs=!1,we=!1,Fp=typeof WeakSet=="function"?WeakSet:Set,O=null;function An(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){re(t,e,r)}else n.current=null}function Yo(t,e,n){try{n()}catch(r){re(t,e,r)}}var fu=!1;function Bp(t,e){if(Ao=Hs,t=Hc(),Ll(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var v;d!==n||s!==0&&d.nodeType!==3||(l=o+s),d!==i||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(v=d.firstChild)!==null;)f=d,d=v;for(;;){if(d===t)break t;if(f===n&&++u===s&&(l=o),f===i&&++c===r&&(a=o),(v=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=v}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lo={focusedElem:t,selectionRange:n},Hs=!1,O=e;O!==null;)if(e=O,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,O=t;else for(;O!==null;){e=O;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var k=y.memoizedProps,T=y.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?k:Ye(e.type,k),T);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(_){re(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,O=t;break}O=e.return}return y=fu,fu=!1,y}function Er(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Yo(e,n,i)}s=s.next}while(s!==r)}}function _i(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xo(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Dd(t){var e=t.alternate;e!==null&&(t.alternate=null,Dd(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[at],delete e[zr],delete e[Uo],delete e[Ep],delete e[bp])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zd(t){return t.tag===5||t.tag===3||t.tag===4}function pu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zo(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ks));else if(r!==4&&(t=t.child,t!==null))for(Zo(t,e,n),t=t.sibling;t!==null;)Zo(t,e,n),t=t.sibling}function el(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(el(t,e,n),t=t.sibling;t!==null;)el(t,e,n),t=t.sibling}var me=null,Xe=!1;function bt(t,e,n){for(n=n.child;n!==null;)Fd(t,e,n),n=n.sibling}function Fd(t,e,n){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(di,n)}catch{}switch(n.tag){case 5:we||An(n,e);case 6:var r=me,s=Xe;me=null,bt(t,e,n),me=r,Xe=s,me!==null&&(Xe?(t=me,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):me.removeChild(n.stateNode));break;case 18:me!==null&&(Xe?(t=me,n=n.stateNode,t.nodeType===8?qi(t.parentNode,n):t.nodeType===1&&qi(t,n),Lr(t)):qi(me,n.stateNode));break;case 4:r=me,s=Xe,me=n.stateNode.containerInfo,Xe=!0,bt(t,e,n),me=r,Xe=s;break;case 0:case 11:case 14:case 15:if(!we&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Yo(n,e,o),s=s.next}while(s!==r)}bt(t,e,n);break;case 1:if(!we&&(An(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){re(n,e,l)}bt(t,e,n);break;case 21:bt(t,e,n);break;case 22:n.mode&1?(we=(r=we)||n.memoizedState!==null,bt(t,e,n),we=r):bt(t,e,n);break;default:bt(t,e,n)}}function mu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Fp),e.forEach(function(r){var s=Yp.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Qe(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:me=l.stateNode,Xe=!1;break e;case 3:me=l.stateNode.containerInfo,Xe=!0;break e;case 4:me=l.stateNode.containerInfo,Xe=!0;break e}l=l.return}if(me===null)throw Error(b(160));Fd(i,o,s),me=null,Xe=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(u){re(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Bd(e,t),e=e.sibling}function Bd(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qe(e,t),it(t),r&4){try{Er(3,t,t.return),_i(3,t)}catch(k){re(t,t.return,k)}try{Er(5,t,t.return)}catch(k){re(t,t.return,k)}}break;case 1:Qe(e,t),it(t),r&512&&n!==null&&An(n,n.return);break;case 5:if(Qe(e,t),it(t),r&512&&n!==null&&An(n,n.return),t.flags&32){var s=t.stateNode;try{Or(s,"")}catch(k){re(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&cc(s,i),Eo(l,o);var u=Eo(l,i);for(o=0;o<a.length;o+=2){var c=a[o],d=a[o+1];c==="style"?mc(s,d):c==="dangerouslySetInnerHTML"?fc(s,d):c==="children"?Or(s,d):Sl(s,c,d,u)}switch(l){case"input":_o(s,i);break;case"textarea":dc(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?$n(s,!!i.multiple,v,!1):f!==!!i.multiple&&(i.defaultValue!=null?$n(s,!!i.multiple,i.defaultValue,!0):$n(s,!!i.multiple,i.multiple?[]:"",!1))}s[zr]=i}catch(k){re(t,t.return,k)}}break;case 6:if(Qe(e,t),it(t),r&4){if(t.stateNode===null)throw Error(b(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){re(t,t.return,k)}}break;case 3:if(Qe(e,t),it(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lr(e.containerInfo)}catch(k){re(t,t.return,k)}break;case 4:Qe(e,t),it(t);break;case 13:Qe(e,t),it(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ta=se())),r&4&&mu(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(we=(u=we)||c,Qe(e,t),we=u):Qe(e,t),it(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(O=t,c=t.child;c!==null;){for(d=O=c;O!==null;){switch(f=O,v=f.child,f.tag){case 0:case 11:case 14:case 15:Er(4,f,f.return);break;case 1:An(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(k){re(r,n,k)}}break;case 5:An(f,f.return);break;case 22:if(f.memoizedState!==null){vu(d);continue}}v!==null?(v.return=f,O=v):vu(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=pc("display",o))}catch(k){re(t,t.return,k)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(k){re(t,t.return,k)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Qe(e,t),it(t),r&4&&mu(t);break;case 21:break;default:Qe(e,t),it(t)}}function it(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zd(n)){var r=n;break e}n=n.return}throw Error(b(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Or(s,""),r.flags&=-33);var i=pu(t);el(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=pu(t);Zo(t,l,o);break;default:throw Error(b(161))}}catch(a){re(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Hp(t,e,n){O=t,Hd(t)}function Hd(t,e,n){for(var r=(t.mode&1)!==0;O!==null;){var s=O,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||vs;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||we;l=vs;var u=we;if(vs=o,(we=a)&&!u)for(O=s;O!==null;)o=O,a=o.child,o.tag===22&&o.memoizedState!==null?yu(s):a!==null?(a.return=o,O=a):yu(s);for(;i!==null;)O=i,Hd(i),i=i.sibling;O=s,vs=l,we=u}gu(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,O=i):gu(t)}}function gu(t){for(;O!==null;){var e=O;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:we||_i(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!we)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ye(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&eu(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}eu(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Lr(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}we||e.flags&512&&Xo(e)}catch(f){re(e,e.return,f)}}if(e===t){O=null;break}if(n=e.sibling,n!==null){n.return=e.return,O=n;break}O=e.return}}function vu(t){for(;O!==null;){var e=O;if(e===t){O=null;break}var n=e.sibling;if(n!==null){n.return=e.return,O=n;break}O=e.return}}function yu(t){for(;O!==null;){var e=O;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_i(4,e)}catch(a){re(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(a){re(e,s,a)}}var i=e.return;try{Xo(e)}catch(a){re(e,i,a)}break;case 5:var o=e.return;try{Xo(e)}catch(a){re(e,o,a)}}}catch(a){re(e,e.return,a)}if(e===t){O=null;break}var l=e.sibling;if(l!==null){l.return=e.return,O=l;break}O=e.return}}var Vp=Math.ceil,ri=Et.ReactCurrentDispatcher,Zl=Et.ReactCurrentOwner,We=Et.ReactCurrentBatchConfig,H=0,he=null,ie=null,ge=0,Le=0,Ln=Kt(0),ue=0,Kr=null,dn=0,wi=0,ea=0,br=null,Ce=null,ta=0,Qn=1/0,ft=null,si=!1,tl=null,zt=null,ys=!1,At=null,ii=0,jr=0,nl=null,Ls=-1,$s=0;function be(){return H&6?se():Ls!==-1?Ls:Ls=se()}function Ft(t){return t.mode&1?H&2&&ge!==0?ge&-ge:Tp.transition!==null?($s===0&&($s=Tc()),$s):(t=W,t!==0||(t=window.event,t=t===void 0?16:Ac(t.type)),t):1}function nt(t,e,n,r){if(50<jr)throw jr=0,nl=null,Error(b(185));Qr(t,n,r),(!(H&2)||t!==he)&&(t===he&&(!(H&2)&&(wi|=n),ue===4&&Ot(t,ge)),Ae(t,r),n===1&&H===0&&!(e.mode&1)&&(Qn=se()+500,gi&&qt()))}function Ae(t,e){var n=t.callbackNode;Tf(t,e);var r=Bs(t,t===he?ge:0);if(r===0)n!==null&&Ta(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ta(n),e===1)t.tag===0?jp(_u.bind(null,t)):Zc(_u.bind(null,t)),Sp(function(){!(H&6)&&qt()}),n=null;else{switch(Pc(r)){case 1:n=Tl;break;case 4:n=bc;break;case 16:n=Fs;break;case 536870912:n=jc;break;default:n=Fs}n=Yd(n,Vd.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Vd(t,e){if(Ls=-1,$s=0,H&6)throw Error(b(327));var n=t.callbackNode;if(Fn()&&t.callbackNode!==n)return null;var r=Bs(t,t===he?ge:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=oi(t,r);else{e=r;var s=H;H|=2;var i=Kd();(he!==t||ge!==e)&&(ft=null,Qn=se()+500,on(t,e));do try{qp();break}catch(l){Wd(t,l)}while(!0);zl(),ri.current=i,H=s,ie!==null?e=0:(he=null,ge=0,e=ue)}if(e!==0){if(e===2&&(s=Co(t),s!==0&&(r=s,e=rl(t,s))),e===1)throw n=Kr,on(t,0),Ot(t,r),Ae(t,se()),n;if(e===6)Ot(t,r);else{if(s=t.current.alternate,!(r&30)&&!Wp(s)&&(e=oi(t,r),e===2&&(i=Co(t),i!==0&&(r=i,e=rl(t,i))),e===1))throw n=Kr,on(t,0),Ot(t,r),Ae(t,se()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(b(345));case 2:Zt(t,Ce,ft);break;case 3:if(Ot(t,r),(r&130023424)===r&&(e=ta+500-se(),10<e)){if(Bs(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){be(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Mo(Zt.bind(null,t,Ce,ft),e);break}Zt(t,Ce,ft);break;case 4:if(Ot(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-tt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Vp(r/1960))-r,10<r){t.timeoutHandle=Mo(Zt.bind(null,t,Ce,ft),r);break}Zt(t,Ce,ft);break;case 5:Zt(t,Ce,ft);break;default:throw Error(b(329))}}}return Ae(t,se()),t.callbackNode===n?Vd.bind(null,t):null}function rl(t,e){var n=br;return t.current.memoizedState.isDehydrated&&(on(t,e).flags|=256),t=oi(t,e),t!==2&&(e=Ce,Ce=n,e!==null&&sl(e)),t}function sl(t){Ce===null?Ce=t:Ce.push.apply(Ce,t)}function Wp(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!rt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ot(t,e){for(e&=~ea,e&=~wi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tt(e),r=1<<n;t[n]=-1,e&=~r}}function _u(t){if(H&6)throw Error(b(327));Fn();var e=Bs(t,0);if(!(e&1))return Ae(t,se()),null;var n=oi(t,e);if(t.tag!==0&&n===2){var r=Co(t);r!==0&&(e=r,n=rl(t,r))}if(n===1)throw n=Kr,on(t,0),Ot(t,e),Ae(t,se()),n;if(n===6)throw Error(b(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zt(t,Ce,ft),Ae(t,se()),null}function na(t,e){var n=H;H|=1;try{return t(e)}finally{H=n,H===0&&(Qn=se()+500,gi&&qt())}}function hn(t){At!==null&&At.tag===0&&!(H&6)&&Fn();var e=H;H|=1;var n=We.transition,r=W;try{if(We.transition=null,W=1,t)return t()}finally{W=r,We.transition=n,H=e,!(H&6)&&qt()}}function ra(){Le=Ln.current,Y(Ln)}function on(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,kp(n)),ie!==null)for(n=ie.return;n!==null;){var r=n;switch(Ml(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qs();break;case 3:qn(),Y(Re),Y(ke),Kl();break;case 5:Wl(r);break;case 4:qn();break;case 13:Y(Z);break;case 19:Y(Z);break;case 10:Fl(r.type._context);break;case 22:case 23:ra()}n=n.return}if(he=t,ie=t=Bt(t.current,null),ge=Le=e,ue=0,Kr=null,ea=wi=dn=0,Ce=br=null,rn!==null){for(e=0;e<rn.length;e++)if(n=rn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}rn=null}return t}function Wd(t,e){do{var n=ie;try{if(zl(),Rs.current=ni,ti){for(var r=ee.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ti=!1}if(cn=0,de=ae=ee=null,xr=!1,Hr=0,Zl.current=null,n===null||n.return===null){ue=1,Kr=e,ie=null;break}e:{var i=t,o=n.return,l=n,a=e;if(e=ge,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var v=ou(o);if(v!==null){v.flags&=-257,lu(v,o,l,i,e),v.mode&1&&iu(i,u,e),e=v,a=u;var y=e.updateQueue;if(y===null){var k=new Set;k.add(a),e.updateQueue=k}else y.add(a);break e}else{if(!(e&1)){iu(i,u,e),sa();break e}a=Error(b(426))}}else if(X&&l.mode&1){var T=ou(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),lu(T,o,l,i,e),Ul(Gn(a,l));break e}}i=a=Gn(a,l),ue!==4&&(ue=2),br===null?br=[i]:br.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Pd(i,a,e);Za(i,g);break e;case 1:l=a;var p=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(zt===null||!zt.has(m)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=Cd(i,l,e);Za(i,_);break e}}i=i.return}while(i!==null)}Gd(n)}catch(S){e=S,ie===n&&n!==null&&(ie=n=n.return);continue}break}while(!0)}function Kd(){var t=ri.current;return ri.current=ni,t===null?ni:t}function sa(){(ue===0||ue===3||ue===2)&&(ue=4),he===null||!(dn&268435455)&&!(wi&268435455)||Ot(he,ge)}function oi(t,e){var n=H;H|=2;var r=Kd();(he!==t||ge!==e)&&(ft=null,on(t,e));do try{Kp();break}catch(s){Wd(t,s)}while(!0);if(zl(),H=n,ri.current=r,ie!==null)throw Error(b(261));return he=null,ge=0,ue}function Kp(){for(;ie!==null;)qd(ie)}function qp(){for(;ie!==null&&!yf();)qd(ie)}function qd(t){var e=Jd(t.alternate,t,Le);t.memoizedProps=t.pendingProps,e===null?Gd(t):ie=e,Zl.current=null}function Gd(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zp(n,e),n!==null){n.flags&=32767,ie=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ue=6,ie=null;return}}else if(n=Dp(n,e,Le),n!==null){ie=n;return}if(e=e.sibling,e!==null){ie=e;return}ie=e=t}while(e!==null);ue===0&&(ue=5)}function Zt(t,e,n){var r=W,s=We.transition;try{We.transition=null,W=1,Gp(t,e,n,r)}finally{We.transition=s,W=r}return null}function Gp(t,e,n,r){do Fn();while(At!==null);if(H&6)throw Error(b(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(b(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Pf(t,i),t===he&&(ie=he=null,ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ys||(ys=!0,Yd(Fs,function(){return Fn(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=We.transition,We.transition=null;var o=W;W=1;var l=H;H|=4,Zl.current=null,Bp(t,n),Bd(n,t),pp(Lo),Hs=!!Ao,Lo=Ao=null,t.current=n,Hp(n),_f(),H=l,W=o,We.transition=i}else t.current=n;if(ys&&(ys=!1,At=t,ii=s),i=t.pendingLanes,i===0&&(zt=null),Sf(n.stateNode),Ae(t,se()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(si)throw si=!1,t=tl,tl=null,t;return ii&1&&t.tag!==0&&Fn(),i=t.pendingLanes,i&1?t===nl?jr++:(jr=0,nl=t):jr=0,qt(),null}function Fn(){if(At!==null){var t=Pc(ii),e=We.transition,n=W;try{if(We.transition=null,W=16>t?16:t,At===null)var r=!1;else{if(t=At,At=null,ii=0,H&6)throw Error(b(331));var s=H;for(H|=4,O=t.current;O!==null;){var i=O,o=i.child;if(O.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(O=u;O!==null;){var c=O;switch(c.tag){case 0:case 11:case 15:Er(8,c,i)}var d=c.child;if(d!==null)d.return=c,O=d;else for(;O!==null;){c=O;var f=c.sibling,v=c.return;if(Dd(c),c===u){O=null;break}if(f!==null){f.return=v,O=f;break}O=v}}}var y=i.alternate;if(y!==null){var k=y.child;if(k!==null){y.child=null;do{var T=k.sibling;k.sibling=null,k=T}while(k!==null)}}O=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,O=o;else e:for(;O!==null;){if(i=O,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Er(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,O=g;break e}O=i.return}}var p=t.current;for(O=p;O!==null;){o=O;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,O=m;else e:for(o=p;O!==null;){if(l=O,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_i(9,l)}}catch(S){re(l,l.return,S)}if(l===o){O=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,O=_;break e}O=l.return}}if(H=s,qt(),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(di,t)}catch{}r=!0}return r}finally{W=n,We.transition=e}}return!1}function wu(t,e,n){e=Gn(n,e),e=Pd(t,e,1),t=Dt(t,e,1),e=be(),t!==null&&(Qr(t,1,e),Ae(t,e))}function re(t,e,n){if(t.tag===3)wu(t,t,n);else for(;e!==null;){if(e.tag===3){wu(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zt===null||!zt.has(r))){t=Gn(n,t),t=Cd(e,t,1),e=Dt(e,t,1),t=be(),e!==null&&(Qr(e,1,t),Ae(e,t));break}}e=e.return}}function Qp(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=be(),t.pingedLanes|=t.suspendedLanes&n,he===t&&(ge&n)===n&&(ue===4||ue===3&&(ge&130023424)===ge&&500>se()-ta?on(t,0):ea|=n),Ae(t,e)}function Qd(t,e){e===0&&(t.mode&1?(e=as,as<<=1,!(as&130023424)&&(as=4194304)):e=1);var n=be();t=St(t,e),t!==null&&(Qr(t,e,n),Ae(t,n))}function Jp(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Qd(t,n)}function Yp(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(b(314))}r!==null&&r.delete(e),Qd(t,n)}var Jd;Jd=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Re.current)Oe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Oe=!1,Up(t,e,n);Oe=!!(t.flags&131072)}else Oe=!1,X&&e.flags&1048576&&ed(e,Js,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;As(t,e),t=e.pendingProps;var s=Vn(e,ke.current);zn(e,n),s=Gl(null,e,r,t,s,n);var i=Ql();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ie(r)?(i=!0,Gs(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Hl(e),s.updater=yi,e.stateNode=s,s._reactInternals=e,Vo(e,r,t,n),e=qo(null,e,r,!0,i,n)):(e.tag=0,X&&i&&$l(e),Ee(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(As(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Zp(r),t=Ye(r,t),s){case 0:e=Ko(null,e,r,t,n);break e;case 1:e=cu(null,e,r,t,n);break e;case 11:e=au(null,e,r,t,n);break e;case 14:e=uu(null,e,r,Ye(r.type,t),n);break e}throw Error(b(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ye(r,s),Ko(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ye(r,s),cu(t,e,r,s,n);case 3:e:{if(Id(e),t===null)throw Error(b(387));r=e.pendingProps,i=e.memoizedState,s=i.element,od(t,e),Zs(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Gn(Error(b(423)),e),e=du(t,e,r,n,s);break e}else if(r!==s){s=Gn(Error(b(424)),e),e=du(t,e,r,n,s);break e}else for($e=Ut(e.stateNode.containerInfo.firstChild),Me=e,X=!0,et=null,n=sd(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wn(),r===s){e=xt(t,e,n);break e}Ee(t,e,r,n)}e=e.child}return e;case 5:return ld(e),t===null&&Fo(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,$o(r,s)?o=null:i!==null&&$o(r,i)&&(e.flags|=32),Rd(t,e),Ee(t,e,o,n),e.child;case 6:return t===null&&Fo(e),null;case 13:return Ad(t,e,n);case 4:return Vl(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Kn(e,null,r,n):Ee(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ye(r,s),au(t,e,r,s,n);case 7:return Ee(t,e,e.pendingProps,n),e.child;case 8:return Ee(t,e,e.pendingProps.children,n),e.child;case 12:return Ee(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Q(Ys,r._currentValue),r._currentValue=o,i!==null)if(rt(i.value,o)){if(i.children===s.children&&!Re.current){e=xt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=_t(-1,n&-n),a.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Bo(i.return,n,e),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(b(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Bo(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ee(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,zn(e,n),s=qe(s),r=r(s),e.flags|=1,Ee(t,e,r,n),e.child;case 14:return r=e.type,s=Ye(r,e.pendingProps),s=Ye(r.type,s),uu(t,e,r,s,n);case 15:return Nd(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ye(r,s),As(t,e),e.tag=1,Ie(r)?(t=!0,Gs(e)):t=!1,zn(e,n),Td(e,r,s),Vo(e,r,s,n),qo(null,e,r,!0,t,n);case 19:return Ld(t,e,n);case 22:return Od(t,e,n)}throw Error(b(156,e.tag))};function Yd(t,e){return Ec(t,e)}function Xp(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ve(t,e,n,r){return new Xp(t,e,n,r)}function ia(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zp(t){if(typeof t=="function")return ia(t)?1:0;if(t!=null){if(t=t.$$typeof,t===El)return 11;if(t===bl)return 14}return 2}function Bt(t,e){var n=t.alternate;return n===null?(n=Ve(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ms(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")ia(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case bn:return ln(n.children,s,i,e);case xl:o=8,s|=8;break;case po:return t=Ve(12,n,e,s|2),t.elementType=po,t.lanes=i,t;case mo:return t=Ve(13,n,e,s),t.elementType=mo,t.lanes=i,t;case go:return t=Ve(19,n,e,s),t.elementType=go,t.lanes=i,t;case lc:return ki(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ic:o=10;break e;case oc:o=9;break e;case El:o=11;break e;case bl:o=14;break e;case Pt:o=16,r=null;break e}throw Error(b(130,t==null?t:typeof t,""))}return e=Ve(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ln(t,e,n,r){return t=Ve(7,t,r,e),t.lanes=n,t}function ki(t,e,n,r){return t=Ve(22,t,r,e),t.elementType=lc,t.lanes=n,t.stateNode={isHidden:!1},t}function to(t,e,n){return t=Ve(6,t,null,e),t.lanes=n,t}function no(t,e,n){return e=Ve(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function em(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$i(0),this.expirationTimes=$i(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$i(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function oa(t,e,n,r,s,i,o,l,a){return t=new em(t,e,n,l,a),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ve(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hl(i),t}function tm(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:En,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Xd(t){if(!t)return Vt;t=t._reactInternals;e:{if(pn(t)!==t||t.tag!==1)throw Error(b(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ie(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(b(171))}if(t.tag===1){var n=t.type;if(Ie(n))return Xc(t,n,e)}return e}function Zd(t,e,n,r,s,i,o,l,a){return t=oa(n,r,!0,t,s,i,o,l,a),t.context=Xd(null),n=t.current,r=be(),s=Ft(n),i=_t(r,s),i.callback=e??null,Dt(n,i,s),t.current.lanes=s,Qr(t,s,r),Ae(t,r),t}function Si(t,e,n,r){var s=e.current,i=be(),o=Ft(s);return n=Xd(n),e.context===null?e.context=n:e.pendingContext=n,e=_t(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Dt(s,e,o),t!==null&&(nt(t,s,o,i),Os(t,s,o)),o}function li(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ku(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function la(t,e){ku(t,e),(t=t.alternate)&&ku(t,e)}function nm(){return null}var eh=typeof reportError=="function"?reportError:function(t){console.error(t)};function aa(t){this._internalRoot=t}xi.prototype.render=aa.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(b(409));Si(t,e,null,null)};xi.prototype.unmount=aa.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hn(function(){Si(null,t,null,null)}),e[kt]=null}};function xi(t){this._internalRoot=t}xi.prototype.unstable_scheduleHydration=function(t){if(t){var e=Oc();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Nt.length&&e!==0&&e<Nt[n].priority;n++);Nt.splice(n,0,t),n===0&&Ic(t)}};function ua(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ei(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Su(){}function rm(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=li(o);i.call(u)}}var o=Zd(e,r,t,0,null,!1,!1,"",Su);return t._reactRootContainer=o,t[kt]=o.current,Ur(t.nodeType===8?t.parentNode:t),hn(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=li(a);l.call(u)}}var a=oa(t,0,!1,null,null,!1,!1,"",Su);return t._reactRootContainer=a,t[kt]=a.current,Ur(t.nodeType===8?t.parentNode:t),hn(function(){Si(e,a,n,r)}),a}function bi(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=li(o);l.call(a)}}Si(e,o,t,s)}else o=rm(n,e,t,s,r);return li(o)}Cc=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mr(e.pendingLanes);n!==0&&(Pl(e,n|1),Ae(e,se()),!(H&6)&&(Qn=se()+500,qt()))}break;case 13:hn(function(){var r=St(t,1);if(r!==null){var s=be();nt(r,t,1,s)}}),la(t,1)}};Cl=function(t){if(t.tag===13){var e=St(t,134217728);if(e!==null){var n=be();nt(e,t,134217728,n)}la(t,134217728)}};Nc=function(t){if(t.tag===13){var e=Ft(t),n=St(t,e);if(n!==null){var r=be();nt(n,t,e,r)}la(t,e)}};Oc=function(){return W};Rc=function(t,e){var n=W;try{return W=t,e()}finally{W=n}};jo=function(t,e,n){switch(e){case"input":if(_o(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=mi(r);if(!s)throw Error(b(90));uc(r),_o(r,s)}}}break;case"textarea":dc(t,n);break;case"select":e=n.value,e!=null&&$n(t,!!n.multiple,e,!1)}};yc=na;_c=hn;var sm={usingClientEntryPoint:!1,Events:[Yr,Cn,mi,gc,vc,na]},dr={findFiberByHostInstance:nn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},im={bundleType:dr.bundleType,version:dr.version,rendererPackageName:dr.rendererPackageName,rendererConfig:dr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Et.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Sc(t),t===null?null:t.stateNode},findFiberByHostInstance:dr.findFiberByHostInstance||nm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _s=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_s.isDisabled&&_s.supportsFiber)try{di=_s.inject(im),ut=_s}catch{}}De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sm;De.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ua(e))throw Error(b(200));return tm(t,e,null,n)};De.createRoot=function(t,e){if(!ua(t))throw Error(b(299));var n=!1,r="",s=eh;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=oa(t,1,!1,null,null,n,!1,r,s),t[kt]=e.current,Ur(t.nodeType===8?t.parentNode:t),new aa(e)};De.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(b(188)):(t=Object.keys(t).join(","),Error(b(268,t)));return t=Sc(e),t=t===null?null:t.stateNode,t};De.flushSync=function(t){return hn(t)};De.hydrate=function(t,e,n){if(!Ei(e))throw Error(b(200));return bi(null,t,e,!0,n)};De.hydrateRoot=function(t,e,n){if(!ua(t))throw Error(b(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=eh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Zd(e,null,t,1,n??null,s,!1,i,o),t[kt]=e.current,Ur(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new xi(e)};De.render=function(t,e,n){if(!Ei(e))throw Error(b(200));return bi(null,t,e,!1,n)};De.unmountComponentAtNode=function(t){if(!Ei(t))throw Error(b(40));return t._reactRootContainer?(hn(function(){bi(null,null,t,!1,function(){t._reactRootContainer=null,t[kt]=null})}),!0):!1};De.unstable_batchedUpdates=na;De.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ei(n))throw Error(b(200));if(t==null||t._reactInternals===void 0)throw Error(b(38));return bi(t,e,n,!1,r)};De.version="18.3.1-next-f1338f8080-20240426";function th(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(th)}catch(t){console.error(t)}}th(),tc.exports=De;var om=tc.exports,nh,xu=om;nh=xu.createRoot,xu.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Fe=(t,e)=>{const n=$.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:a,...u},c)=>$.createElement("svg",{ref:c,...lm,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${am(t)}`,l].join(" "),...u},[...e.map(([d,f])=>$.createElement(d,f)),...Array.isArray(a)?a:[a]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=Fe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=Fe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=Fe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=Fe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=Fe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=Fe("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=Fe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=Fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=Fe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=Fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=Fe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=Fe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=Fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ro=({onAddVideo:t,videoCount:e,onDownloadBackup:n})=>h.jsx("header",{className:"bg-white shadow-lg border-b-4 border-blue-600",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center space-x-6",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:"bg-blue-600 p-3 rounded-xl",children:h.jsx(rh,{className:"text-white",size:32})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ランニング動画解析"}),h.jsx("p",{className:"text-gray-600 mt-1",children:"Running Video Analysis Platform"})]})]}),h.jsxs("button",{onClick:t,className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[h.jsx(fm,{size:20,className:"mr-2"}),"Add Video"]}),h.jsxs("div",{className:"text-center",children:[h.jsxs("div",{className:"flex items-center text-gray-600",children:[h.jsx(ih,{size:20,className:"mr-2"}),h.jsx("span",{className:"text-2xl font-bold text-blue-600",children:e})]}),h.jsx("p",{className:"text-sm text-gray-500",children:"Videos"})]})]})})})}),ym="modulepreload",_m=function(t){return"/"+t},bu={},Zr=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(a=>{if(a=_m(a),a in bu)return;bu[a]=!0;const u=a.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":ym,u||(d.as="script"),d.crossOrigin="",d.href=a,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((f,v)=>{d.addEventListener("load",f),d.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${a}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},wm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zr(async()=>{const{default:r}=await Promise.resolve().then(()=>er);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class ca extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class km extends ca{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ju extends ca{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Tu extends ca{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var il;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(il||(il={}));var Sm=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};class xm{constructor(e,{headers:n={},customFetch:r,region:s=il.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=wm(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Sm(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let l={},{region:a}=n;a||(a=this.region);const u=new URL(`${this.url}/${e}`);a&&a!=="any"&&(l["x-region"]=a,u.searchParams.set("forceFunctionRegion",a));let c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const d=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:c}).catch(k=>{throw new km(k)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new ju(d);if(!d.ok)throw new Tu(d);let v=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return v==="application/json"?y=yield d.json():v==="application/octet-stream"?y=yield d.blob():v==="text/event-stream"?y=d:v==="multipart/form-data"?y=yield d.formData():y=yield d.text(),{data:y,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof Tu||s instanceof ju?s.context:void 0}}})}}var Ne={},da={},ji={},es={},Ti={},Pi={},Em=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Jn=Em();const bm=Jn.fetch,oh=Jn.fetch.bind(Jn),lh=Jn.Headers,jm=Jn.Request,Tm=Jn.Response,er=Object.freeze(Object.defineProperty({__proto__:null,Headers:lh,Request:jm,Response:Tm,default:oh,fetch:bm},Symbol.toStringTag,{value:"Module"})),Pm=Ih(er);var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});let Cm=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ci.default=Cm;var ah=Ke&&Ke.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pi,"__esModule",{value:!0});const Nm=ah(Pm),Om=ah(Ci);let Rm=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Nm.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a,u;let c=null,d=null,f=null,v=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?d=p:d=JSON.parse(p))}const T=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),g=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");T&&g&&g.length>1&&(f=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,v=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const T=await i.text();try{c=JSON.parse(T),Array.isArray(c)&&i.status===404&&(d=[],c=null,v=200,y="OK")}catch{i.status===404&&T===""?(v=204,y="No Content"):c={message:T}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,v=200,y="OK"),c&&this.shouldThrowOnError)throw new Om.default(c)}return{error:c,data:d,count:f,status:v,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};Pi.default=Rm;var Im=Ke&&Ke.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ti,"__esModule",{value:!0});const Am=Im(Pi);let Lm=class extends Am.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${a};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ti.default=Lm;var $m=Ke&&Ke.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(es,"__esModule",{value:!0});const Mm=$m(Ti);let Um=class extends Mm.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};es.default=Um;var Dm=Ke&&Ke.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ji,"__esModule",{value:!0});const hr=Dm(es);let zm=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new hr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new hr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(a.length>0){const u=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new hr.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new hr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new hr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};ji.default=zm;var uh=Ke&&Ke.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(da,"__esModule",{value:!0});const Fm=uh(ji),Bm=uh(es);let Hm=class ch{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new Fm.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ch(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let l;const a=new URL(`${this.url}/rpc/${e}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{a.searchParams.append(d,f)})):(l="POST",u=n);const c=new Headers(this.headers);return i&&c.set("Prefer",`count=${i}`),new Bm.default({method:l,url:a,headers:c,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};da.default=Hm;var tr=Ke&&Ke.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.PostgrestError=Ne.PostgrestBuilder=Ne.PostgrestTransformBuilder=Ne.PostgrestFilterBuilder=Ne.PostgrestQueryBuilder=Ne.PostgrestClient=void 0;const dh=tr(da);Ne.PostgrestClient=dh.default;const hh=tr(ji);Ne.PostgrestQueryBuilder=hh.default;const fh=tr(es);Ne.PostgrestFilterBuilder=fh.default;const ph=tr(Ti);Ne.PostgrestTransformBuilder=ph.default;const mh=tr(Pi);Ne.PostgrestBuilder=mh.default;const gh=tr(Ci);Ne.PostgrestError=gh.default;var Vm=Ne.default={PostgrestClient:dh.default,PostgrestQueryBuilder:hh.default,PostgrestFilterBuilder:fh.default,PostgrestTransformBuilder:ph.default,PostgrestBuilder:mh.default,PostgrestError:gh.default};const{PostgrestClient:Wm,PostgrestQueryBuilder:iv,PostgrestFilterBuilder:ov,PostgrestTransformBuilder:lv,PostgrestBuilder:av,PostgrestError:uv}=Vm;class Km{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const qm="2.15.5",Gm=`realtime-js/${qm}`,Qm="1.0.0",ol=1e4,Jm=1e3,Ym=100;var Tr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Tr||(Tr={}));var oe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(oe||(oe={}));var Ze;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ze||(Ze={}));var ll;(function(t){t.websocket="websocket"})(ll||(ll={}));var tn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(tn||(tn={}));class Xm{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const a=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:u}}}class vh{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var G;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(G||(G={}));const Pu=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Zm(o,t,e,s),i),{})},Zm=(t,e,n,r)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?yh(i,o):al(o)},yh=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return rg(e,n)}switch(t){case G.bool:return eg(e);case G.float4:case G.float8:case G.int2:case G.int4:case G.int8:case G.numeric:case G.oid:return tg(e);case G.json:case G.jsonb:return ng(e);case G.timestamp:return sg(e);case G.abstime:case G.date:case G.daterange:case G.int4range:case G.int8range:case G.money:case G.reltime:case G.text:case G.time:case G.timestamptz:case G.timetz:case G.tsrange:case G.tstzrange:return al(e);default:return al(e)}},al=t=>t,eg=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},tg=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ng=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},rg=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>yh(e,l))}return t},sg=t=>typeof t=="string"?t.replace(" ","T"):t,_h=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class so{constructor(e,n,r={},s=ol){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Cu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Cu||(Cu={}));class Pr{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pr.syncState(this.state,s,i,o),this.pendingDiffs.forEach(a=>{this.state=Pr.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Pr.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),l={},a={};return this.map(i,(u,c)=>{o[u]||(a[u]=c)}),this.map(o,(u,c)=>{const d=i[u];if(d){const f=c.map(T=>T.presence_ref),v=d.map(T=>T.presence_ref),y=c.filter(T=>v.indexOf(T.presence_ref)<0),k=d.filter(T=>f.indexOf(T.presence_ref)<0);y.length>0&&(l[u]=y),k.length>0&&(a[u]=k)}else l[u]=c}),this.syncDiff(i,{joins:l,leaves:a},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,a)=>{var u;const c=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(a),c.length>0){const d=e[l].map(v=>v.presence_ref),f=c.filter(v=>d.indexOf(v.presence_ref)<0);e[l].unshift(...f)}r(l,c,a)}),this.map(o,(l,a)=>{let u=e[l];if(!u)return;const c=a.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[l]=u,s(l,u,a),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Nu;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Nu||(Nu={}));var Cr;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Cr||(Cr={}));var pt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(pt||(pt={}));class ha{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=oe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new so(this,Ze.join,this.params,this.timeout),this.rejoinTimer=new vh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=oe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=oe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=oe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ze.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Pr(this),this.broadcastEndpointURL=_h(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==oe.closed){const{config:{broadcast:o,presence:l,private:a}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[Cr.PRESENCE]&&this.bindings[Cr.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:c}),postgres_changes:u,private:a};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(pt.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(pt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var y;if(this.socket.setAuth(),v===void 0){e==null||e(pt.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,T=(y=k==null?void 0:k.length)!==null&&y!==void 0?y:0,g=[];for(let p=0;p<T;p++){const m=k[p],{filter:{event:_,schema:S,table:x,filter:P}}=m,N=v&&v[p];if(N&&N.event===_&&N.schema===S&&N.table===x&&N.filter===P)g.push(Object.assign(Object.assign({},m),{id:N.id}));else{this.unsubscribe(),this.state=oe.errored,e==null||e(pt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(pt.SUBSCRIBED);return}}).receive("error",v=>{this.state=oe.errored,e==null||e(pt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(pt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===oe.joined&&e===Cr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,a;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=oe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ze.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new so(this,Ze.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=oe.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new so(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Ym){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:u,join:c}=Ze;if(r&&[l,a,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var y,k,T;return((y=v.filter)===null||y===void 0?void 0:y.event)==="*"||((T=(k=v.filter)===null||k===void 0?void 0:k.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===o}).map(v=>v.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var y,k,T,g,p,m;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const _=v.id,S=(y=v.filter)===null||y===void 0?void 0:y.event;return _&&((k=n.ids)===null||k===void 0?void 0:k.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((T=n.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const _=(p=(g=v==null?void 0:v.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return _==="*"||_===((m=n==null?void 0:n.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:k,table:T,commit_timestamp:g,type:p,errors:m}=y;f=Object.assign(Object.assign({},{schema:k,table:T,commit_timestamp:g,eventType:p,new:{},old:{},errors:m}),this._getPayloadRecords(y))}v.callback(f,r)})}_isClosed(){return this.state===oe.closed}_isJoined(){return this.state===oe.joined}_isJoining(){return this.state===oe.joining}_isLeaving(){return this.state===oe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&ha.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ze.close,{},e)}_onError(e){this._on(Ze.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=oe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Pu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Pu(e.columns,e.old_record)),n}}const io=()=>{},ws={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ig=[1e3,2e3,5e3,1e4],og=1e4,lg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ag{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ol,this.transport=null,this.heartbeatIntervalMs=ws.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=io,this.ref=0,this.reconnectTimer=null,this.logger=io,this.conn=null,this.sendBuffer=[],this.serializer=new Xm,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Zr(async()=>{const{default:l}=await Promise.resolve().then(()=>er);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${ll.websocket}`,this.httpEndpoint=_h(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Km.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Qm}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Tr.connecting:return tn.Connecting;case Tr.open:return tn.Open;case Tr.closing:return tn.Closing;default:return tn.Closed}}isConnected(){return this.connectionState()===tn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new ha(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Jm,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ws.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,l=o?`(${o})`:"",a=i.status||"";this.log("receive",`${a} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ze.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([lg],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Gm};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Ze.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new vh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ws.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,l,a,u,c;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:ol,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:ws.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:io,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=e==null?void 0:e.reconnectAfterMs)!==null&&a!==void 0?a:d=>ig[d-1]||og,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(d,f)=>f(JSON.stringify(d)),this.decode=(c=e==null?void 0:e.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class fa extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function le(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class ug extends fa{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ul extends fa{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var cg=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};const wh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zr(async()=>{const{default:r}=await Promise.resolve().then(()=>er);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},dg=()=>cg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Zr(()=>Promise.resolve().then(()=>er),void 0)).Response:Response}),cl=t=>{if(Array.isArray(t))return t.map(n=>cl(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=cl(r)}),e},hg=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var mn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};const oo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),fg=(t,e,n)=>mn(void 0,void 0,void 0,function*(){const r=yield dg();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new ug(oo(s),i,o))}).catch(s=>{e(new ul(oo(s),s))}):e(new ul(oo(t),t))}),pg=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(hg(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function ts(t,e,n,r,s,i){return mn(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,pg(e,r,s,i)).then(a=>{if(!a.ok)throw a;return r!=null&&r.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>fg(a,l,r))})})}function ai(t,e,n,r){return mn(this,void 0,void 0,function*(){return ts(t,"GET",e,n,r)})}function lt(t,e,n,r,s){return mn(this,void 0,void 0,function*(){return ts(t,"POST",e,r,s,n)})}function dl(t,e,n,r,s){return mn(this,void 0,void 0,function*(){return ts(t,"PUT",e,r,s,n)})}function mg(t,e,n,r){return mn(this,void 0,void 0,function*(){return ts(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function kh(t,e,n,r,s){return mn(this,void 0,void 0,function*(){return ts(t,"DELETE",e,r,s,n)})}var xe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};const gg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ou={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vg{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=wh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return xe(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Ou),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const a=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),a&&i.append("metadata",this.encodeMetadata(a)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),a&&i.append("metadata",this.encodeMetadata(a))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,a&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),d=yield(e=="PUT"?dl:lt)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(le(i))return{data:null,error:i};throw i}})}upload(e,n,r){return xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return xe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let a;const u=Object.assign({upsert:Ou.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",u.cacheControl)):(a=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield dl(this.fetch,l.toString(),a,{headers:c});return{data:{path:i,fullPath:d.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(le(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e,n){return xe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield lt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new fa("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(le(r))return{data:null,error:r};throw r}})}update(e,n,r){return xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return xe(this,void 0,void 0,function*(){try{return{data:yield lt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(le(s))return{data:null,error:s};throw s}})}copy(e,n,r){return xe(this,void 0,void 0,function*(){try{return{data:{path:(yield lt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(le(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return xe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield lt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(le(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return xe(this,void 0,void 0,function*(){try{const s=yield lt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(le(s))return{data:null,error:s};throw s}})}download(e,n){return xe(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ai(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(le(l))return{data:null,error:l};throw l}})}info(e){return xe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ai(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:cl(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(le(r))return{data:null,error:r};throw r}})}exists(e){return xe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield mg(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(le(r)&&r instanceof ul){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});a!==""&&s.push(a);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return xe(this,void 0,void 0,function*(){try{return{data:yield kh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}list(e,n,r){return xe(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},gg),n),{prefix:e||""});return{data:yield lt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(le(s))return{data:null,error:s};throw s}})}listV2(e,n){return xe(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield lt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(le(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const yg="2.12.1",_g={"X-Client-Info":`storage-js/${yg}`};var vn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};class wg{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},_g),n),this.fetch=wh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return vn(this,void 0,void 0,function*(){try{return{data:yield ai(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(le(e))return{data:null,error:e};throw e}})}getBucket(e){return vn(this,void 0,void 0,function*(){try{return{data:yield ai(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return vn(this,void 0,void 0,function*(){try{return{data:yield lt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(le(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return vn(this,void 0,void 0,function*(){try{return{data:yield dl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(le(r))return{data:null,error:r};throw r}})}emptyBucket(e){return vn(this,void 0,void 0,function*(){try{return{data:yield lt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}deleteBucket(e){return vn(this,void 0,void 0,function*(){try{return{data:yield kh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(le(n))return{data:null,error:n};throw n}})}}class kg extends wg{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new vg(this.url,this.headers,e,this.fetch)}}const Sg="2.57.4";let vr="";typeof Deno<"u"?vr="deno":typeof document<"u"?vr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vr="react-native":vr="node";const xg={"X-Client-Info":`supabase-js-${vr}/${Sg}`},Eg={headers:xg},bg={schema:"public"},jg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Tg={};var Pg=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};const Cg=t=>{let e;return t?e=t:typeof fetch>"u"?e=oh:e=fetch,(...n)=>e(...n)},Ng=()=>typeof Headers>"u"?lh:Headers,Og=(t,e,n)=>{const r=Cg(n),s=Ng();return(i,o)=>Pg(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${a}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var Rg=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};function Ig(t){return t.endsWith("/")?t:t+"/"}function Ag(t,e){var n,r;const{db:s,auth:i,realtime:o,global:l}=t,{db:a,auth:u,realtime:c,global:d}=e,f={db:Object.assign(Object.assign({},a),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Rg(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function Lg(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ig(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Sh="2.71.1",Sn=30*1e3,hl=3,lo=hl*Sn,$g="http://localhost:9999",Mg="supabase.auth.token",Ug={"X-Client-Info":`gotrue-js/${Sh}`},fl="X-Supabase-Api-Version",xh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Dg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zg=10*60*1e3;class pa extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function M(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Fg extends pa{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Bg(t){return M(t)&&t.name==="AuthApiError"}class Eh extends pa{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Gt extends pa{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Tt extends Gt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Hg(t){return M(t)&&t.name==="AuthSessionMissingError"}class ks extends Gt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ss extends Gt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class xs extends Gt{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Vg(t){return M(t)&&t.name==="AuthImplicitGrantRedirectError"}class Ru extends Gt{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pl extends Gt{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ao(t){return M(t)&&t.name==="AuthRetryableFetchError"}class Iu extends Gt{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ml extends Gt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ui="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Au=` 	
\r=`.split(""),Wg=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Au.length;e+=1)t[Au[e].charCodeAt(0)]=-2;for(let e=0;e<ui.length;e+=1)t[ui[e].charCodeAt(0)]=e;return t})();function Lu(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ui[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ui[r]),e.queuedBits-=6}}function bh(t,e,n){const r=Wg[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function $u(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Gg(o,r,n)};for(let o=0;o<t.length;o+=1)bh(t.charCodeAt(o),s,i);return e.join("")}function Kg(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function qg(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Kg(r,e)}}function Gg(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Qg(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)bh(t.charCodeAt(s),n,r);return new Uint8Array(e)}function Jg(t){const e=[];return qg(t,n=>e.push(n)),new Uint8Array(e)}function Yg(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Lu(s,n,r)),Lu(null,n,r),e.join("")}function Xg(t){return Math.round(Date.now()/1e3)+t}function Zg(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Je=()=>typeof window<"u"&&typeof document<"u",Jt={tested:!1,writable:!1},jh=()=>{if(!Je())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jt.tested)return Jt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Jt.tested=!0,Jt.writable=!0}catch{Jt.tested=!0,Jt.writable=!1}return Jt.writable};function e0(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Th=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Zr(async()=>{const{default:r}=await Promise.resolve().then(()=>er);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},t0=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",xn=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Yt=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},jt=async(t,e)=>{await t.removeItem(e)};class Ni{constructor(){this.promise=new Ni.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ni.promiseConstructor=Promise;function uo(t){const e=t.split(".");if(e.length!==3)throw new ml("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Dg.test(e[r]))throw new ml("JWT not in base64url format");return{header:JSON.parse($u(e[0])),payload:JSON.parse($u(e[1])),signature:Qg(e[2]),raw:{header:e[0],payload:e[1]}}}async function n0(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function r0(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function s0(t){return("0"+t.toString(16)).substr(-2)}function i0(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,s0).join("")}async function o0(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function l0(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await o0(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yn(t,e,n=!1){const r=i0();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await xn(t,`${e}-code-verifier`,s);const i=await l0(r);return[i,r===i?"plain":"s256"]}const a0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function u0(t){const e=t.headers.get(fl);if(!e||!e.match(a0))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function c0(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function d0(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const h0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _n(t){if(!h0.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function co(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Mu(t){return JSON.parse(JSON.stringify(t))}var f0=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const en=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),p0=[502,503,504];async function Uu(t){var e;if(!t0(t))throw new pl(en(t),0);if(p0.includes(t.status))throw new pl(en(t),t.status);let n;try{n=await t.json()}catch(i){throw new Eh(en(i),i)}let r;const s=u0(t);if(s&&s.getTime()>=xh["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Iu(en(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Tt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Iu(en(n),t.status,n.weak_password.reasons);throw new Fg(en(n),t.status||500,r)}const m0=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function z(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[fl]||(i[fl]=xh["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await g0(t,e,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(a):{data:Object.assign({},a),error:null}}async function g0(t,e,n,r,s,i){const o=m0(e,r,s,i);let l;try{l=await t(n,Object.assign({},o))}catch(a){throw console.error(a),new pl(en(a),0)}if(l.ok||await Uu(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(a){await Uu(a)}}function ht(t){var e;let n=null;w0(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Xg(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Du(t){const e=ht(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Rt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function v0(t){return{data:t,error:null}}function y0(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=f0(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function _0(t){return t}function w0(t){return t.access_token&&t.refresh_token&&t.expires_in}const ho=["global","local","others"];var k0=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class S0{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Th(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=ho[0]){if(ho.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ho.join(", ")}`);try{return await z(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await z(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Rt})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=k0(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:y0,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(M(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await z(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Rt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,l,a;try{const u={nextPage:null,lastPage:0,total:0},c=await z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:_0});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(a=(l=c.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return v.length>0&&(v.forEach(y=>{const k=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(y.split(";")[1].split("=")[1]);u[`${T}Page`]=k}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(M(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){_n(e);try{return await z(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Rt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){_n(e);try{return await z(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Rt})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){_n(e);try{return await z(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Rt})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){_n(e.userId);try{const{data:n,error:r}=await z(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(M(n))return{data:null,error:n};throw n}}async _deleteFactor(e){_n(e.userId),_n(e.id);try{return{data:await z(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}}function zu(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function x0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const wn={debug:!!(globalThis&&jh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ph extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class E0 extends Ph{}async function b0(t,e,n){wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),wn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new E0(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(wn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}x0();const j0={url:$g,storageKey:Mg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ug,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Fu(t,e,n){return await n()}const kn={};class qr{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=qr.nextInstanceID,qr.nextInstanceID+=1,this.instanceID>0&&Je()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},j0),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new S0({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Th(s.fetch),this.lock=s.lock||Fu,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Je()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=b0:this.lock=Fu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:jh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zu(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=zu(this.memoryStorage)),Je()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=kn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){kn[this.storageKey]=Object.assign(Object.assign({},kn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=kn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){kn[this.storageKey]=Object.assign(Object.assign({},kn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Sh}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=e0(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Je()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Vg(i)){const a=(e=i.details)===null||e===void 0?void 0:e.code;if(a==="identity_already_exists"||a==="identity_not_found"||a==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return M(n)?{error:n}:{error:new Eh("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ht}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(i){if(M(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:c,password:d,options:f}=e;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await yn(this.storage,this.storageKey)),i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:v,code_challenge_method:y},xform:ht})}else if("phone"in e){const{phone:c,password:d,options:f}=e;i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ht})}else throw new Ss("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(i){if(M(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:l}=e;n=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Du})}else if("phone"in e){const{phone:i,password:o,options:l}=e;n=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Du})}else throw new Ss("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ks}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(M(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,l,a,u,c,d,f,v;let y,k;if("message"in e)y=e.message,k=e.signature;else{const{chain:T,wallet:g,statement:p,options:m}=e;let _;if(Je())if(typeof g=="object")_=g;else{const x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))_=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const S=new URL((n=m==null?void 0:m.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const x=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),p?{statement:p}:null));let P;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")P=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)P=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)y=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),k=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(r=m==null?void 0:m.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((u=m==null?void 0:m.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((d=(c=m==null?void 0:m.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...m.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const x=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=x}}try{const{data:T,error:g}=await z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Yg(k)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:ht});if(g)throw g;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new ks}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:g})}catch(T){if(M(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(e){const n=await Yt(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ht});if(await jt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ks}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(M(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,l=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ht}),{data:a,error:u}=l;return u?{data:{user:null,session:null},error:u}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new ks}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:u})}catch(n){if(M(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:l,options:a}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await yn(this.storage,this.storageKey));const{error:d}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=a==null?void 0:a.data)!==null&&n!==void 0?n:{},create_user:(r=a==null?void 0:a.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:l,options:a}=e,{data:u,error:c}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=a==null?void 0:a.data)!==null&&s!==void 0?s:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Ss("You must provide either an email or phone number.")}catch(l){if(M(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ht});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,u=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(s){if(M(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await yn(this.storage,this.storageKey)),await z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:v0})}catch(i){if(M(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Tt;const{error:s}=await z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(M(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await z(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:l}=await z(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ss("You must provide either an email or phone number and a type")}catch(n){if(M(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Yt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<lo:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Yt(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=co()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(a,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,u,c))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Rt}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Tt}:await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Rt})})}catch(n){if(M(n))return Hg(n)&&(await this._removeSession(),await jt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Tt;const o=s.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await yn(this.storage,this.storageKey));const{data:u,error:c}=await z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Rt});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Tt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=uo(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(M(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Tt;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(M(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Je())throw new xs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new xs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ru("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xs("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ru("No code detected.");const{data:p,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:a,token_type:u}=e;if(!i||!l||!o||!u)throw new xs("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(l);let f=c+d;a&&(f=parseInt(a));const v=f-c;v*1e3<=Sn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${d}s`);const y=f-d;c-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,c):c-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,c);const{data:k,error:T}=await this._getUser(i);if(T)throw T;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(M(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Yt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Bg(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await jt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Zg(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await yn(this.storage,this.storageKey,!0));try{return await z(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(M(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,a,u,c;const{data:d,error:f}=i;if(f)throw f;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await z(this.fetch,"GET",v,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return Je()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(M(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await z(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(M(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await r0(async s=>(s>0&&await n0(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ht})),(s,i)=>{const o=200*Math.pow(2,s);return i&&ao(i)&&Date.now()+o-r<Sn})}catch(r){if(this._debug(n,"error",r),M(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Je()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Yt(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Yt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await xn(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:co()}else if(s&&!s.user&&!s.user){const o=await Yt(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await jt(this.storage,this.storageKey+"-user"),await xn(this.storage,this.storageKey,s)):s.user=co()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<lo;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${lo}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),ao(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Tt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ni;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Tt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),M(i)){const o={session:null,error:i};return ao(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(a){i.push(a)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await xn(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Mu(s);await xn(this.storage,this.storageKey,i)}else{const s=Mu(n);await xn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await jt(this.storage,this.storageKey),await jt(this.storage,this.storageKey+"-code-verifier"),await jt(this.storage,this.storageKey+"-user"),this.userStorage&&await jt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Je()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Sn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Sn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Sn}ms, refresh threshold is ${hl} ticks`),s<=hl&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ph)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Je()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await yn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await z(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(M(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:u}=await z(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=a==null?void 0:a.totp)===null||s===void 0)&&s.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(n){if(M(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(M(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(M(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=uo(s.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const c=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+zg>s)return r;const{data:i,error:o}=await z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:v,error:y}=await this.getSession();if(y||!v.session)return{data:null,error:y};r=v.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:a}}=uo(r);n!=null&&n.allowExpired||c0(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:i,header:s,signature:o},error:null}}const c=d0(s.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,Jg(`${l}.${a}`)))throw new ml("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}}qr.nextInstanceID=0;const T0=qr;class P0 extends T0{constructor(e){super(e)}}var C0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((r=r.apply(t,e||[])).next())})};class N0{constructor(e,n,r){var s,i,o;this.supabaseUrl=e,this.supabaseKey=n;const l=Lg(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const a=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:bg,realtime:Tg,auth:Object.assign(Object.assign({},jg),{storageKey:a}),global:Eg},c=Ag(r??{},u);this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=Og(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new Wm(new URL("rest/v1",l).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new kg(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new xm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return C0(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:l,lock:a,debug:u},c,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new P0({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),c),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:l,lock:a,debug:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new ag(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const O0=(t,e,n)=>new N0(t,e,n);function R0(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}R0()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const yt="https://sxqklqbtonwezyiuszkj.supabase.co",Bn="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4cWtscWJ0b253ZXp5aXVzemtqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1OTMyNjksImV4cCI6MjA3MTE2OTI2OX0.mWR6XETbcTi9u7p7nn_7ALobBnc0wDi8WSogF0MH0fw",Ch=yt.startsWith("https://")&&yt.includes(".supabase.co")&&Bn.length>100;console.log("Supabase設定状況:",{url:`${yt.substring(0,30)}...`,urlValid:yt.startsWith("https://")&&yt.includes(".supabase.co"),key:`${Bn.substring(0,20)}...`,keyValid:Bn.length>100,urlLength:yt.length,keyLength:Bn.length,configured:Ch});const K=Ch?O0(yt,Bn,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"running-video-app"}}}):null,I0=()=>yt.startsWith("https://")?yt.includes(".supabase.co")?Bn.length<100?"VITE_SUPABASE_ANON_KEY appears to be invalid (too short)":null:"VITE_SUPABASE_URL must be a valid Supabase URL (contains .supabase.co)":"VITE_SUPABASE_URL must start with https://",Nh=async()=>{if(!K)throw new Error("Supabase not initialized");const{data:{user:t}}=await K.auth.getUser();if(!t){const e="demo@example.com",n="demo123456";console.log("🔐 Attempting to sign in demo user...");const{data:r,error:s}=await K.auth.signInWithPassword({email:e,password:n});if(s){console.log("👤 Demo user not found, creating new user...");const{data:i,error:o}=await K.auth.signUp({email:e,password:n});if(o){console.log("🔄 Sign up failed, trying sign in again...");const{data:l,error:a}=await K.auth.signInWithPassword({email:e,password:n});if(a)throw console.error("❌ All authentication attempts failed:",a),new Error(`Failed to authenticate: ${a.message}`);return console.log("✅ Demo user signed in on retry"),l.user}return console.log("✅ Demo user created successfully"),i.user}return console.log("✅ Demo user signed in successfully"),r.user}return console.log("✅ User already authenticated:",t.email),t};K?console.log("✅ Supabaseクライアントが正常に初期化されました"):(console.error("❌ Supabaseクライアントが初期化されていません"),console.error("📋 設定手順:"),console.error("1. 画面右上の設定アイコンをクリック"),console.error('2. "Supabase"ボタンをクリック'),console.error("3. プロジェクトURLとAPIキーを入力"),console.error("4. ページをリロード"));const Es={HEEL_STRIKE:{ankleAngle:{min:110,max:180},kneeAngle:{min:165,max:180},shinAngle:{min:75,max:90},description:"ヒールストライク（かかと着地）"},MIDFOOT_STRIKE:{ankleAngle:{min:95,max:115},kneeAngle:{min:150,max:170},shinAngle:{min:85,max:95},description:"ミッドフット着地"},FOREFOOT_STRIKE:{ankleAngle:{min:70,max:100},kneeAngle:{min:130,max:155},shinAngle:{min:90,max:110},description:"フォアフット着地（つま先着地）"}},A0=(t,e,n)=>{let r={heel:0,midfoot:0,forefoot:0};const s=t>=115&&e>=165,i=t<=95&&e<=155;Object.entries(Es).forEach(([d,f])=>{let v=0;if(t>=f.ankleAngle.min&&t<=f.ankleAngle.max)v+=50;else{const y=Math.min(Math.abs(t-f.ankleAngle.min),Math.abs(t-f.ankleAngle.max));v+=Math.max(0,50-y*3)}if(e>=f.kneeAngle.min&&e<=f.kneeAngle.max)v+=30;else{const y=Math.min(Math.abs(e-f.kneeAngle.min),Math.abs(e-f.kneeAngle.max));v+=Math.max(0,30-y*2)}if(n!==void 0)if(n>=f.shinAngle.min&&n<=f.shinAngle.max)v+=20;else{const y=Math.min(Math.abs(n-f.shinAngle.min),Math.abs(n-f.shinAngle.max));v+=Math.max(0,20-y*1.5)}(d==="HEEL_STRIKE"&&s||d==="FOREFOOT_STRIKE"&&i)&&(v+=30),d==="HEEL_STRIKE"?r.heel=v:d==="MIDFOOT_STRIKE"?r.midfoot=v:d==="FOREFOOT_STRIKE"&&(r.forefoot=v)});const o=Math.max(r.heel,r.midfoot,r.forefoot);let l,a,u;r.heel===o?(l=Es.HEEL_STRIKE.description,a="high",u="⚠️ かかと着地は衝撃が大きくなる可能性があります。膝への負荷に注意し、ミッドフット着地への移行を検討しましょう。着地位置を重心に近づけることを意識してください。"):r.midfoot===o?(l=Es.MIDFOOT_STRIKE.description,a="low",u="👍 ミッドフット着地はバランスが良く、衝撃を効率的に分散できます。理想的な着地パターンです。この着地を維持しましょう。"):(l=Es.FOREFOOT_STRIKE.description,a="medium",u="✅ フォアフット着地は衝撃吸収に優れていますが、ふくらはぎとアキレス腱への負荷が高くなります。十分な筋力とストレッチが必要です。");const c=Math.round(Math.min(o,100));return{pattern:l,confidence:c,recommendation:u,riskLevel:a}},L0=(t,e)=>{let n=[];return t.riskLevel==="high"&&(n.push("🎯 着地位置改善: 重心の真下に着地するよう意識"),n.push("📏 歩幅調整: オーバーストライドを避け、自然な歩幅で"),n.push("🏃‍♂️ ケイデンス向上: 180spm以上を目標に")),e>30&&(n.push("⚡ オーバーストライド改善: 歩幅を10-15%短くする"),n.push("🎵 リズム練習: メトロノームを使った一定リズム練習")),t.riskLevel==="medium"&&(n.push("💪 筋力強化: ふくらはぎとアキレス腱のストレッチ"),n.push("🧘‍♀️ 柔軟性向上: 足首の可動域を広げる")),n.length>0?n.join(`
`):"現在の着地パターンを維持してください。"},$0=()=>{const t=Math.floor(Math.random()*30)+60,e=Math.floor(Math.random()*35)+55,n=Math.floor(Math.random()*40)+50,r=Math.round(t*.5+e*.3+n*.2);let s="";return r>=75?s="腕がリラックスしており、効率的な腕振りができています。この状態を維持しましょう。":r>=60?s="腕に軽度の緊張が見られます。肩の力を抜いて、自然な腕振りを心がけましょう。":s="腕に過度の緊張が見られます。肩をリラックスさせ、肘を90度に保ちながら軽く振る練習をしましょう。",{relaxationScore:r,shoulderStability:t,elbowSmoothness:e,handTension:n,feedback:s}},M0=()=>{const t=Math.floor(Math.random()*40)+50,e=Math.floor(Math.random()*35)+55,n=Math.floor(Math.random()*40)+50,r=Math.round(t*.6+e*.25+n*.15),s=t>70;let i="";return s?r>=75?i="股関節主導の理想的な走りができています。効率的な推進力が得られています。":r>=60?i="股関節先行の動きができています。さらに太ももの可動域を広げると効率が向上します。":i="股関節からの動き出しはできていますが、全体的な連動性を高めましょう。":r>=60?i="太ももの可動域と骨盤の動きは良好ですが、動き出しが膝主導になっています。股関節から積極的に動かす意識を持ちましょう。":i="膝主導の走りになっています。股関節から大きく動かし、太ももを前に出す意識を持ちましょう。",{hipDominanceScore:r,isHipDriven:s,hipLeadTime:t,thighMobility:e,pelvicEfficiency:n,feedback:i}},U0=()=>{const t=Math.floor(Math.random()*35)+55,e=Math.floor(Math.random()*40)+50,n=Math.floor(Math.random()*35)+55,r=Math.round(t*.5+e*.3+n*.2),s=t>60&&e>50;let i="";return s?r>=75?i="地面を効率的に押せています。強い推進力が得られており、理想的なフォームです。":r>=60?i="地面を押す動作は良好ですが、より後方への蹴り出しを意識すると推進力が向上します。":i="基本的な押し出しはできていますが、力の方向と効率を改善しましょう。":t<=60?i="後方への蹴り出しが不足しています。地面を押す角度を意識し、より後方へ力を加えましょう。":i="接地時間が長すぎます。素早く地面を押して離れることで推進力が向上します。",{pushEfficiency:r,hasEffectivePush:s,pushAngleQuality:t,contactTimeEfficiency:e,forceDirectionAccuracy:n,feedback:i}},D0=()=>{const t=Math.floor(Math.random()*35)+55,e=Math.floor(Math.random()*40)+50,n=Math.floor(Math.random()*35)+55,r=Math.round(t*.5+e*.35+n*.15),s=t>70&&e>60;let i="";return s?r>=75?i="左右脚の連動が滑らかで、理想的なランニングリズムができています。":r>=60?i="基本的な連動はできています。動作の滑らかさをさらに向上させましょう。":i="連動の基礎はできていますが、全体的な流動性を高めましょう。":t<=70?i="左右脚のタイミングが不安定です。片脚が地面を押すときに、反対側の太ももを前に出す意識を持ちましょう。":i="タイミングは良いですが、反対側の太ももの引き上げが不足しています。膝を高く上げる意識を持ちましょう。",{reciprocalScore:r,isWellCoordinated:s,timingSynchronization:t,thighLiftAngle:e,movementFluidity:n,feedback:i}};function Bu(t,e,n){const r=Math.max(t,e,n);let s;return r>70?s="単一パターン優勢":r>50?s="やや偏り":s="バランス型",t>=70?{type:"フォアフット着地",dominantPercentage:t,balance:s}:e>=n+10?{type:"ミッドフット着地",dominantPercentage:e,balance:s}:{type:"ヒール着地",dominantPercentage:n,balance:s}}const z0=()=>{const[t,e]=$.useState(!1),[n,r]=$.useState(null);return{isAnalyzing:t,analysisResult:n,analyzePose:async o=>{e(!0);try{await new Promise(f=>setTimeout(f,2e3));const l=Math.random()*.6+.2,a=Math.random()*.4+.1,u=1-l-a,c=Bu(l,a,u),d=`着地パターン分析
フォアフット着地: ${Math.round(l*100)}%
ミッドフット着地: ${Math.round(a*100)}%
ヒール着地: ${Math.round(u*100)}%
主要パターン: ${c}`;r(d)}catch(l){console.error("Pose analysis failed:",l),r("分析に失敗しました")}finally{e(!1)}},analyzeVideo:async(o,l)=>{e(!0);try{await new Promise(dt=>setTimeout(dt,3e3));const a=Math.floor(Math.random()*200)+100,u=Math.floor(Math.random()*40)+160,c=Array.from({length:20},()=>Math.random()*.5+1.2),d=Array.from({length:a},()=>Math.random()*60+120),f=Math.random();let v,y,k,T,g,p;f<.7?(v=Math.floor(Math.random()*30)+115,y=Math.floor(Math.random()*15)+165,k=Math.floor(Math.random()*10)+78,p=Math.floor(Math.random()*30)+60,g=Math.floor(Math.random()*20)+5,T=100-p-g):f<.9?(v=Math.floor(Math.random()*18)+97,y=Math.floor(Math.random()*18)+152,k=Math.floor(Math.random()*8)+87,g=Math.floor(Math.random()*30)+50,p=Math.floor(Math.random()*25)+10,T=100-p-g):(v=Math.floor(Math.random()*25)+75,y=Math.floor(Math.random()*23)+132,k=Math.floor(Math.random()*18)+92,T=Math.floor(Math.random()*30)+55,g=Math.floor(Math.random()*20)+10,p=100-T-g);const m=A0(v,y,k),_=Bu(T,g,p),S=Math.floor(Math.random()*80)+70,x=Math.floor(Math.random()*30)+20,P=Math.floor(Math.random()*60)+40,N=Math.floor(Math.random()*30)+15,w=Math.floor(Math.random()*25)+20,E=c.reduce((dt,Qt)=>dt+Qt,0)/c.length,D=Math.floor(Math.random()*30)+70,B=Math.floor(Math.random()*40)+60,q=Math.random()*.2+.05,j=Math.floor(Math.random()*40)+50,U=Math.floor(Math.random()*40)+60,V=Math.floor(Math.random()*30)+70,fe=Math.floor(Math.random()*30)+10,C=L0(m,fe),R=Math.floor(Math.random()*20)+15,I=R+Math.floor(Math.random()*15)+5,A=Math.floor(Math.random()*40)+60,L=$0(),pe=M0(),ce=U0(),Se=D0(),Pe={frame_count:a,cadence:u,analysis_duration:Math.random()*2+1,stride_length:c,stride_analysis:{average_stride:E,stride_consistency:D,stride_efficiency_score:B,stride_variability:q},knee_angles:d,landing_pattern_analysis:{forefoot_landing_percentage:Math.round(T),midfoot_landing_percentage:Math.round(g),heel_landing_percentage:Math.round(p),dominant_pattern:_.type,dominant_percentage:_.dominantPercentage,pattern_balance:_.balance,landing_pattern_score:U,pattern_consistency:V,pattern_description:`${_.type}が主要パターン（${_.dominantPercentage}%）`},foot_strike_analysis:{pattern:m.pattern,confidence:m.confidence,risk_level:m.riskLevel,recommendation:m.recommendation,improvement_plan:C,ankle_angle:v,knee_angle:y,shin_angle:k},landing_analysis:{landing_efficiency_score:j,overstride_percentage:fe},body_stability:{vertical_oscillation:S,horizontal_sway:x,stability_index:P,bounce_ratio:N,lateral_deviation:w},ground_reaction_efficiency:{propulsion_efficiency:Math.floor(Math.random()*30)+20,energy_return_ratio:Math.floor(Math.random()*30)+20,landing_efficiency:j,push_off_power:Math.floor(Math.random()*40)+50,overall_grf_score:Math.floor(Math.random()*30)+30},kick_height:{average_kick_height:R,max_kick_height:I,kick_efficiency_score:A},landing_pattern:{forefoot:Math.round(T),midfoot:Math.round(g),heel:Math.round(p),primary:_.type},arm_relaxation:{relaxation_score:L.relaxationScore,shoulder_stability:L.shoulderStability,elbow_smoothness:L.elbowSmoothness,hand_tension:L.handTension,feedback:L.feedback},hip_dominance:{hip_dominance_score:pe.hipDominanceScore,is_hip_driven:pe.isHipDriven,hip_lead_time:pe.hipLeadTime,thigh_mobility:pe.thighMobility,pelvic_efficiency:pe.pelvicEfficiency,feedback:pe.feedback},ground_push:{push_efficiency:ce.pushEfficiency,has_effective_push:ce.hasEffectivePush,push_angle_quality:ce.pushAngleQuality,contact_time_efficiency:ce.contactTimeEfficiency,force_direction_accuracy:ce.forceDirectionAccuracy,feedback:ce.feedback},reciprocal_movement:{reciprocal_score:Se.reciprocalScore,is_well_coordinated:Se.isWellCoordinated,timing_synchronization:Se.timingSynchronization,thigh_lift_angle:Se.thighLiftAngle,movement_fluidity:Se.movementFluidity,feedback:Se.feedback}},st=`解析結果:
フレーム数: ${a}
ケイデンス: ${u} steps/min
平均歩幅: ${(c.reduce((dt,Qt)=>dt+Qt,0)/c.length).toFixed(3)}m
着地パターン: ${_.type}

詳細解析:
- 着地: ${m.recommendation}
- 腕振り: ${L.feedback}
- 股関節: ${pe.feedback}
- 地面プッシュ: ${ce.feedback}
- 脚の連動: ${Se.feedback}

改善提案:
- ${C}
- ケイデンスを${u<180?"上げて":"下げて"}効率的な走りを目指しましょう`,ns=`Analysis Results:
Frame Count: ${a}
Cadence: ${u} steps/min
Average Stride: ${(c.reduce((dt,Qt)=>dt+Qt,0)/c.length).toFixed(3)}m
Landing Pattern: ${_.type}

Improvement Suggestions:
- ${m.recommendation}
- ${u<180?"Increase":"Decrease"} cadence for more efficient running`,{error:nr}=await K.from("runner_videos").update({pose_data:JSON.stringify(Pe),feedback_ja:st,feedback_en:ns}).eq("id",l);if(nr)throw console.error("Failed to update video with analysis data:",nr),new Error("データベースの更新に失敗しました");return Pe}catch(a){throw console.error("Video analysis failed:",a),a}finally{e(!1)}}}},F0=({videoUrl:t,videoId:e,onAnalysisComplete:n,buttonText:r="姿勢解析開始",buttonStyle:s="primary"})=>{const[i,o]=$.useState(!1),{analyzeVideo:l}=z0(),a=async()=>{console.log("🎯 解析ボタンクリック - 開始"),o(!0);try{console.log("📹 解析対象:",{videoUrl:t,videoId:e,buttonText:r});const c=await l(t,e);console.log("✅ 解析完了 - メトリクス:",c),n&&(console.log("🔄 onAnalysisComplete コールバック実行"),n(c));const d=r.includes("再");console.log("🎉 解析成功 - アラート表示"),alert(`${d?"再":""}解析完了！
      
フレーム数: ${c.frame_count}
ケイデンス: ${c.cadence} steps/min
平均歩幅: ${(c.stride_length.reduce((f,v)=>f+v,0)/c.stride_length.length).toFixed(3)}
膝角度データ: ${c.knee_angles.length}個

${d?"解析データが更新されました。":"データが保存されました。"}`)}catch(c){console.error("❌ 解析エラー詳細:",c);const d=c instanceof Error?c.message:"Unknown error";d.includes("Failed to fetch")||d.includes("Network")?console.warn("⚠️ ネットワークエラーが発生しましたが、解析は継続されます"):alert(`${r}に失敗しました。再度お試しください。`)}finally{console.log("🏁 解析処理終了 - ローディング状態解除"),o(!1)}},u=()=>{if(i)return"bg-gray-400 cursor-not-allowed text-white";switch(s){case"secondary":return"bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-1";case"primary":default:return"bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105 px-6 py-3 text-base font-semibold"}};return h.jsx("button",{onClick:a,disabled:i,className:`flex items-center rounded-lg text-white font-medium transition-all duration-200 ${u()}`,children:i?h.jsxs(h.Fragment,{children:[h.jsx(dm,{size:18,className:"mr-2 animate-spin"}),r.includes("再")?"再解析中...":"解析中..."]}):h.jsxs(h.Fragment,{children:[h.jsx(rh,{size:s==="secondary"?14:18,className:"mr-2"}),r]})})},bs={LEFT_HIP:23,RIGHT_HIP:24,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,NOSE:0,LEFT_EYE:1,RIGHT_EYE:2},B0=1.7,H0=t=>{if(!t||t.length===0)return 100;const e=t[bs.LEFT_SHOULDER],n=t[bs.LEFT_ANKLE];if(!e||!n){const i=t[bs.RIGHT_SHOULDER],o=t[bs.RIGHT_ANKLE];if(!i||!o)return 100;const l=i.x-o.x,a=i.y-o.y;return Math.sqrt(l*l+a*a)}const r=e.x-n.x,s=e.y-n.y;return Math.sqrt(r*r+s*s)},V0=t=>{const e=H0(t);return B0/(e/100)},W0=({videoUrl:t,poseData:e,title:n})=>{const i=$.useRef(null),o=$.useRef(null),[l,a]=$.useState(!1),[u,c]=$.useState(!0),[d,f]=$.useState([]),[v,y]=$.useState(0),[k,T]=$.useState(null),[g,p]=$.useState(1),m=$.useRef();$.useEffect(()=>{if(e)try{const w=JSON.parse(e);if(T(w),w.landmarks){const E=V0(w.landmarks);p(E),console.log("📏 スケール係数算出:",E)}console.log("📊 解析データ読み込み完了:",w)}catch(w){console.error("❌ 解析データの解析に失敗:",w)}},[e]),$.useEffect(()=>{const w=i.current,E=o.current;if(!w||!E)return;const D=E.getContext("2d");if(!D)return;const B=()=>{if(!(!w||!E||!D)){if((E.width!==800||E.height!==600)&&(E.width=800,E.height=600),D.clearRect(0,0,E.width,E.height),D.fillStyle="white",D.fillRect(0,0,E.width,E.height),w.videoWidth>0&&w.videoHeight>0){const U=w.videoWidth/w.videoHeight;let V,fe,C,R;U>800/600?(V=800,fe=800/U,C=0,R=(600-fe)/2):(fe=600,V=600*U,C=(800-V)/2,R=0),console.log("📐 動画フィット計算:",{originalSize:{width:w.videoWidth,height:w.videoHeight},displaySize:{width:800,height:600},drawSize:{width:V,height:fe},offset:{x:C,y:R},aspectRatio:U})}k&&u&&_(D,E.width,E.height,w.currentTime,g),l&&(m.current=requestAnimationFrame(B))}},q=()=>{const U=i.current,V=o.current;!U||!V||(V.width=800,V.height=600,console.log("📹 動画メタデータ読み込み完了 - 固定サイズ設定:",{videoSize:{width:U.videoWidth,height:U.videoHeight},canvasSize:{width:800,height:600}}),B())},j=()=>{const V=Math.floor(w.currentTime*30);y(V),l||B()};return w.addEventListener("loadedmetadata",q),w.addEventListener("timeupdate",j),l&&(m.current=requestAnimationFrame(B)),()=>{w.removeEventListener("loadedmetadata",q),w.removeEventListener("timeupdate",j),m.current&&cancelAnimationFrame(m.current)}},[l,k,u,g]);const _=(w,E,D,B,q)=>{if(!k)return;w.fillStyle="white",w.fillRect(0,0,E,D);const U=Math.floor(B*30);x(w,E,D,U,q),P(w,E,D,U,q)},S=(w,E)=>{var A,L;if(!k)return null;const D=(((A=k.body_stability)==null?void 0:A.vertical_oscillation)||100)*E,B=(((L=k.body_stability)==null?void 0:L.horizontal_sway)||30)*E,q=k.cadence||180,j=w/30,U=q/60/2,V=j*U*2*Math.PI,fe=.5,C=.5,R=fe+Math.sin(V*.7)*(B/2e3)*E,I=C+Math.sin(V*1.4)*(D/3e3)*E;return{x:R,y:I}},x=(w,E,D,B,q)=>{const j=S(B,q);if(!j)return;const U=6,V=15,fe=3,C=j.x*E,R=j.y*D,I={x:C,y:R};if(f(A=>{const L=A[A.length-1];return L&&Math.abs(L.x-C)<1&&Math.abs(L.y-R)<1?A:[...A,I].slice(-150)}),d.length>1){w.beginPath(),w.strokeStyle="rgba(255, 0, 0, 0.9)",w.lineWidth=U,w.lineCap="round",w.lineJoin="round",w.moveTo(d[0].x,d[0].y);for(let A=1;A<d.length;A++)w.lineTo(d[A].x,d[A].y);if(w.stroke(),d.length>20){w.beginPath(),w.strokeStyle="rgba(255, 50, 50, 0.6)",w.lineWidth=U+1;const A=Math.max(0,d.length-30);w.moveTo(d[A].x,d[A].y);for(let L=A+1;L<d.length;L++)w.lineTo(d[L].x,d[L].y);w.stroke()}}if((d.length===0||d.length>0&&(Math.abs(d[d.length-1].x-C)>1||Math.abs(d[d.length-1].y-R)>1))&&d.length>0){const A=d[d.length-1];w.beginPath(),w.strokeStyle="rgba(255, 0, 0, 1.0)",w.lineWidth=U,w.lineCap="round",w.moveTo(A.x,A.y),w.lineTo(C,R),w.stroke()}w.beginPath(),w.arc(C,R,V,0,2*Math.PI),w.fillStyle="rgba(255, 0, 0, 1.0)",w.fill(),w.strokeStyle="black",w.lineWidth=fe,w.stroke()},P=(w,E,D,B,q)=>{if(!k)return;const j=S(B,q);if(!j)return;const U=j.x*E,V=j.y*D,fe=B/30,R=(k.cadence||180)/60/2,I=fe*R*2*Math.PI,A=60,L=45,pe=150,ce=90,Se=12,Pe=3,st=6;console.log("🟢 関節描画 - サイズ定数確認:",{SHOULDER_WIDTH:A,HIP_WIDTH:L,LEG_LENGTH:pe,JOINT_RADIUS:Se,JOINT_BORDER_WIDTH:Pe,SKELETON_LINE_WIDTH:st,baseX:U,baseY:V,frameIndex:B});const ns=I,nr=I+Math.PI,dt=Math.sin(ns)*30,Qt=Math.sin(nr)*30,Oh=Math.sin(ns*1.5)*45,Rh=Math.sin(nr*1.5)*45,ne=[{x:U-A/2,y:V-120,label:"L_SHOULDER"},{x:U+A/2,y:V-120,label:"R_SHOULDER"},{x:U-L/2,y:V-10,label:"L_HIP"},{x:U+L/2,y:V-10,label:"R_HIP"},{x:U-L/2+dt,y:V+ce-10,label:"L_KNEE"},{x:U+L/2+Qt,y:V+ce-10,label:"R_KNEE"},{x:U-L/2+Oh,y:V+pe-10,label:"L_ANKLE"},{x:U+L/2+Rh,y:V+pe-10,label:"R_ANKLE"}];ne.forEach(rr=>{console.log(`🟢 関節描画 - ${rr.label}:`,{x:rr.x,y:rr.y,radius:Se,borderWidth:Pe}),w.beginPath(),w.arc(rr.x,rr.y,Se,0,2*Math.PI),w.fillStyle="rgba(0, 200, 0, 1.0)",w.fill(),w.strokeStyle="black",w.lineWidth=Pe,w.stroke()}),w.strokeStyle="rgba(0, 150, 0, 1.0)",w.lineWidth=st,console.log("🟢 スケルトン線描画:",{strokeStyle:w.strokeStyle,lineWidth:w.lineWidth,SKELETON_LINE_WIDTH:st}),w.beginPath(),w.moveTo(ne[0].x,ne[0].y),w.lineTo(ne[1].x,ne[1].y),w.lineTo(ne[3].x,ne[3].y),w.lineTo(ne[2].x,ne[2].y),w.closePath(),w.stroke(),w.beginPath(),w.moveTo(ne[2].x,ne[2].y),w.lineTo(ne[4].x,ne[4].y),w.lineTo(ne[6].x,ne[6].y),w.stroke(),w.beginPath(),w.moveTo(ne[3].x,ne[3].y),w.lineTo(ne[5].x,ne[5].y),w.lineTo(ne[7].x,ne[7].y),w.stroke(),console.log("🟢 関節描画完了:",{jointsCount:ne.length,frameIndex:B})},N=()=>{const w=i.current;w&&(l?w.pause():w.play(),a(!l))};return h.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 w-full max-w-4xl mx-auto",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"解析結果可視化"}),h.jsx("div",{className:"flex items-center space-x-2",children:h.jsxs("label",{className:"flex items-center text-xs",children:[h.jsx("input",{type:"checkbox",checked:u,onChange:w=>c(w.target.checked),className:"mr-2"}),"重心軌跡表示"]})})]}),h.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden w-full mb-1",children:[h.jsx("video",{ref:i,src:t,className:"w-full h-auto max-h-96 rounded-lg",muted:!0,playsInline:!0,controls:!0,preload:"metadata",crossOrigin:"anonymous",onPlay:()=>a(!0),onPause:()=>a(!1),onError:w=>{console.error("🎥 Analysis video error:",{error:w,url:t,networkState:w.currentTarget.networkState,readyState:w.currentTarget.readyState})},onLoadedMetadata:()=>{console.log("📊 Analysis video metadata loaded:",t)}}),h.jsx("div",{className:"flex justify-center items-center w-full mt-4",children:h.jsx("canvas",{ref:o,className:"bg-white",style:{width:"800px",height:"600px",aspectRatio:"4/3"}})}),h.jsx("div",{className:"absolute bottom-4 left-4 right-4 flex items-center justify-between",children:h.jsx("button",{onClick:N,className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:l?h.jsx(hm,{size:16}):h.jsx(sh,{size:16})})})]}),h.jsx("div",{className:"mt-1 text-xs text-gray-500 leading-tight",children:h.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:[h.jsx("span",{children:"🔴 重心軌跡"}),h.jsx("span",{children:"🟢 関節・スケルトン"})]})})]})},K0=({video:t,onEdit:e,onDelete:n,currentUser:r})=>{const[s,i]=$.useState(!1);$.useState(!1),$.useState(!1),$.useState(1);const[o,l]=$.useState(!1),[a,u]=$.useState(!1),[c,d]=$.useState(null),[f,v]=$.useState(!1),y=t.uploaded_by===r,k=p=>{if(!p)return!1;try{const m=new URL(p);return m.protocol==="http:"||m.protocol==="https:"}catch{return!1}},T=p=>{console.log("Analysis completed for video:",t.id,p)},g=p=>new Date(p).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return h.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden",children:[h.jsx("div",{className:"relative group",children:t.video_file?h.jsx("div",{className:"relative w-full h-48 bg-black rounded-t-xl overflow-hidden",children:k(t.video_file)?h.jsxs(h.Fragment,{children:[!f&&!c&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900",children:h.jsxs("div",{className:"text-center text-white",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),h.jsx("p",{className:"text-sm",children:"動画を読み込み中..."})]})}),h.jsx("video",{src:t.video_file,className:"w-full h-full object-cover",controls:!0,autoPlay:!0,muted:!0,playsInline:!0,preload:"metadata",controlsList:"nodownload",disablePictureInPicture:!1,onPlay:()=>i(!0),onPause:()=>i(!1),onLoadedMetadata:()=>{console.log("✅ Video metadata loaded successfully"),v(!0),d(null)},onCanPlay:()=>{console.log("✅ Video can play"),v(!0),d(null)},onError:p=>{const m=p.currentTarget,_=`Video load failed - Network: ${m.networkState}, Ready: ${m.readyState}, URL: ${t.video_file}`;console.error("❌ Video error:",_),console.error("❌ Video error details:",{src:m.src,currentSrc:m.currentSrc,networkState:m.networkState,readyState:m.readyState,error:m.error}),d(_),v(!1)},onLoadStart:()=>{console.log("🎬 Video loading started"),d(null)},children:h.jsxs("p",{className:"text-red-600 p-4",children:["お使いのブラウザは動画の再生をサポートしていません。",h.jsx("a",{href:t.video_file,target:"_blank",rel:"noopener noreferrer",className:"underline ml-2",children:"動画を直接開く"})]})}),c&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:h.jsxs("div",{className:"text-center p-4 max-w-sm",children:[h.jsx("p",{className:"text-red-600 font-medium mb-2",children:"🎥 動画を読み込めません"}),h.jsx("p",{className:"text-gray-500 text-xs mb-3 break-all",children:t.video_file}),h.jsx("p",{className:"text-red-500 text-xs mb-3",children:c}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("button",{onClick:()=>{window.open(t.video_file,"_blank")},className:"block w-full px-3 py-2 bg-blue-600 text-white text-xs rounded-lg hover:bg-blue-700 transition-colors",children:"🔗 新しいタブで開く"}),h.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t.video_file),alert("URLをクリップボードにコピーしました")},className:"block w-full px-3 py-2 bg-gray-600 text-white text-xs rounded-lg hover:bg-gray-700 transition-colors",children:"📋 URLをコピー"})]})]})})]}):h.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:h.jsxs("div",{className:"text-center p-4",children:[h.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"❌ 無効な動画URL"}),h.jsx("p",{className:"text-gray-500 text-xs break-all",children:t.video_file||"URLが設定されていません"})]})})}):h.jsx("div",{className:"w-full h-48 bg-gray-200 flex items-center justify-center",children:h.jsx(sh,{className:"text-gray-400",size:48})})}),h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-start justify-between mb-4",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 line-clamp-2",children:t.title}),h.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Uploaded by ",t.uploaded_by]}),h.jsx("p",{className:"text-xs text-gray-400",children:g(t.created_at)})]}),y&&h.jsxs("div",{className:"flex space-x-2 ml-4",children:[h.jsx("button",{onClick:()=>e(t),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors duration-200",title:"Edit video",children:h.jsx(cm,{size:16})}),h.jsx("button",{onClick:()=>n(t.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",title:"Delete video",children:h.jsx(mm,{size:16})})]})]}),t.pose_data&&h.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("p",{className:"text-sm font-medium text-green-800",children:"✅ 解析結果"}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx("button",{onClick:()=>u(!a),className:"text-xs text-blue-600 hover:text-blue-800 underline",children:a?"可視化を隠す":"可視化表示"}),h.jsx("button",{onClick:()=>l(!o),className:"text-xs text-green-600 hover:text-green-800 underline",children:o?"詳細を隠す":"詳細を表示"})]})]}),a&&h.jsx("div",{className:"mb-4 w-full",children:h.jsx(W0,{videoUrl:t.video_file,poseData:t.pose_data,title:t.title})}),o&&(()=>{var p,m,_,S,x,P,N,w,E,D,B,q;try{const j=JSON.parse(t.pose_data);return h.jsxs("div",{className:"space-y-3 text-sm",children:[h.jsx("div",{className:"grid grid-cols-2 gap-4",children:h.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[h.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"基本データ"}),h.jsxs("div",{className:"space-y-1 text-xs",children:[h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"平均歩幅:"})," ",(((p=j.stride_analysis)==null?void 0:p.average_stride)||0).toFixed(1),"m"]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"歩幅一貫性:"})," ",((m=j.stride_analysis)==null?void 0:m.stride_consistency)||0,"%"]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"フレーム数:"})," ",j.frame_count||0]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"解析時間:"})," ",(j.analysis_duration||0).toFixed(1),"秒"]})]})]})}),h.jsxs("div",{className:"bg-white p-3 rounded-lg border-l-4 border-blue-500",children:[h.jsxs("h4",{className:"font-medium text-gray-800 mb-2 flex items-center",children:[h.jsx("span",{className:"mr-2",children:"👟"}),"着地パターン分析"]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx("div",{children:h.jsxs("div",{className:"space-y-1 text-xs",children:[h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"フォアフット着地:"})," ",((_=j.landing_pattern)==null?void 0:_.forefoot)||((S=j.landing_pattern_analysis)==null?void 0:S.forefoot_landing_percentage)||0,"%"]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"ミッドフット着地:"})," ",((x=j.landing_pattern)==null?void 0:x.midfoot)||((P=j.landing_pattern_analysis)==null?void 0:P.midfoot_landing_percentage)||0,"%"]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"ヒール着地:"})," ",((N=j.landing_pattern)==null?void 0:N.heel)||((w=j.landing_pattern_analysis)==null?void 0:w.heel_landing_percentage)||0,"%"]})]})}),h.jsx("div",{children:h.jsxs("div",{className:"space-y-1 text-xs",children:[((E=j.landing_pattern_analysis)==null?void 0:E.dominant_percentage)&&h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"優勢度:"})," ",j.landing_pattern_analysis.dominant_percentage,"%"]}),((D=j.landing_pattern_analysis)==null?void 0:D.pattern_balance)&&h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"バランス:"})," ",j.landing_pattern_analysis.pattern_balance]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"主要パターン:"})," ",((B=j.landing_pattern)==null?void 0:B.primary)||((q=j.landing_pattern_analysis)==null?void 0:q.dominant_pattern)||"不明"]})]})})]})]}),j.foot_strike_analysis&&h.jsxs("div",{className:"bg-white p-3 rounded-lg border-l-4 border-orange-500",children:[h.jsxs("h4",{className:"font-medium text-gray-800 mb-2 flex items-center",children:[h.jsx("span",{className:"mr-2",children:"👟"}),"足接地パターン詳細分析"]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[h.jsx("div",{children:h.jsxs("div",{className:"space-y-1 text-xs",children:[h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"着地パターン:"}),h.jsx("span",{className:j.foot_strike_analysis.pattern.includes("ヒール")?"text-red-600 font-bold ml-1":j.foot_strike_analysis.pattern.includes("フォア")?"text-green-600 font-bold ml-1":"text-blue-600 font-bold ml-1",children:j.foot_strike_analysis.pattern})]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"信頼度:"}),h.jsxs("span",{className:j.foot_strike_analysis.confidence>70?"text-green-600 font-bold ml-1":j.foot_strike_analysis.confidence>50?"text-yellow-600 font-bold ml-1":"text-red-600 font-bold ml-1",children:[j.foot_strike_analysis.confidence,"%"]})]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"リスクレベル:"}),h.jsx("span",{className:j.foot_strike_analysis.risk_level==="low"?"text-green-600 font-bold ml-1":j.foot_strike_analysis.risk_level==="medium"?"text-yellow-600 font-bold ml-1":"text-red-600 font-bold ml-1",children:j.foot_strike_analysis.risk_level==="low"?"低":j.foot_strike_analysis.risk_level==="medium"?"中":"高"})]})]})}),h.jsx("div",{children:h.jsxs("div",{className:"space-y-1 text-xs",children:[h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"足首角度:"})," ",j.foot_strike_analysis.ankle_angle,"°"]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"膝角度:"})," ",j.foot_strike_analysis.knee_angle,"°"]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"すね角度:"})," ",j.foot_strike_analysis.shin_angle,"°"]})]})})]}),h.jsxs("div",{className:"text-xs text-gray-700 bg-gray-50 p-2 rounded",children:[h.jsx("p",{className:"font-medium mb-1",children:"💡 改善提案:"}),h.jsx("p",{className:"whitespace-pre-line",children:j.foot_strike_analysis.recommendation})]}),j.foot_strike_analysis.improvement_plan&&h.jsxs("div",{className:"text-xs text-blue-700 bg-blue-50 p-2 rounded mt-2",children:[h.jsx("p",{className:"font-medium mb-1",children:"🎯 具体的改善計画:"}),h.jsx("p",{className:"whitespace-pre-line",children:j.foot_strike_analysis.improvement_plan})]})]}),j.arm_relaxation&&h.jsxs("div",{className:"bg-white p-3 rounded-lg border-l-4 border-purple-500",children:[h.jsxs("h4",{className:"font-medium text-gray-800 mb-2 flex items-center",children:[h.jsx("span",{className:"mr-2",children:"💪"}),"腕のリラックス度"]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[h.jsx("div",{children:h.jsxs("div",{className:"space-y-1 text-xs",children:[h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"総合スコア:"}),h.jsxs("span",{className:"font-bold ml-1",children:[j.arm_relaxation.relaxation_score,"/100"]})]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"肩の安定性:"})," ",j.arm_relaxation.shoulder_stability,"/100"]})]})}),h.jsx("div",{children:h.jsxs("div",{className:"space-y-1 text-xs",children:[h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"肘の滑らかさ:"})," ",j.arm_relaxation.elbow_smoothness,"/100"]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"手の脱力度:"})," ",j.arm_relaxation.hand_tension,"/100"]})]})})]}),h.jsx("div",{className:"text-xs text-gray-700 bg-gray-50 p-2 rounded",children:h.jsx("p",{children:j.arm_relaxation.feedback})})]}),j.hip_dominance&&h.jsxs("div",{className:"bg-white p-3 rounded-lg border-l-4 border-blue-500",children:[h.jsxs("h4",{className:"font-medium text-gray-800 mb-2 flex items-center",children:[h.jsx("span",{className:"mr-2",children:"🦵"}),"股関節主導の動き"]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[h.jsx("div",{children:h.jsxs("div",{className:"space-y-1 text-xs",children:[h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"総合スコア:"}),h.jsxs("span",{className:"font-bold ml-1",children:[j.hip_dominance.hip_dominance_score,"/100"]})]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"股関節先行:"}),h.jsx("span",{className:j.hip_dominance.is_hip_driven?"text-green-600 font-bold ml-1":"text-red-600 font-bold ml-1",children:j.hip_dominance.is_hip_driven?"はい":"いいえ"})]})]})}),h.jsx("div",{children:h.jsxs("div",{className:"space-y-1 text-xs",children:[h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"太もも可動域:"})," ",j.hip_dominance.thigh_mobility,"/100"]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"骨盤効率:"})," ",j.hip_dominance.pelvic_efficiency,"/100"]})]})})]}),h.jsx("div",{className:"text-xs text-gray-700 bg-gray-50 p-2 rounded",children:h.jsx("p",{children:j.hip_dominance.feedback})})]}),j.ground_push&&h.jsxs("div",{className:"bg-white p-3 rounded-lg border-l-4 border-yellow-500",children:[h.jsxs("h4",{className:"font-medium text-gray-800 mb-2 flex items-center",children:[h.jsx("span",{className:"mr-2",children:"⚡"}),"地面を押す動作"]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[h.jsx("div",{children:h.jsxs("div",{className:"space-y-1 text-xs",children:[h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"推進効率:"}),h.jsxs("span",{className:"font-bold ml-1",children:[j.ground_push.push_efficiency,"/100"]})]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"押し出し角度:"})," ",j.ground_push.push_angle_quality,"/100"]})]})}),h.jsx("div",{children:h.jsxs("div",{className:"space-y-1 text-xs",children:[h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"接地時間:"})," ",j.ground_push.contact_time_efficiency,"/100"]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"力の方向:"})," ",j.ground_push.force_direction_accuracy,"/100"]})]})})]}),h.jsx("div",{className:"text-xs text-gray-700 bg-gray-50 p-2 rounded",children:h.jsx("p",{children:j.ground_push.feedback})})]}),j.reciprocal_movement&&h.jsxs("div",{className:"bg-white p-3 rounded-lg border-l-4 border-teal-500",children:[h.jsxs("h4",{className:"font-medium text-gray-800 mb-2 flex items-center",children:[h.jsx("span",{className:"mr-2",children:"🔄"}),"反対側脚の連動"]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[h.jsx("div",{children:h.jsxs("div",{className:"space-y-1 text-xs",children:[h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"連動スコア:"}),h.jsxs("span",{className:"font-bold ml-1",children:[j.reciprocal_movement.reciprocal_score,"/100"]})]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"タイミング同期:"})," ",j.reciprocal_movement.timing_synchronization,"/100"]})]})}),h.jsx("div",{children:h.jsxs("div",{className:"space-y-1 text-xs",children:[h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"太もも挙上:"})," ",j.reciprocal_movement.thigh_lift_angle,"/100"]}),h.jsxs("p",{children:[h.jsx("span",{className:"font-medium",children:"動作の流動性:"})," ",j.reciprocal_movement.movement_fluidity,"/100"]})]})})]}),h.jsx("div",{className:"text-xs text-gray-700 bg-gray-50 p-2 rounded",children:h.jsx("p",{children:j.reciprocal_movement.feedback})})]})]})}catch{return h.jsx("div",{className:"text-red-600 text-sm",children:"解析データの表示中にエラーが発生しました"})}})()]}),h.jsx("div",{className:"flex items-center justify-between",children:h.jsx(F0,{videoId:t.id,videoUrl:t.video_file,onAnalysisComplete:T})})]})]})},q0=()=>{const[t,e]=$.useState(!1),[n,r]=$.useState(""),[s,i]=$.useState(""),[o,l]=$.useState("");return{isUploading:t,uploadedUrl:n,ownerId:s,uploadedPath:o,uploadFile:async u=>{e(!0);try{const c=await G0(u);return c&&(r(c.publicUrl),i(c.ownerId),l(c.ownerId)),c}catch(c){throw c}finally{e(!1)}},setUploadedUrl:r,setOwnerId:i,setUploadedPath:l}},G0=async t=>{if(!K)throw console.error("Supabase not configured"),new Error("SUPABASE_ERROR: Supabaseが設定されていません。");try{console.log("📁 ファイルアップロード開始:",t.name,`(${(t.size/1024/1024).toFixed(2)}MB)`);const e=t.name.split(".").pop(),n=`${Date.now()}-${Math.random().toString(36).substring(2)}.${e}`;console.log("📝 生成されたファイル名:",n),console.log("🔐 アップロード権限確認中...");const{data:r,error:s}=await K.storage.from("videos").upload(n,t,{cacheControl:"3600",upsert:!1});if(s){if(console.error("❌ アップロードエラー:",s),s.message.includes("new row violates row-level security policy"))throw new Error("PERMISSION_ERROR: アップロード権限がありません。認証が必要です。");if(s.message.includes("Bucket not found"))throw new Error("BUCKET_NOT_FOUND: videosバケットが見つかりません。");if(s.message.includes("The resource already exists")){const o=`${Date.now()}-${Math.random().toString(36).substring(2)}-retry.${e}`;console.log("🔄 ファイル名重複のため再試行:",o);const{data:l,error:a}=await K.storage.from("videos").upload(o,t,{cacheControl:"3600",upsert:!1});if(a)throw new Error(`RETRY_FAILED: ${a.message}`);const{data:u}=K.storage.from("videos").getPublicUrl(o);return console.log("✅ アップロード成功（再試行）:",u.publicUrl),{publicUrl:u.publicUrl,ownerId:o}}throw new Error(`UPLOAD_ERROR: ${s.message}`)}console.log("✅ アップロード成功:",r);const{data:i}=K.storage.from("videos").getPublicUrl(n);return console.log("🔗 公開URL生成完了:",i.publicUrl),{publicUrl:i.publicUrl,ownerId:n}}catch(e){throw console.error("❌ ファイルアップロードエラー:",e),e}},Q0=()=>({uploadVideo:async(e,n)=>{try{console.log("🚀 Cloudinaryアップロード開始:",e.name);const r=await Nh();console.log("👤 認証済みユーザー:",r==null?void 0:r.email);const s=new FormData;s.append("file",e),s.append("upload_preset","video_upload");const i=await fetch("https://api.cloudinary.com/v1_1/<your-cloud-name>/video/upload",{method:"POST",body:s});if(!i.ok)throw new Error(`Cloudinary upload failed: ${i.status}`);const o=await i.json();console.log("✅ Cloudinaryアップロード成功:",o.secure_url);const l=o.secure_url,a=o.public_id;console.log("💾 Supabaseにメタ情報登録開始...");const{data:u,error:c}=await K.from("runner_videos").insert([{title:n,uploaded_by:(r==null?void 0:r.email)||"unknown",video_file:l,pose_data:null,feedback_ja:"",feedback_en:""}]).select().single();if(c)throw console.error("❌ Supabase登録エラー:",c),new Error(`Supabase registration failed: ${c.message}`);return console.log("✅ Supabase登録成功:",u),{videoUrl:l,publicId:a,data:u}}catch(r){throw console.error("❌ アップロードエラー:",r),r}}}),J0=({video:t,onSubmit:e,onCancel:n,loading:r=!1})=>{const[s,i]=$.useState({title:(t==null?void 0:t.title)||"",video_file:null,pose_data:(t==null?void 0:t.pose_data)||"",feedback_ja:(t==null?void 0:t.feedback_ja)||"",feedback_en:(t==null?void 0:t.feedback_en)||""}),[o,l]=$.useState(!1),{isUploading:a,uploadedUrl:u,ownerId:c,uploadedPath:d,uploadFile:f,setUploadedUrl:v,setOwnerId:y,setUploadedPath:k}=q0(),{uploadVideo:T}=Q0(),[g,p]=$.useState(!1);$.useEffect(()=>{var w;if(t!=null&&t.video_file){v(t.video_file);const E=((w=t.video_file.split("/").pop())==null?void 0:w.split("?")[0])||"";k(E)}},[t,v,k]);const m=async w=>{var q;const E=(q=w.target.files)==null?void 0:q[0];if(!E)return;if(!["video/mp4","video/mov","video/webm","video/quicktime"].includes(E.type)&&!E.name.match(/\.(mp4|mov|webm)$/i)){alert("サポートされていないファイル形式です。MP4、MOV、WebM形式のファイルを選択してください。");return}const B=100*1024*1024;if(E.size>B){alert("ファイルサイズが大きすぎます。100MB以下のファイルを選択してください。");return}console.log("📁 アップロード開始:",E.name,`(${(E.size/1024/1024).toFixed(2)}MB)`);try{if(g){if(!s.title.trim()){alert("Cloudinaryアップロードにはタイトルが必要です。先にタイトルを入力してください。");return}const j=await T(E,s.title);console.log("✅ Cloudinaryアップロード完了:",j),j&&(v(j.videoUrl),k(j.publicId),i(U=>({...U,video_file:E})),alert("Cloudinaryアップロード成功！Supabaseにも登録されました。"))}else{const j=await f(E);console.log("✅ アップロード完了:",j),j&&(i(U=>({...U,video_file:E})),console.log("📝 フォームデータ更新完了"))}}catch(j){console.error("❌ アップロードエラー:",j);const U=j instanceof Error?j.message:"Unknown error";U.includes("PERMISSION_ERROR")?alert(`❌ アップロード権限エラー

現在のポリシー設定では認証が必要です。
以下のいずれかを実行してください：

【方法1: 認証なしアップロードを許可】
1. Supabaseダッシュボード → Storage → videos → Policies
2. "Allow public uploads" ポリシーを確認
3. Target roles が "public" になっているか確認

【方法2: 認証機能を追加】
アプリケーションにログイン機能を追加する`):U.includes("BUCKET_NOT_FOUND")?alert(`❌ バケットエラー

"videos"バケットが見つかりません。`):U.includes("SUPABASE_ERROR")?alert(`❌ Supabase設定エラー

環境変数を確認してください。`):alert(`❌ アップロードエラー

${U}`)}},_=w=>{if(w.preventDefault(),console.log("Form submission started"),console.log("Current form data:",s),console.log("Uploaded URL:",u),!s.title.trim()){alert("タイトルを入力してください");return}if(!u&&!(t!=null&&t.video_file)){alert("動画ファイルをアップロードするか、動画URLを入力してください");return}const E={...s,video_file_url:u||void 0};console.log("Submitting data:",E),e(E)},S=w=>{const{name:E,value:D}=w.target;i(B=>({...B,[E]:D}))},x=w=>{m(w)},P=w=>{w.preventDefault(),w.stopPropagation(),w.type==="dragenter"||w.type==="dragover"?l(!0):w.type==="dragleave"&&l(!1)},N=w=>{var D,B;w.preventDefault(),w.stopPropagation(),l(!1);const E=(D=w.dataTransfer.files)==null?void 0:D[0];E&&(E.type.includes("video")||["mp4","mov","webm"].includes(((B=E.name.split(".").pop())==null?void 0:B.toLowerCase())||""))&&m({target:{files:[E]}})};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[h.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(ih,{className:"mr-3 text-blue-600",size:24}),h.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t?"Edit Video":"Add New Video"})]}),h.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:h.jsx(vm,{size:24})})]}),h.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Video Title *"}),h.jsx("input",{type:"text",id:"title",name:"title",value:s.title,onChange:S,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",placeholder:"Enter video title..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video Source *"}),h.jsxs("div",{className:"mb-4 flex items-center space-x-4",children:[h.jsxs("label",{className:"flex items-center",children:[h.jsx("input",{type:"radio",name:"uploadMethod",checked:!g,onChange:()=>p(!1),className:"mr-2"}),h.jsx("span",{className:"text-sm",children:"Supabase Storage"})]}),h.jsxs("label",{className:"flex items-center",children:[h.jsx("input",{type:"radio",name:"uploadMethod",checked:g,onChange:()=>p(!0),className:"mr-2"}),h.jsx("span",{className:"text-sm",children:"Cloudinary"})]})]}),h.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 transition-colors duration-200 ${o?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:P,onDragLeave:P,onDragOver:P,onDrop:N,children:[h.jsx("input",{type:"file",id:"video_file",name:"video_file",accept:".mp4,.mov,.webm,video/*",onChange:x,required:!t,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),h.jsxs("div",{className:"text-center",children:[h.jsx(gm,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),h.jsx("div",{className:"text-sm text-gray-600",children:s.video_file?h.jsxs("p",{className:"font-medium text-green-600",children:["Selected: ",s.video_file.name]}):t!=null&&t.video_file?h.jsx("p",{className:"font-medium text-blue-600",children:"Current video uploaded"}):h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"font-medium",children:"Drop your video file here, or click to browse"}),h.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Supports MP4, MOV, WebM formats (",g?"Cloudinary":"Supabase Storage",")"]})]})})]})]})]}),a&&h.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:h.jsxs("p",{className:"text-blue-800 font-medium",children:[g?"Cloudinaryに":"Supabase Storageに","アップロード中です…"]})}),s.video_file&&h.jsx("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:h.jsxs("div",{className:"flex items-center",children:[h.jsx(um,{className:"text-green-600 mr-3",size:20}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-green-800",children:"アップロード準備完了"}),h.jsxs("p",{className:"text-sm text-green-600",children:["ファイル: ",s.video_file.name]}),h.jsxs("p",{className:"text-xs text-green-500 mt-1",children:["サイズ: ",(s.video_file.size/1024/1024).toFixed(2)," MB"]})]})]})}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"pose_data",className:"block text-sm font-medium text-gray-700 mb-2",children:"Pose Analysis Data"}),h.jsx("textarea",{id:"pose_data",name:"pose_data",value:s.pose_data,onChange:S,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",placeholder:"Enter JSON pose data or analysis notes..."})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"feedback_en",className:"block text-sm font-medium text-gray-700 mb-2",children:"Feedback (English)"}),h.jsx("textarea",{id:"feedback_en",name:"feedback_en",value:s.feedback_en,onChange:S,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",placeholder:"Enter feedback in English..."})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"feedback_ja",className:"block text-sm font-medium text-gray-700 mb-2",children:"フィードバック (Japanese)"}),h.jsx("textarea",{id:"feedback_ja",name:"feedback_ja",value:s.feedback_ja,onChange:S,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",placeholder:"日本語でフィードバックを入力..."})]})]}),h.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[h.jsx("button",{type:"button",onClick:n,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),h.jsxs("button",{type:"submit",disabled:r,className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[h.jsx(pm,{size:18,className:"mr-2"}),r?"Saving...":t?"Update Video":"Add Video"]})]})]})]})})},Y0=()=>h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),h.jsx("div",{className:"absolute inset-0 w-12 h-12 border-4 border-transparent border-t-green-500 rounded-full animate-spin animation-delay-150"})]})}),Hu=async t=>{if(!K)throw new Error("Supabase not initialized");try{console.log("Starting file upload:",t.name,t.type,t.size);const{data:e,error:n}=await K.storage.listBuckets();console.log("Available buckets:",e),n&&console.error("Bucket list error:",n);const r=e==null?void 0:e.find(a=>a.name==="videos");if(!r)throw new Error('BUCKET_NOT_FOUND: Storage bucket "videos" not found. Please create a storage bucket named "videos" in your Supabase dashboard under Storage section.');console.log("Videos bucket found:",r);const s=t.name.split(".").pop(),i=`${Date.now()}-${Math.random().toString(36).substring(2)}.${s}`;console.log("Generated filename:",i);const{error:o}=await K.storage.from("videos").upload(i,t,{cacheControl:"3600",upsert:!1});if(o){if(console.error("Upload error:",o),o.message.includes("new row violates row-level security policy"))throw new Error("PERMISSION_ERROR: Upload permission denied. Please check your Supabase storage policies. You may need to create a policy that allows authenticated users to INSERT into the videos bucket.");if(o.message.includes("Bucket not found"))throw new Error('BUCKET_NOT_FOUND: Storage bucket "videos" not found.');if(o.message.includes("The resource already exists")){const a=`${Date.now()}-${Math.random().toString(36).substring(2)}-retry.${s}`,{error:u}=await K.storage.from("videos").upload(a,t,{cacheControl:"3600",upsert:!1});if(u)throw u;const{data:c}=K.storage.from("videos").getPublicUrl(a);return console.log("Upload successful (retry):",c.publicUrl),c.publicUrl}throw o}console.log("Upload successful, getting public URL...");const{data:l}=K.storage.from("videos").getPublicUrl(i);return console.log("Public URL generated:",l.publicUrl),l.publicUrl}catch(e){throw console.error("File upload error:",e),e}},X0=()=>{const[t,e]=$.useState([]),[n,r]=$.useState(!0),[s,i]=$.useState(null),o=async()=>{if(!K){const d=`Supabase Configuration Error: ${I0()||"Unknown configuration issue"}

To fix this:
1. Click the settings icon (⚙️) in the top right corner
2. Click "Supabase" button to connect your database
3. Or manually update your .env file with:
   VITE_SUPABASE_URL=https://your-project.supabase.co
   VITE_SUPABASE_ANON_KEY=your-anon-key
4. Restart the development server`;i(d),r(!1);return}try{r(!0),console.log("📋 動画一覧取得開始...");const{data:c,error:d}=await K.from("runner_videos").select("count").limit(1);if(d)throw console.error("❌ Supabase接続テストエラー:",d),d.message.includes("Failed to fetch")?new Error(`Network Error: Cannot connect to Supabase. Please check:
1. Your internet connection
2. Supabase project URL is correct
3. Supabase project is not paused
4. CORS settings allow your domain`):new Error(`Database Error: ${d.message}. Please check your Supabase configuration and database setup.`);const{data:f,error:v}=await K.from("runner_videos").select("*").order("created_at",{ascending:!1});if(v)throw console.error("❌ 動画一覧取得エラー:",v),v;console.log("✅ 動画一覧取得成功:",(f==null?void 0:f.length)||0,"件"),e(f||[])}catch(c){console.error("❌ fetchVideos エラー:",c);const d=c instanceof Error?c.message:"An error occurred";d.includes("Failed to fetch")?i(`Connection Failed: Cannot reach Supabase servers.

Possible solutions:
1. Check your internet connection
2. Verify Supabase project URL is correct
3. Ensure your Supabase project is active (not paused)
4. Click the settings icon (⚙️) to reconfigure Supabase connection`):i(d)}finally{r(!1)}},l=async c=>{if(!K)throw new Error("Supabase not initialized");try{console.log("Adding video with data:",c);const d=await Nh();console.log("👤 認証済みユーザー:",d==null?void 0:d.id,d==null?void 0:d.email);let f=c.video_file_url||"";c.video_file&&!f?(console.log("No video_file_url provided, uploading file..."),f=await Hu(c.video_file)):f&&console.log("Using existing video_file_url:",f);const v={title:c.title,pose_data:c.pose_data||null,feedback_ja:c.feedback_ja||null,feedback_en:c.feedback_en||null,uploaded_by:(d==null?void 0:d.email)||c.uploaded_by,video_file:f||null};console.log("Inserting data to database:",v);const{data:y,error:k}=await K.from("runner_videos").insert([v]).select().single();if(k)throw console.error("❌ データベース保存エラー詳細:",{message:k.message,details:k.details,hint:k.hint,code:k.code}),k;return console.log("Video added successfully:",y),e(T=>[y,...T]),y}catch(d){console.error("❌ addVideo エラー詳細:",d);const f=d instanceof Error?d.message:"Failed to add video";throw i(f),d}},a=async(c,d)=>{if(!K)throw new Error("Supabase not initialized");try{let f={};if(d.title!==void 0&&(f.title=d.title),d.pose_data!==void 0&&(f.pose_data=d.pose_data),d.feedback_ja!==void 0&&(f.feedback_ja=d.feedback_ja),d.feedback_en!==void 0&&(f.feedback_en=d.feedback_en),d.video_file_url!==void 0&&(f.video_file=d.video_file_url),d.video_file&&d.video_file instanceof File){const k=await Hu(d.video_file);f.video_file=k}const{data:v,error:y}=await K.from("runner_videos").update(f).eq("id",c).select().single();if(y)throw y;return e(k=>k.map(T=>T.id===c?v:T)),v}catch(f){throw i(f instanceof Error?f.message:"Failed to update video"),f}},u=async c=>{if(!K)throw new Error("Supabase not initialized");try{const{error:d}=await K.from("runner_videos").delete().eq("id",c);if(d)throw d;e(f=>f.filter(v=>v.id!==c))}catch(d){throw i(d instanceof Error?d.message:"Failed to delete video"),d}};return $.useEffect(()=>{o()},[]),{videos:t,loading:n,error:s,addVideo:l,updateVideo:a,deleteVideo:u,refetch:o}};function Z0(){const{videos:t,loading:e,error:n,addVideo:r,updateVideo:s,deleteVideo:i}=X0(),[o,l]=$.useState(!1),[a,u]=$.useState(),[c,d]=$.useState(!1),f="demo@example.com",v=()=>{u(void 0),l(!0)},y=p=>{u(p),l(!0)},k=async p=>{d(!0);try{console.log("📤 動画データ送信開始:",p);const m={...p,video_file_url:p.video_file_url||void 0};a?(console.log("✏️ 動画更新モード:",a.id),await s(a.id,m)):(console.log("➕ 新規動画追加モード"),await r({...m,uploaded_by:f})),console.log("✅ 動画保存完了"),l(!1),u(void 0)}catch(m){console.error("❌ 動画保存エラー詳細:",m);let _="An error occurred",S="";if(m instanceof Error&&(_=m.message,console.log("📋 エラーメッセージ:",_),m.message.includes("duplicate key value violates unique constraint")?S="このタイトルは既に使用されています。別のタイトルを入力してください。":m.message.includes("violates not-null constraint")?S="必須項目が入力されていません。タイトルを入力してください。":m.message.includes("permission denied")?S="データベースへの書き込み権限がありません。":S=`保存エラー: ${_}`),_.includes("PERMISSION_ERROR")){const x=_.replace("PERMISSION_ERROR: ","");alert(`Storage Permission Error:

${x}

Steps to fix:
1. Go to your Supabase dashboard
2. Navigate to Storage section
3. Click on the "videos" bucket
4. Go to "Policies" tab
5. Create a new policy:
   - Policy name: "Allow authenticated uploads"
   - Allowed operation: INSERT
   - Target roles: authenticated
   - Policy definition: true

Or create this SQL policy:
CREATE POLICY "Allow authenticated uploads" ON storage.objects FOR INSERT TO authenticated WITH CHECK (bucket_id = 'videos');`)}else if(_.includes("BUCKET_NOT_FOUND")){const x=_.replace("BUCKET_NOT_FOUND: ","");alert(`Storage Setup Required:

${x}

Steps to fix:
1. Go to your Supabase dashboard
2. Navigate to Storage section
3. Click "New bucket"
4. Create a bucket named "videos"
5. Make the bucket PUBLIC
6. Create upload policies for authenticated users`)}else alert(`動画保存エラー:

${S}

詳細: ${_}`)}finally{d(!1)}},T=async p=>{window.confirm("Are you sure you want to delete this video?")&&await i(p)},g=()=>{l(!1),u(void 0)};return e?h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[h.jsx(ro,{onAddVideo:v,videoCount:0}),h.jsx(Y0,{})]}):n?h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[h.jsx(ro,{onAddVideo:v,videoCount:0}),h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"}),h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:h.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 flex items-center",children:[h.jsx(Eu,{className:"text-red-600 mr-3",size:24}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-red-800",children:"Connection Error"}),h.jsxs("p",{className:"text-red-600",children:[n,". Please make sure Supabase is properly configured."]}),h.jsx("p",{className:"text-sm text-red-500 mt-2",children:'Click "Connect to Supabase" in the top right to set up your database connection.'})]})]})})]}):h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[h.jsx(ro,{onAddVideo:v,videoCount:t.length}),h.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.length===0?h.jsx("div",{className:"text-center py-12",children:h.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 max-w-md mx-auto",children:[h.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:h.jsx(Eu,{className:"text-blue-600",size:40})}),h.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No videos yet"}),h.jsx("p",{className:"text-gray-600 mb-6",children:"Start by adding your first running video for analysis"}),h.jsx("button",{onClick:v,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors duration-200",children:"Add Your First Video"})]})}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(p=>h.jsx(K0,{video:p,onEdit:y,onDelete:T,currentUser:f},p.id))})}),o&&h.jsx(J0,{video:a,onSubmit:k,onCancel:g,loading:c})]})}nh(document.getElementById("root")).render(h.jsx($.StrictMode,{children:h.jsx(Z0,{})}));
