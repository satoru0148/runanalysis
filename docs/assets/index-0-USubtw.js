(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var ph={exports:{}},jo={},mh={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yi=Symbol.for("react.element"),qm=Symbol.for("react.portal"),Ym=Symbol.for("react.fragment"),Qm=Symbol.for("react.strict_mode"),Jm=Symbol.for("react.profiler"),Xm=Symbol.for("react.provider"),Zm=Symbol.for("react.context"),eg=Symbol.for("react.forward_ref"),tg=Symbol.for("react.suspense"),ng=Symbol.for("react.memo"),rg=Symbol.for("react.lazy"),Mc=Symbol.iterator;function ig(t){return t===null||typeof t!="object"?null:(t=Mc&&t[Mc]||t["@@iterator"],typeof t=="function"?t:null)}var gh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vh=Object.assign,yh={};function Wr(t,e,n){this.props=t,this.context=e,this.refs=yh,this.updater=n||gh}Wr.prototype.isReactComponent={};Wr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wh(){}wh.prototype=Wr.prototype;function Xa(t,e,n){this.props=t,this.context=e,this.refs=yh,this.updater=n||gh}var Za=Xa.prototype=new wh;Za.constructor=Xa;vh(Za,Wr.prototype);Za.isPureReactComponent=!0;var Dc=Array.isArray,_h=Object.prototype.hasOwnProperty,eu={current:null},xh={key:!0,ref:!0,__self:!0,__source:!0};function kh(t,e,n){var r,i={},s=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(s=""+e.key),e)_h.call(e,r)&&!xh.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),f=0;f<u;f++)c[f]=arguments[f+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Yi,type:t,key:s,ref:l,props:i,_owner:eu.current}}function sg(t,e){return{$$typeof:Yi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yi}function og(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fc=/\/+/g;function pl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?og(""+t.key):e.toString(36)}function zs(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Yi:case qm:l=!0}}if(l)return l=t,i=i(l),t=r===""?"."+pl(l,0):r,Dc(i)?(n="",t!=null&&(n=t.replace(Fc,"$&/")+"/"),zs(i,e,n,"",function(f){return f})):i!=null&&(tu(i)&&(i=sg(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Fc,"$&/")+"/")+t)),e.push(i)),1;if(l=0,r=r===""?".":r+":",Dc(t))for(var u=0;u<t.length;u++){s=t[u];var c=r+pl(s,u);l+=zs(s,e,n,c,i)}else if(c=ig(t),typeof c=="function")for(t=c.call(t),u=0;!(s=t.next()).done;)s=s.value,c=r+pl(s,u++),l+=zs(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function ys(t,e,n){if(t==null)return t;var r=[],i=0;return zs(t,r,"","",function(s){return e.call(n,s,i++)}),r}function lg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ze={current:null},Hs={transition:null},ag={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:Hs,ReactCurrentOwner:eu};function Sh(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:ys,forEach:function(t,e,n){ys(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ys(t,function(){e++}),e},toArray:function(t){return ys(t,function(e){return e})||[]},only:function(t){if(!tu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=Wr;oe.Fragment=Ym;oe.Profiler=Jm;oe.PureComponent=Xa;oe.StrictMode=Qm;oe.Suspense=tg;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ag;oe.act=Sh;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=vh({},t.props),i=t.key,s=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,l=eu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)_h.call(e,c)&&!xh.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var f=0;f<c;f++)u[f]=arguments[f+2];r.children=u}return{$$typeof:Yi,type:t.type,key:i,ref:s,props:r,_owner:l}};oe.createContext=function(t){return t={$$typeof:Zm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Xm,_context:t},t.Consumer=t};oe.createElement=kh;oe.createFactory=function(t){var e=kh.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:eg,render:t}};oe.isValidElement=tu;oe.lazy=function(t){return{$$typeof:rg,_payload:{_status:-1,_result:t},_init:lg}};oe.memo=function(t,e){return{$$typeof:ng,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Hs.transition;Hs.transition={};try{t()}finally{Hs.transition=e}};oe.unstable_act=Sh;oe.useCallback=function(t,e){return Ze.current.useCallback(t,e)};oe.useContext=function(t){return Ze.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return Ze.current.useDeferredValue(t)};oe.useEffect=function(t,e){return Ze.current.useEffect(t,e)};oe.useId=function(){return Ze.current.useId()};oe.useImperativeHandle=function(t,e,n){return Ze.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return Ze.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return Ze.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return Ze.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return Ze.current.useReducer(t,e,n)};oe.useRef=function(t){return Ze.current.useRef(t)};oe.useState=function(t){return Ze.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return Ze.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return Ze.current.useTransition()};oe.version="18.3.1";mh.exports=oe;var ee=mh.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug=ee,cg=Symbol.for("react.element"),dg=Symbol.for("react.fragment"),hg=Object.prototype.hasOwnProperty,fg=ug.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pg={key:!0,ref:!0,__self:!0,__source:!0};function Eh(t,e,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)hg.call(e,r)&&!pg.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:cg,type:t,key:s,ref:l,props:i,_owner:fg.current}}jo.Fragment=dg;jo.jsx=Eh;jo.jsxs=Eh;ph.exports=jo;var g=ph.exports,bh={exports:{}},mt={},jh={exports:{}},Th={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,W){var q=F.length;F.push(W);e:for(;0<q;){var Y=q-1>>>1,Z=F[Y];if(0<i(Z,W))F[Y]=W,F[q]=Z,q=Y;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var W=F[0],q=F.pop();if(q!==W){F[0]=q;e:for(var Y=0,Z=F.length,qe=Z>>>1;Y<qe;){var ze=2*(Y+1)-1,vt=F[ze],He=ze+1,ct=F[He];if(0>i(vt,q))He<Z&&0>i(ct,vt)?(F[Y]=ct,F[He]=q,Y=He):(F[Y]=vt,F[ze]=q,Y=ze);else if(He<Z&&0>i(ct,q))F[Y]=ct,F[He]=q,Y=He;else break e}}return W}function i(F,W){var q=F.sortIndex-W.sortIndex;return q!==0?q:F.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var c=[],f=[],p=1,m=null,y=3,b=!1,P=!1,C=!1,U=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(F){for(var W=n(f);W!==null;){if(W.callback===null)r(f);else if(W.startTime<=F)r(f),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(f)}}function j(F){if(C=!1,k(F),!P)if(n(c)!==null)P=!0,le(O);else{var W=n(f);W!==null&&Ae(j,W.startTime-F)}}function O(F,W){P=!1,C&&(C=!1,S(D),D=-1),b=!0;var q=y;try{for(k(W),m=n(c);m!==null&&(!(m.expirationTime>W)||F&&!K());){var Y=m.callback;if(typeof Y=="function"){m.callback=null,y=m.priorityLevel;var Z=Y(m.expirationTime<=W);W=t.unstable_now(),typeof Z=="function"?m.callback=Z:m===n(c)&&r(c),k(W)}else r(c);m=n(c)}if(m!==null)var qe=!0;else{var ze=n(f);ze!==null&&Ae(j,ze.startTime-W),qe=!1}return qe}finally{m=null,y=q,b=!1}}var R=!1,A=null,D=-1,T=5,L=-1;function K(){return!(t.unstable_now()-L<T)}function re(){if(A!==null){var F=t.unstable_now();L=F;var W=!0;try{W=A(!0,F)}finally{W?te():(R=!1,A=null)}}else R=!1}var te;if(typeof w=="function")te=function(){w(re)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,G=M.port2;M.port1.onmessage=re,te=function(){G.postMessage(null)}}else te=function(){U(re,0)};function le(F){A=F,R||(R=!0,te())}function Ae(F,W){D=U(function(){F(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){P||b||(P=!0,le(O))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var q=y;y=W;try{return F()}finally{y=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,W){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var q=y;y=F;try{return W()}finally{y=q}},t.unstable_scheduleCallback=function(F,W,q){var Y=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Y+q:Y):q=Y,F){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=q+Z,F={id:p++,callback:W,priorityLevel:F,startTime:q,expirationTime:Z,sortIndex:-1},q>Y?(F.sortIndex=q,e(f,F),n(c)===null&&F===n(f)&&(C?(S(D),D=-1):C=!0,Ae(j,q-Y))):(F.sortIndex=Z,e(c,F),P||b||(P=!0,le(O))),F},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(F){var W=y;return function(){var q=y;y=W;try{return F.apply(this,arguments)}finally{y=q}}}})(Th);jh.exports=Th;var mg=jh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gg=ee,pt=mg;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ph=new Set,Oi={};function rr(t,e){Ur(t,e),Ur(t+"Capture",e)}function Ur(t,e){for(Oi[t]=e,t=0;t<e.length;t++)Ph.add(e[t])}var rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yl=Object.prototype.hasOwnProperty,vg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zc={},Hc={};function yg(t){return Yl.call(Hc,t)?!0:Yl.call(zc,t)?!1:vg.test(t)?Hc[t]=!0:(zc[t]=!0,!1)}function wg(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _g(t,e,n,r){if(e===null||typeof e>"u"||wg(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function et(t,e,n,r,i,s,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=l}var Fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Fe[t]=new et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Fe[e]=new et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Fe[t]=new et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Fe[t]=new et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Fe[t]=new et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Fe[t]=new et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Fe[t]=new et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Fe[t]=new et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Fe[t]=new et(t,5,!1,t.toLowerCase(),null,!1,!1)});var nu=/[\-:]([a-z])/g;function ru(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nu,ru);Fe[e]=new et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nu,ru);Fe[e]=new et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nu,ru);Fe[e]=new et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Fe[t]=new et(t,1,!1,t.toLowerCase(),null,!1,!1)});Fe.xlinkHref=new et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Fe[t]=new et(t,1,!1,t.toLowerCase(),null,!0,!0)});function iu(t,e,n,r){var i=Fe.hasOwnProperty(e)?Fe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_g(e,n,i,r)&&(n=null),r||i===null?yg(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var an=gg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ws=Symbol.for("react.element"),vr=Symbol.for("react.portal"),yr=Symbol.for("react.fragment"),su=Symbol.for("react.strict_mode"),Ql=Symbol.for("react.profiler"),Nh=Symbol.for("react.provider"),Ch=Symbol.for("react.context"),ou=Symbol.for("react.forward_ref"),Jl=Symbol.for("react.suspense"),Xl=Symbol.for("react.suspense_list"),lu=Symbol.for("react.memo"),mn=Symbol.for("react.lazy"),Oh=Symbol.for("react.offscreen"),Bc=Symbol.iterator;function si(t){return t===null||typeof t!="object"?null:(t=Bc&&t[Bc]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,ml;function pi(t){if(ml===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ml=e&&e[1]||""}return`
`+ml+t}var gl=!1;function vl(t,e){if(!t||gl)return"";gl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,u=s.length-1;1<=l&&0<=u&&i[l]!==s[u];)u--;for(;1<=l&&0<=u;l--,u--)if(i[l]!==s[u]){if(l!==1||u!==1)do if(l--,u--,0>u||i[l]!==s[u]){var c=`
`+i[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=u);break}}}finally{gl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?pi(t):""}function xg(t){switch(t.tag){case 5:return pi(t.type);case 16:return pi("Lazy");case 13:return pi("Suspense");case 19:return pi("SuspenseList");case 0:case 2:case 15:return t=vl(t.type,!1),t;case 11:return t=vl(t.type.render,!1),t;case 1:return t=vl(t.type,!0),t;default:return""}}function Zl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yr:return"Fragment";case vr:return"Portal";case Ql:return"Profiler";case su:return"StrictMode";case Jl:return"Suspense";case Xl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ch:return(t.displayName||"Context")+".Consumer";case Nh:return(t._context.displayName||"Context")+".Provider";case ou:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lu:return e=t.displayName||null,e!==null?e:Zl(t.type)||"Memo";case mn:e=t._payload,t=t._init;try{return Zl(t(e))}catch{}}return null}function kg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zl(e);case 8:return e===su?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ah(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Sg(t){var e=Ah(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _s(t){t._valueTracker||(t._valueTracker=Sg(t))}function Rh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ah(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ea(t,e){var n=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ih(t,e){e=e.checked,e!=null&&iu(t,"checked",e,!1)}function ta(t,e){Ih(t,e);var n=Cn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?na(t,e.type,n):e.hasOwnProperty("defaultValue")&&na(t,e.type,Cn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function na(t,e,n){(e!=="number"||Zs(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var mi=Array.isArray;function Nr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ra(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(mi(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cn(n)}}function Lh(t,e){var n=Cn(e.value),r=Cn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Uh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ia(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Uh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xs,$h=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xs=xs||document.createElement("div"),xs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ai(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Eg=["Webkit","ms","Moz","O"];Object.keys(wi).forEach(function(t){Eg.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wi[e]=wi[t]})});function Mh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wi.hasOwnProperty(t)&&wi[t]?(""+e).trim():e+"px"}function Dh(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Mh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var bg=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sa(t,e){if(e){if(bg[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function oa(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var la=null;function au(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var aa=null,Cr=null,Or=null;function qc(t){if(t=Xi(t)){if(typeof aa!="function")throw Error($(280));var e=t.stateNode;e&&(e=Oo(e),aa(t.stateNode,t.type,e))}}function Fh(t){Cr?Or?Or.push(t):Or=[t]:Cr=t}function zh(){if(Cr){var t=Cr,e=Or;if(Or=Cr=null,qc(t),e)for(t=0;t<e.length;t++)qc(e[t])}}function Hh(t,e){return t(e)}function Bh(){}var yl=!1;function Wh(t,e,n){if(yl)return t(e,n);yl=!0;try{return Hh(t,e,n)}finally{yl=!1,(Cr!==null||Or!==null)&&(Bh(),zh())}}function Ri(t,e){var n=t.stateNode;if(n===null)return null;var r=Oo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var ua=!1;if(rn)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){ua=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{ua=!1}function jg(t,e,n,r,i,s,l,u,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(p){this.onError(p)}}var _i=!1,eo=null,to=!1,ca=null,Tg={onError:function(t){_i=!0,eo=t}};function Pg(t,e,n,r,i,s,l,u,c){_i=!1,eo=null,jg.apply(Tg,arguments)}function Ng(t,e,n,r,i,s,l,u,c){if(Pg.apply(this,arguments),_i){if(_i){var f=eo;_i=!1,eo=null}else throw Error($(198));to||(to=!0,ca=f)}}function ir(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yc(t){if(ir(t)!==t)throw Error($(188))}function Cg(t){var e=t.alternate;if(!e){if(e=ir(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Yc(i),t;if(s===r)return Yc(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,u=i.child;u;){if(u===n){l=!0,n=i,r=s;break}if(u===r){l=!0,r=i,n=s;break}u=u.sibling}if(!l){for(u=s.child;u;){if(u===n){l=!0,n=s,r=i;break}if(u===r){l=!0,r=s,n=i;break}u=u.sibling}if(!l)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function Kh(t){return t=Cg(t),t!==null?Gh(t):null}function Gh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gh(t);if(e!==null)return e;t=t.sibling}return null}var qh=pt.unstable_scheduleCallback,Qc=pt.unstable_cancelCallback,Og=pt.unstable_shouldYield,Ag=pt.unstable_requestPaint,be=pt.unstable_now,Rg=pt.unstable_getCurrentPriorityLevel,uu=pt.unstable_ImmediatePriority,Yh=pt.unstable_UserBlockingPriority,no=pt.unstable_NormalPriority,Ig=pt.unstable_LowPriority,Qh=pt.unstable_IdlePriority,To=null,Vt=null;function Lg(t){if(Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(To,t,void 0,(t.current.flags&128)===128)}catch{}}var Rt=Math.clz32?Math.clz32:Mg,Ug=Math.log,$g=Math.LN2;function Mg(t){return t>>>=0,t===0?32:31-(Ug(t)/$g|0)|0}var ks=64,Ss=4194304;function gi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ro(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,l=n&268435455;if(l!==0){var u=l&~i;u!==0?r=gi(u):(s&=l,s!==0&&(r=gi(s)))}else l=n&~i,l!==0?r=gi(l):s!==0&&(r=gi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Rt(e),i=1<<n,r|=t[n],e&=~i;return r}function Dg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fg(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-Rt(s),u=1<<l,c=i[l];c===-1?(!(u&n)||u&r)&&(i[l]=Dg(u,e)):c<=e&&(t.expiredLanes|=u),s&=~u}}function da(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jh(){var t=ks;return ks<<=1,!(ks&4194240)&&(ks=64),t}function wl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rt(e),t[e]=n}function zg(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Rt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function cu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Rt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var de=0;function Xh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zh,du,ef,tf,nf,ha=!1,Es=[],kn=null,Sn=null,En=null,Ii=new Map,Li=new Map,vn=[],Hg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jc(t,e){switch(t){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":Ii.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(e.pointerId)}}function li(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Xi(e),e!==null&&du(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Bg(t,e,n,r,i){switch(e){case"focusin":return kn=li(kn,t,e,n,r,i),!0;case"dragenter":return Sn=li(Sn,t,e,n,r,i),!0;case"mouseover":return En=li(En,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ii.set(s,li(Ii.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Li.set(s,li(Li.get(s)||null,t,e,n,r,i)),!0}return!1}function rf(t){var e=Gn(t.target);if(e!==null){var n=ir(e);if(n!==null){if(e=n.tag,e===13){if(e=Vh(n),e!==null){t.blockedOn=e,nf(t.priority,function(){ef(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fa(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);la=r,n.target.dispatchEvent(r),la=null}else return e=Xi(n),e!==null&&du(e),t.blockedOn=n,!1;e.shift()}return!0}function Xc(t,e,n){Bs(t)&&n.delete(e)}function Wg(){ha=!1,kn!==null&&Bs(kn)&&(kn=null),Sn!==null&&Bs(Sn)&&(Sn=null),En!==null&&Bs(En)&&(En=null),Ii.forEach(Xc),Li.forEach(Xc)}function ai(t,e){t.blockedOn===e&&(t.blockedOn=null,ha||(ha=!0,pt.unstable_scheduleCallback(pt.unstable_NormalPriority,Wg)))}function Ui(t){function e(i){return ai(i,t)}if(0<Es.length){ai(Es[0],t);for(var n=1;n<Es.length;n++){var r=Es[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kn!==null&&ai(kn,t),Sn!==null&&ai(Sn,t),En!==null&&ai(En,t),Ii.forEach(e),Li.forEach(e),n=0;n<vn.length;n++)r=vn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vn.length&&(n=vn[0],n.blockedOn===null);)rf(n),n.blockedOn===null&&vn.shift()}var Ar=an.ReactCurrentBatchConfig,io=!0;function Vg(t,e,n,r){var i=de,s=Ar.transition;Ar.transition=null;try{de=1,hu(t,e,n,r)}finally{de=i,Ar.transition=s}}function Kg(t,e,n,r){var i=de,s=Ar.transition;Ar.transition=null;try{de=4,hu(t,e,n,r)}finally{de=i,Ar.transition=s}}function hu(t,e,n,r){if(io){var i=fa(t,e,n,r);if(i===null)Nl(t,e,r,so,n),Jc(t,r);else if(Bg(i,t,e,n,r))r.stopPropagation();else if(Jc(t,r),e&4&&-1<Hg.indexOf(t)){for(;i!==null;){var s=Xi(i);if(s!==null&&Zh(s),s=fa(t,e,n,r),s===null&&Nl(t,e,r,so,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Nl(t,e,r,null,n)}}var so=null;function fa(t,e,n,r){if(so=null,t=au(r),t=Gn(t),t!==null)if(e=ir(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vh(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return so=t,null}function sf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rg()){case uu:return 1;case Yh:return 4;case no:case Ig:return 16;case Qh:return 536870912;default:return 16}default:return 16}}var _n=null,fu=null,Ws=null;function of(){if(Ws)return Ws;var t,e=fu,n=e.length,r,i="value"in _n?_n.value:_n.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===i[s-r];r++);return Ws=i.slice(t,1<r?1-r:void 0)}function Vs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bs(){return!0}function Zc(){return!1}function gt(t){function e(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?bs:Zc,this.isPropagationStopped=Zc,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bs)},persist:function(){},isPersistent:bs}),e}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pu=gt(Vr),Ji=ke({},Vr,{view:0,detail:0}),Gg=gt(Ji),_l,xl,ui,Po=ke({},Ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ui&&(ui&&t.type==="mousemove"?(_l=t.screenX-ui.screenX,xl=t.screenY-ui.screenY):xl=_l=0,ui=t),_l)},movementY:function(t){return"movementY"in t?t.movementY:xl}}),ed=gt(Po),qg=ke({},Po,{dataTransfer:0}),Yg=gt(qg),Qg=ke({},Ji,{relatedTarget:0}),kl=gt(Qg),Jg=ke({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),Xg=gt(Jg),Zg=ke({},Vr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),e0=gt(Zg),t0=ke({},Vr,{data:0}),td=gt(t0),n0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},i0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=i0[t])?!!e[t]:!1}function mu(){return s0}var o0=ke({},Ji,{key:function(t){if(t.key){var e=n0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?r0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mu,charCode:function(t){return t.type==="keypress"?Vs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),l0=gt(o0),a0=ke({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nd=gt(a0),u0=ke({},Ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mu}),c0=gt(u0),d0=ke({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),h0=gt(d0),f0=ke({},Po,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),p0=gt(f0),m0=[9,13,27,32],gu=rn&&"CompositionEvent"in window,xi=null;rn&&"documentMode"in document&&(xi=document.documentMode);var g0=rn&&"TextEvent"in window&&!xi,lf=rn&&(!gu||xi&&8<xi&&11>=xi),rd=" ",id=!1;function af(t,e){switch(t){case"keyup":return m0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wr=!1;function v0(t,e){switch(t){case"compositionend":return uf(e);case"keypress":return e.which!==32?null:(id=!0,rd);case"textInput":return t=e.data,t===rd&&id?null:t;default:return null}}function y0(t,e){if(wr)return t==="compositionend"||!gu&&af(t,e)?(t=of(),Ws=fu=_n=null,wr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lf&&e.locale!=="ko"?null:e.data;default:return null}}var w0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!w0[t.type]:e==="textarea"}function cf(t,e,n,r){Fh(r),e=oo(e,"onChange"),0<e.length&&(n=new pu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ki=null,$i=null;function _0(t){xf(t,0)}function No(t){var e=kr(t);if(Rh(e))return t}function x0(t,e){if(t==="change")return e}var df=!1;if(rn){var Sl;if(rn){var El="oninput"in document;if(!El){var od=document.createElement("div");od.setAttribute("oninput","return;"),El=typeof od.oninput=="function"}Sl=El}else Sl=!1;df=Sl&&(!document.documentMode||9<document.documentMode)}function ld(){ki&&(ki.detachEvent("onpropertychange",hf),$i=ki=null)}function hf(t){if(t.propertyName==="value"&&No($i)){var e=[];cf(e,$i,t,au(t)),Wh(_0,e)}}function k0(t,e,n){t==="focusin"?(ld(),ki=e,$i=n,ki.attachEvent("onpropertychange",hf)):t==="focusout"&&ld()}function S0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return No($i)}function E0(t,e){if(t==="click")return No(e)}function b0(t,e){if(t==="input"||t==="change")return No(e)}function j0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Lt=typeof Object.is=="function"?Object.is:j0;function Mi(t,e){if(Lt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Yl.call(e,i)||!Lt(t[i],e[i]))return!1}return!0}function ad(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ud(t,e){var n=ad(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ad(n)}}function ff(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ff(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pf(){for(var t=window,e=Zs();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zs(t.document)}return e}function vu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function T0(t){var e=pf(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ff(n.ownerDocument.documentElement,n)){if(r!==null&&vu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ud(n,s);var l=ud(n,r);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var P0=rn&&"documentMode"in document&&11>=document.documentMode,_r=null,pa=null,Si=null,ma=!1;function cd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ma||_r==null||_r!==Zs(r)||(r=_r,"selectionStart"in r&&vu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Si&&Mi(Si,r)||(Si=r,r=oo(pa,"onSelect"),0<r.length&&(e=new pu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_r)))}function js(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xr={animationend:js("Animation","AnimationEnd"),animationiteration:js("Animation","AnimationIteration"),animationstart:js("Animation","AnimationStart"),transitionend:js("Transition","TransitionEnd")},bl={},mf={};rn&&(mf=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);function Co(t){if(bl[t])return bl[t];if(!xr[t])return t;var e=xr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mf)return bl[t]=e[n];return t}var gf=Co("animationend"),vf=Co("animationiteration"),yf=Co("animationstart"),wf=Co("transitionend"),_f=new Map,dd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(t,e){_f.set(t,e),rr(e,[t])}for(var jl=0;jl<dd.length;jl++){var Tl=dd[jl],N0=Tl.toLowerCase(),C0=Tl[0].toUpperCase()+Tl.slice(1);An(N0,"on"+C0)}An(gf,"onAnimationEnd");An(vf,"onAnimationIteration");An(yf,"onAnimationStart");An("dblclick","onDoubleClick");An("focusin","onFocus");An("focusout","onBlur");An(wf,"onTransitionEnd");Ur("onMouseEnter",["mouseout","mouseover"]);Ur("onMouseLeave",["mouseout","mouseover"]);Ur("onPointerEnter",["pointerout","pointerover"]);Ur("onPointerLeave",["pointerout","pointerover"]);rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rr("onBeforeInput",["compositionend","keypress","textInput","paste"]);rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O0=new Set("cancel close invalid load scroll toggle".split(" ").concat(vi));function hd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Ng(r,e,void 0,t),t.currentTarget=null}function xf(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var l=r.length-1;0<=l;l--){var u=r[l],c=u.instance,f=u.currentTarget;if(u=u.listener,c!==s&&i.isPropagationStopped())break e;hd(i,u,f),s=c}else for(l=0;l<r.length;l++){if(u=r[l],c=u.instance,f=u.currentTarget,u=u.listener,c!==s&&i.isPropagationStopped())break e;hd(i,u,f),s=c}}}if(to)throw t=ca,to=!1,ca=null,t}function ve(t,e){var n=e[_a];n===void 0&&(n=e[_a]=new Set);var r=t+"__bubble";n.has(r)||(kf(e,t,2,!1),n.add(r))}function Pl(t,e,n){var r=0;e&&(r|=4),kf(n,t,r,e)}var Ts="_reactListening"+Math.random().toString(36).slice(2);function Di(t){if(!t[Ts]){t[Ts]=!0,Ph.forEach(function(n){n!=="selectionchange"&&(O0.has(n)||Pl(n,!1,t),Pl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ts]||(e[Ts]=!0,Pl("selectionchange",!1,e))}}function kf(t,e,n,r){switch(sf(e)){case 1:var i=Vg;break;case 4:i=Kg;break;default:i=hu}n=i.bind(null,e,n,t),i=void 0,!ua||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Nl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;l=l.return}for(;u!==null;){if(l=Gn(u),l===null)return;if(c=l.tag,c===5||c===6){r=s=l;continue e}u=u.parentNode}}r=r.return}Wh(function(){var f=s,p=au(n),m=[];e:{var y=_f.get(t);if(y!==void 0){var b=pu,P=t;switch(t){case"keypress":if(Vs(n)===0)break e;case"keydown":case"keyup":b=l0;break;case"focusin":P="focus",b=kl;break;case"focusout":P="blur",b=kl;break;case"beforeblur":case"afterblur":b=kl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=ed;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=Yg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=c0;break;case gf:case vf:case yf:b=Xg;break;case wf:b=h0;break;case"scroll":b=Gg;break;case"wheel":b=p0;break;case"copy":case"cut":case"paste":b=e0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=nd}var C=(e&4)!==0,U=!C&&t==="scroll",S=C?y!==null?y+"Capture":null:y;C=[];for(var w=f,k;w!==null;){k=w;var j=k.stateNode;if(k.tag===5&&j!==null&&(k=j,S!==null&&(j=Ri(w,S),j!=null&&C.push(Fi(w,j,k)))),U)break;w=w.return}0<C.length&&(y=new b(y,P,null,n,p),m.push({event:y,listeners:C}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",y&&n!==la&&(P=n.relatedTarget||n.fromElement)&&(Gn(P)||P[sn]))break e;if((b||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,b?(P=n.relatedTarget||n.toElement,b=f,P=P?Gn(P):null,P!==null&&(U=ir(P),P!==U||P.tag!==5&&P.tag!==6)&&(P=null)):(b=null,P=f),b!==P)){if(C=ed,j="onMouseLeave",S="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(C=nd,j="onPointerLeave",S="onPointerEnter",w="pointer"),U=b==null?y:kr(b),k=P==null?y:kr(P),y=new C(j,w+"leave",b,n,p),y.target=U,y.relatedTarget=k,j=null,Gn(p)===f&&(C=new C(S,w+"enter",P,n,p),C.target=k,C.relatedTarget=U,j=C),U=j,b&&P)t:{for(C=b,S=P,w=0,k=C;k;k=ur(k))w++;for(k=0,j=S;j;j=ur(j))k++;for(;0<w-k;)C=ur(C),w--;for(;0<k-w;)S=ur(S),k--;for(;w--;){if(C===S||S!==null&&C===S.alternate)break t;C=ur(C),S=ur(S)}C=null}else C=null;b!==null&&fd(m,y,b,C,!1),P!==null&&U!==null&&fd(m,U,P,C,!0)}}e:{if(y=f?kr(f):window,b=y.nodeName&&y.nodeName.toLowerCase(),b==="select"||b==="input"&&y.type==="file")var O=x0;else if(sd(y))if(df)O=b0;else{O=S0;var R=k0}else(b=y.nodeName)&&b.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(O=E0);if(O&&(O=O(t,f))){cf(m,O,n,p);break e}R&&R(t,y,f),t==="focusout"&&(R=y._wrapperState)&&R.controlled&&y.type==="number"&&na(y,"number",y.value)}switch(R=f?kr(f):window,t){case"focusin":(sd(R)||R.contentEditable==="true")&&(_r=R,pa=f,Si=null);break;case"focusout":Si=pa=_r=null;break;case"mousedown":ma=!0;break;case"contextmenu":case"mouseup":case"dragend":ma=!1,cd(m,n,p);break;case"selectionchange":if(P0)break;case"keydown":case"keyup":cd(m,n,p)}var A;if(gu)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else wr?af(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(lf&&n.locale!=="ko"&&(wr||D!=="onCompositionStart"?D==="onCompositionEnd"&&wr&&(A=of()):(_n=p,fu="value"in _n?_n.value:_n.textContent,wr=!0)),R=oo(f,D),0<R.length&&(D=new td(D,t,null,n,p),m.push({event:D,listeners:R}),A?D.data=A:(A=uf(n),A!==null&&(D.data=A)))),(A=g0?v0(t,n):y0(t,n))&&(f=oo(f,"onBeforeInput"),0<f.length&&(p=new td("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:f}),p.data=A))}xf(m,e)})}function Fi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function oo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ri(t,n),s!=null&&r.unshift(Fi(t,s,i)),s=Ri(t,e),s!=null&&r.push(Fi(t,s,i))),t=t.return}return r}function ur(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fd(t,e,n,r,i){for(var s=e._reactName,l=[];n!==null&&n!==r;){var u=n,c=u.alternate,f=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&f!==null&&(u=f,i?(c=Ri(n,s),c!=null&&l.unshift(Fi(n,c,u))):i||(c=Ri(n,s),c!=null&&l.push(Fi(n,c,u)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var A0=/\r\n?/g,R0=/\u0000|\uFFFD/g;function pd(t){return(typeof t=="string"?t:""+t).replace(A0,`
`).replace(R0,"")}function Ps(t,e,n){if(e=pd(e),pd(t)!==e&&n)throw Error($(425))}function lo(){}var ga=null,va=null;function ya(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wa=typeof setTimeout=="function"?setTimeout:void 0,I0=typeof clearTimeout=="function"?clearTimeout:void 0,md=typeof Promise=="function"?Promise:void 0,L0=typeof queueMicrotask=="function"?queueMicrotask:typeof md<"u"?function(t){return md.resolve(null).then(t).catch(U0)}:wa;function U0(t){setTimeout(function(){throw t})}function Cl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ui(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ui(e)}function bn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Kr=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Kr,zi="__reactProps$"+Kr,sn="__reactContainer$"+Kr,_a="__reactEvents$"+Kr,$0="__reactListeners$"+Kr,M0="__reactHandles$"+Kr;function Gn(t){var e=t[Wt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[sn]||n[Wt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gd(t);t!==null;){if(n=t[Wt])return n;t=gd(t)}return e}t=n,n=t.parentNode}return null}function Xi(t){return t=t[Wt]||t[sn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function kr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Oo(t){return t[zi]||null}var xa=[],Sr=-1;function Rn(t){return{current:t}}function ye(t){0>Sr||(t.current=xa[Sr],xa[Sr]=null,Sr--)}function me(t,e){Sr++,xa[Sr]=t.current,t.current=e}var On={},Ge=Rn(On),ot=Rn(!1),Xn=On;function $r(t,e){var n=t.type.contextTypes;if(!n)return On;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function lt(t){return t=t.childContextTypes,t!=null}function ao(){ye(ot),ye(Ge)}function vd(t,e,n){if(Ge.current!==On)throw Error($(168));me(Ge,e),me(ot,n)}function Sf(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,kg(t)||"Unknown",i));return ke({},n,r)}function uo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||On,Xn=Ge.current,me(Ge,t),me(ot,ot.current),!0}function yd(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=Sf(t,e,Xn),r.__reactInternalMemoizedMergedChildContext=t,ye(ot),ye(Ge),me(Ge,t)):ye(ot),me(ot,n)}var Xt=null,Ao=!1,Ol=!1;function Ef(t){Xt===null?Xt=[t]:Xt.push(t)}function D0(t){Ao=!0,Ef(t)}function In(){if(!Ol&&Xt!==null){Ol=!0;var t=0,e=de;try{var n=Xt;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xt=null,Ao=!1}catch(i){throw Xt!==null&&(Xt=Xt.slice(t+1)),qh(uu,In),i}finally{de=e,Ol=!1}}return null}var Er=[],br=0,co=null,ho=0,wt=[],_t=0,Zn=null,Zt=1,en="";function Bn(t,e){Er[br++]=ho,Er[br++]=co,co=t,ho=e}function bf(t,e,n){wt[_t++]=Zt,wt[_t++]=en,wt[_t++]=Zn,Zn=t;var r=Zt;t=en;var i=32-Rt(r)-1;r&=~(1<<i),n+=1;var s=32-Rt(e)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Zt=1<<32-Rt(e)+i|n<<i|r,en=s+t}else Zt=1<<s|n<<i|r,en=t}function yu(t){t.return!==null&&(Bn(t,1),bf(t,1,0))}function wu(t){for(;t===co;)co=Er[--br],Er[br]=null,ho=Er[--br],Er[br]=null;for(;t===Zn;)Zn=wt[--_t],wt[_t]=null,en=wt[--_t],wt[_t]=null,Zt=wt[--_t],wt[_t]=null}var ft=null,ht=null,we=!1,At=null;function jf(t,e){var n=xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ft=t,ht=bn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ft=t,ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zn!==null?{id:Zt,overflow:en}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ft=t,ht=null,!0):!1;default:return!1}}function ka(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sa(t){if(we){var e=ht;if(e){var n=e;if(!wd(t,e)){if(ka(t))throw Error($(418));e=bn(n.nextSibling);var r=ft;e&&wd(t,e)?jf(r,n):(t.flags=t.flags&-4097|2,we=!1,ft=t)}}else{if(ka(t))throw Error($(418));t.flags=t.flags&-4097|2,we=!1,ft=t}}}function _d(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ft=t}function Ns(t){if(t!==ft)return!1;if(!we)return _d(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ya(t.type,t.memoizedProps)),e&&(e=ht)){if(ka(t))throw Tf(),Error($(418));for(;e;)jf(t,e),e=bn(e.nextSibling)}if(_d(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ht=bn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ht=null}}else ht=ft?bn(t.stateNode.nextSibling):null;return!0}function Tf(){for(var t=ht;t;)t=bn(t.nextSibling)}function Mr(){ht=ft=null,we=!1}function _u(t){At===null?At=[t]:At.push(t)}var F0=an.ReactCurrentBatchConfig;function ci(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(l){var u=i.refs;l===null?delete u[s]:u[s]=l},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Cs(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xd(t){var e=t._init;return e(t._payload)}function Pf(t){function e(S,w){if(t){var k=S.deletions;k===null?(S.deletions=[w],S.flags|=16):k.push(w)}}function n(S,w){if(!t)return null;for(;w!==null;)e(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function i(S,w){return S=Nn(S,w),S.index=0,S.sibling=null,S}function s(S,w,k){return S.index=k,t?(k=S.alternate,k!==null?(k=k.index,k<w?(S.flags|=2,w):k):(S.flags|=2,w)):(S.flags|=1048576,w)}function l(S){return t&&S.alternate===null&&(S.flags|=2),S}function u(S,w,k,j){return w===null||w.tag!==6?(w=Ml(k,S.mode,j),w.return=S,w):(w=i(w,k),w.return=S,w)}function c(S,w,k,j){var O=k.type;return O===yr?p(S,w,k.props.children,j,k.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===mn&&xd(O)===w.type)?(j=i(w,k.props),j.ref=ci(S,w,k),j.return=S,j):(j=Xs(k.type,k.key,k.props,null,S.mode,j),j.ref=ci(S,w,k),j.return=S,j)}function f(S,w,k,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==k.containerInfo||w.stateNode.implementation!==k.implementation?(w=Dl(k,S.mode,j),w.return=S,w):(w=i(w,k.children||[]),w.return=S,w)}function p(S,w,k,j,O){return w===null||w.tag!==7?(w=Jn(k,S.mode,j,O),w.return=S,w):(w=i(w,k),w.return=S,w)}function m(S,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ml(""+w,S.mode,k),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ws:return k=Xs(w.type,w.key,w.props,null,S.mode,k),k.ref=ci(S,null,w),k.return=S,k;case vr:return w=Dl(w,S.mode,k),w.return=S,w;case mn:var j=w._init;return m(S,j(w._payload),k)}if(mi(w)||si(w))return w=Jn(w,S.mode,k,null),w.return=S,w;Cs(S,w)}return null}function y(S,w,k,j){var O=w!==null?w.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return O!==null?null:u(S,w,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ws:return k.key===O?c(S,w,k,j):null;case vr:return k.key===O?f(S,w,k,j):null;case mn:return O=k._init,y(S,w,O(k._payload),j)}if(mi(k)||si(k))return O!==null?null:p(S,w,k,j,null);Cs(S,k)}return null}function b(S,w,k,j,O){if(typeof j=="string"&&j!==""||typeof j=="number")return S=S.get(k)||null,u(w,S,""+j,O);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ws:return S=S.get(j.key===null?k:j.key)||null,c(w,S,j,O);case vr:return S=S.get(j.key===null?k:j.key)||null,f(w,S,j,O);case mn:var R=j._init;return b(S,w,k,R(j._payload),O)}if(mi(j)||si(j))return S=S.get(k)||null,p(w,S,j,O,null);Cs(w,j)}return null}function P(S,w,k,j){for(var O=null,R=null,A=w,D=w=0,T=null;A!==null&&D<k.length;D++){A.index>D?(T=A,A=null):T=A.sibling;var L=y(S,A,k[D],j);if(L===null){A===null&&(A=T);break}t&&A&&L.alternate===null&&e(S,A),w=s(L,w,D),R===null?O=L:R.sibling=L,R=L,A=T}if(D===k.length)return n(S,A),we&&Bn(S,D),O;if(A===null){for(;D<k.length;D++)A=m(S,k[D],j),A!==null&&(w=s(A,w,D),R===null?O=A:R.sibling=A,R=A);return we&&Bn(S,D),O}for(A=r(S,A);D<k.length;D++)T=b(A,S,D,k[D],j),T!==null&&(t&&T.alternate!==null&&A.delete(T.key===null?D:T.key),w=s(T,w,D),R===null?O=T:R.sibling=T,R=T);return t&&A.forEach(function(K){return e(S,K)}),we&&Bn(S,D),O}function C(S,w,k,j){var O=si(k);if(typeof O!="function")throw Error($(150));if(k=O.call(k),k==null)throw Error($(151));for(var R=O=null,A=w,D=w=0,T=null,L=k.next();A!==null&&!L.done;D++,L=k.next()){A.index>D?(T=A,A=null):T=A.sibling;var K=y(S,A,L.value,j);if(K===null){A===null&&(A=T);break}t&&A&&K.alternate===null&&e(S,A),w=s(K,w,D),R===null?O=K:R.sibling=K,R=K,A=T}if(L.done)return n(S,A),we&&Bn(S,D),O;if(A===null){for(;!L.done;D++,L=k.next())L=m(S,L.value,j),L!==null&&(w=s(L,w,D),R===null?O=L:R.sibling=L,R=L);return we&&Bn(S,D),O}for(A=r(S,A);!L.done;D++,L=k.next())L=b(A,S,D,L.value,j),L!==null&&(t&&L.alternate!==null&&A.delete(L.key===null?D:L.key),w=s(L,w,D),R===null?O=L:R.sibling=L,R=L);return t&&A.forEach(function(re){return e(S,re)}),we&&Bn(S,D),O}function U(S,w,k,j){if(typeof k=="object"&&k!==null&&k.type===yr&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case ws:e:{for(var O=k.key,R=w;R!==null;){if(R.key===O){if(O=k.type,O===yr){if(R.tag===7){n(S,R.sibling),w=i(R,k.props.children),w.return=S,S=w;break e}}else if(R.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===mn&&xd(O)===R.type){n(S,R.sibling),w=i(R,k.props),w.ref=ci(S,R,k),w.return=S,S=w;break e}n(S,R);break}else e(S,R);R=R.sibling}k.type===yr?(w=Jn(k.props.children,S.mode,j,k.key),w.return=S,S=w):(j=Xs(k.type,k.key,k.props,null,S.mode,j),j.ref=ci(S,w,k),j.return=S,S=j)}return l(S);case vr:e:{for(R=k.key;w!==null;){if(w.key===R)if(w.tag===4&&w.stateNode.containerInfo===k.containerInfo&&w.stateNode.implementation===k.implementation){n(S,w.sibling),w=i(w,k.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else e(S,w);w=w.sibling}w=Dl(k,S.mode,j),w.return=S,S=w}return l(S);case mn:return R=k._init,U(S,w,R(k._payload),j)}if(mi(k))return P(S,w,k,j);if(si(k))return C(S,w,k,j);Cs(S,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,w!==null&&w.tag===6?(n(S,w.sibling),w=i(w,k),w.return=S,S=w):(n(S,w),w=Ml(k,S.mode,j),w.return=S,S=w),l(S)):n(S,w)}return U}var Dr=Pf(!0),Nf=Pf(!1),fo=Rn(null),po=null,jr=null,xu=null;function ku(){xu=jr=po=null}function Su(t){var e=fo.current;ye(fo),t._currentValue=e}function Ea(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rr(t,e){po=t,xu=jr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(st=!0),t.firstContext=null)}function St(t){var e=t._currentValue;if(xu!==t)if(t={context:t,memoizedValue:e,next:null},jr===null){if(po===null)throw Error($(308));jr=t,po.dependencies={lanes:0,firstContext:t}}else jr=jr.next=t;return e}var qn=null;function Eu(t){qn===null?qn=[t]:qn.push(t)}function Cf(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Eu(e)):(n.next=i.next,i.next=n),e.interleaved=n,on(t,r)}function on(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gn=!1;function bu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Of(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function nn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,on(t,n)}return i=r.interleaved,i===null?(e.next=e,Eu(r)):(e.next=i.next,i.next=e),r.interleaved=e,on(t,n)}function Ks(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cu(t,n)}}function kd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mo(t,e,n,r){var i=t.updateQueue;gn=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,f=c.next;c.next=null,l===null?s=f:l.next=f,l=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==l&&(u===null?p.firstBaseUpdate=f:u.next=f,p.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;l=0,p=f=c=null,u=s;do{var y=u.lane,b=u.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:b,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var P=t,C=u;switch(y=e,b=n,C.tag){case 1:if(P=C.payload,typeof P=="function"){m=P.call(b,m,y);break e}m=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=C.payload,y=typeof P=="function"?P.call(b,m,y):P,y==null)break e;m=ke({},m,y);break e;case 2:gn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[u]:y.push(u))}else b={eventTime:b,lane:y,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(f=p=b,c=m):p=p.next=b,l|=y;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;y=u,u=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(p===null&&(c=m),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);tr|=l,t.lanes=l,t.memoizedState=m}}function Sd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var Zi={},Kt=Rn(Zi),Hi=Rn(Zi),Bi=Rn(Zi);function Yn(t){if(t===Zi)throw Error($(174));return t}function ju(t,e){switch(me(Bi,e),me(Hi,t),me(Kt,Zi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ia(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ia(e,t)}ye(Kt),me(Kt,e)}function Fr(){ye(Kt),ye(Hi),ye(Bi)}function Af(t){Yn(Bi.current);var e=Yn(Kt.current),n=ia(e,t.type);e!==n&&(me(Hi,t),me(Kt,n))}function Tu(t){Hi.current===t&&(ye(Kt),ye(Hi))}var _e=Rn(0);function go(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Al=[];function Pu(){for(var t=0;t<Al.length;t++)Al[t]._workInProgressVersionPrimary=null;Al.length=0}var Gs=an.ReactCurrentDispatcher,Rl=an.ReactCurrentBatchConfig,er=0,xe=null,Ce=null,Re=null,vo=!1,Ei=!1,Wi=0,z0=0;function We(){throw Error($(321))}function Nu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Lt(t[n],e[n]))return!1;return!0}function Cu(t,e,n,r,i,s){if(er=s,xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gs.current=t===null||t.memoizedState===null?V0:K0,t=n(r,i),Ei){s=0;do{if(Ei=!1,Wi=0,25<=s)throw Error($(301));s+=1,Re=Ce=null,e.updateQueue=null,Gs.current=G0,t=n(r,i)}while(Ei)}if(Gs.current=yo,e=Ce!==null&&Ce.next!==null,er=0,Re=Ce=xe=null,vo=!1,e)throw Error($(300));return t}function Ou(){var t=Wi!==0;return Wi=0,t}function Ht(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?xe.memoizedState=Re=t:Re=Re.next=t,Re}function Et(){if(Ce===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=Ce.next;var e=Re===null?xe.memoizedState:Re.next;if(e!==null)Re=e,Ce=t;else{if(t===null)throw Error($(310));Ce=t,t={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Re===null?xe.memoizedState=Re=t:Re=Re.next=t}return Re}function Vi(t,e){return typeof e=="function"?e(t):e}function Il(t){var e=Et(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ce,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var u=l=null,c=null,f=s;do{var p=f.lane;if((er&p)===p)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var m={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(u=c=m,l=r):c=c.next=m,xe.lanes|=p,tr|=p}f=f.next}while(f!==null&&f!==s);c===null?l=r:c.next=u,Lt(r,e.memoizedState)||(st=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,xe.lanes|=s,tr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ll(t){var e=Et(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=t(s,l.action),l=l.next;while(l!==i);Lt(s,e.memoizedState)||(st=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Rf(){}function If(t,e){var n=xe,r=Et(),i=e(),s=!Lt(r.memoizedState,i);if(s&&(r.memoizedState=i,st=!0),r=r.queue,Au($f.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Re!==null&&Re.memoizedState.tag&1){if(n.flags|=2048,Ki(9,Uf.bind(null,n,r,i,e),void 0,null),Ie===null)throw Error($(349));er&30||Lf(n,e,i)}return i}function Lf(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Uf(t,e,n,r){e.value=n,e.getSnapshot=r,Mf(e)&&Df(t)}function $f(t,e,n){return n(function(){Mf(e)&&Df(t)})}function Mf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Lt(t,n)}catch{return!0}}function Df(t){var e=on(t,1);e!==null&&It(e,t,1,-1)}function Ed(t){var e=Ht();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:t},e.queue=t,t=t.dispatch=W0.bind(null,xe,t),[e.memoizedState,t]}function Ki(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ff(){return Et().memoizedState}function qs(t,e,n,r){var i=Ht();xe.flags|=t,i.memoizedState=Ki(1|e,n,void 0,r===void 0?null:r)}function Ro(t,e,n,r){var i=Et();r=r===void 0?null:r;var s=void 0;if(Ce!==null){var l=Ce.memoizedState;if(s=l.destroy,r!==null&&Nu(r,l.deps)){i.memoizedState=Ki(e,n,s,r);return}}xe.flags|=t,i.memoizedState=Ki(1|e,n,s,r)}function bd(t,e){return qs(8390656,8,t,e)}function Au(t,e){return Ro(2048,8,t,e)}function zf(t,e){return Ro(4,2,t,e)}function Hf(t,e){return Ro(4,4,t,e)}function Bf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wf(t,e,n){return n=n!=null?n.concat([t]):null,Ro(4,4,Bf.bind(null,e,t),n)}function Ru(){}function Vf(t,e){var n=Et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Kf(t,e){var n=Et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Gf(t,e,n){return er&21?(Lt(n,e)||(n=Jh(),xe.lanes|=n,tr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,st=!0),t.memoizedState=n)}function H0(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=Rl.transition;Rl.transition={};try{t(!1),e()}finally{de=n,Rl.transition=r}}function qf(){return Et().memoizedState}function B0(t,e,n){var r=Pn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yf(t))Qf(e,n);else if(n=Cf(t,e,n,r),n!==null){var i=Xe();It(n,t,r,i),Jf(n,e,r)}}function W0(t,e,n){var r=Pn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yf(t))Qf(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var l=e.lastRenderedState,u=s(l,n);if(i.hasEagerState=!0,i.eagerState=u,Lt(u,l)){var c=e.interleaved;c===null?(i.next=i,Eu(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Cf(t,e,i,r),n!==null&&(i=Xe(),It(n,t,r,i),Jf(n,e,r))}}function Yf(t){var e=t.alternate;return t===xe||e!==null&&e===xe}function Qf(t,e){Ei=vo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jf(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cu(t,n)}}var yo={readContext:St,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},V0={readContext:St,useCallback:function(t,e){return Ht().memoizedState=[t,e===void 0?null:e],t},useContext:St,useEffect:bd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qs(4194308,4,Bf.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qs(4194308,4,t,e)},useInsertionEffect:function(t,e){return qs(4,2,t,e)},useMemo:function(t,e){var n=Ht();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ht();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=B0.bind(null,xe,t),[r.memoizedState,t]},useRef:function(t){var e=Ht();return t={current:t},e.memoizedState=t},useState:Ed,useDebugValue:Ru,useDeferredValue:function(t){return Ht().memoizedState=t},useTransition:function(){var t=Ed(!1),e=t[0];return t=H0.bind(null,t[1]),Ht().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xe,i=Ht();if(we){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Ie===null)throw Error($(349));er&30||Lf(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,bd($f.bind(null,r,s,t),[t]),r.flags|=2048,Ki(9,Uf.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ht(),e=Ie.identifierPrefix;if(we){var n=en,r=Zt;n=(r&~(1<<32-Rt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=z0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},K0={readContext:St,useCallback:Vf,useContext:St,useEffect:Au,useImperativeHandle:Wf,useInsertionEffect:zf,useLayoutEffect:Hf,useMemo:Kf,useReducer:Il,useRef:Ff,useState:function(){return Il(Vi)},useDebugValue:Ru,useDeferredValue:function(t){var e=Et();return Gf(e,Ce.memoizedState,t)},useTransition:function(){var t=Il(Vi)[0],e=Et().memoizedState;return[t,e]},useMutableSource:Rf,useSyncExternalStore:If,useId:qf,unstable_isNewReconciler:!1},G0={readContext:St,useCallback:Vf,useContext:St,useEffect:Au,useImperativeHandle:Wf,useInsertionEffect:zf,useLayoutEffect:Hf,useMemo:Kf,useReducer:Ll,useRef:Ff,useState:function(){return Ll(Vi)},useDebugValue:Ru,useDeferredValue:function(t){var e=Et();return Ce===null?e.memoizedState=t:Gf(e,Ce.memoizedState,t)},useTransition:function(){var t=Ll(Vi)[0],e=Et().memoizedState;return[t,e]},useMutableSource:Rf,useSyncExternalStore:If,useId:qf,unstable_isNewReconciler:!1};function Nt(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ba(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Io={isMounted:function(t){return(t=t._reactInternals)?ir(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xe(),i=Pn(t),s=nn(r,i);s.payload=e,n!=null&&(s.callback=n),e=jn(t,s,i),e!==null&&(It(e,t,i,r),Ks(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xe(),i=Pn(t),s=nn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=jn(t,s,i),e!==null&&(It(e,t,i,r),Ks(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xe(),r=Pn(t),i=nn(n,r);i.tag=2,e!=null&&(i.callback=e),e=jn(t,i,r),e!==null&&(It(e,t,r,n),Ks(e,t,r))}};function jd(t,e,n,r,i,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,l):e.prototype&&e.prototype.isPureReactComponent?!Mi(n,r)||!Mi(i,s):!0}function Xf(t,e,n){var r=!1,i=On,s=e.contextType;return typeof s=="object"&&s!==null?s=St(s):(i=lt(e)?Xn:Ge.current,r=e.contextTypes,s=(r=r!=null)?$r(t,i):On),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Io,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Td(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Io.enqueueReplaceState(e,e.state,null)}function ja(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},bu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=St(s):(s=lt(e)?Xn:Ge.current,i.context=$r(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ba(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Io.enqueueReplaceState(i,i.state,null),mo(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function zr(t,e){try{var n="",r=e;do n+=xg(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ul(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ta(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var q0=typeof WeakMap=="function"?WeakMap:Map;function Zf(t,e,n){n=nn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_o||(_o=!0,$a=r),Ta(t,e)},n}function ep(t,e,n){n=nn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ta(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ta(t,e),typeof r!="function"&&(Tn===null?Tn=new Set([this]):Tn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Pd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new q0;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=av.bind(null,t,e,n),e.then(t,t))}function Nd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Cd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=nn(-1,1),e.tag=2,jn(n,e,1))),n.lanes|=1),t)}var Y0=an.ReactCurrentOwner,st=!1;function Qe(t,e,n,r){e.child=t===null?Nf(e,null,n,r):Dr(e,t.child,n,r)}function Od(t,e,n,r,i){n=n.render;var s=e.ref;return Rr(e,i),r=Cu(t,e,n,r,s,i),n=Ou(),t!==null&&!st?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ln(t,e,i)):(we&&n&&yu(e),e.flags|=1,Qe(t,e,r,i),e.child)}function Ad(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!zu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,tp(t,e,s,r,i)):(t=Xs(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:Mi,n(l,r)&&t.ref===e.ref)return ln(t,e,i)}return e.flags|=1,t=Nn(s,r),t.ref=e.ref,t.return=e,e.child=t}function tp(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Mi(s,r)&&t.ref===e.ref)if(st=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(st=!0);else return e.lanes=t.lanes,ln(t,e,i)}return Pa(t,e,n,r,i)}function np(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(Pr,dt),dt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me(Pr,dt),dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,me(Pr,dt),dt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,me(Pr,dt),dt|=r;return Qe(t,e,i,n),e.child}function rp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pa(t,e,n,r,i){var s=lt(n)?Xn:Ge.current;return s=$r(e,s),Rr(e,i),n=Cu(t,e,n,r,s,i),r=Ou(),t!==null&&!st?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ln(t,e,i)):(we&&r&&yu(e),e.flags|=1,Qe(t,e,n,i),e.child)}function Rd(t,e,n,r,i){if(lt(n)){var s=!0;uo(e)}else s=!1;if(Rr(e,i),e.stateNode===null)Ys(t,e),Xf(e,n,r),ja(e,n,r,i),r=!0;else if(t===null){var l=e.stateNode,u=e.memoizedProps;l.props=u;var c=l.context,f=n.contextType;typeof f=="object"&&f!==null?f=St(f):(f=lt(n)?Xn:Ge.current,f=$r(e,f));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==r||c!==f)&&Td(e,l,r,f),gn=!1;var y=e.memoizedState;l.state=y,mo(e,r,l,i),c=e.memoizedState,u!==r||y!==c||ot.current||gn?(typeof p=="function"&&(ba(e,n,p,r),c=e.memoizedState),(u=gn||jd(e,n,u,r,y,c,f))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),l.props=r,l.state=c,l.context=f,r=u):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,Of(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:Nt(e.type,u),l.props=f,m=e.pendingProps,y=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=St(c):(c=lt(n)?Xn:Ge.current,c=$r(e,c));var b=n.getDerivedStateFromProps;(p=typeof b=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==m||y!==c)&&Td(e,l,r,c),gn=!1,y=e.memoizedState,l.state=y,mo(e,r,l,i);var P=e.memoizedState;u!==m||y!==P||ot.current||gn?(typeof b=="function"&&(ba(e,n,b,r),P=e.memoizedState),(f=gn||jd(e,n,f,r,y,P,c)||!1)?(p||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,P,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,P,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),l.props=r,l.state=P,l.context=c,r=f):(typeof l.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Na(t,e,n,r,s,i)}function Na(t,e,n,r,i,s){rp(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return i&&yd(e,n,!1),ln(t,e,s);r=e.stateNode,Y0.current=e;var u=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=Dr(e,t.child,null,s),e.child=Dr(e,null,u,s)):Qe(t,e,u,s),e.memoizedState=r.state,i&&yd(e,n,!0),e.child}function ip(t){var e=t.stateNode;e.pendingContext?vd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vd(t,e.context,!1),ju(t,e.containerInfo)}function Id(t,e,n,r,i){return Mr(),_u(i),e.flags|=256,Qe(t,e,n,r),e.child}var Ca={dehydrated:null,treeContext:null,retryLane:0};function Oa(t){return{baseLanes:t,cachePool:null,transitions:null}}function sp(t,e,n){var r=e.pendingProps,i=_e.current,s=!1,l=(e.flags&128)!==0,u;if((u=l)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),me(_e,i&1),t===null)return Sa(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=$o(l,r,0,null),t=Jn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Oa(n),e.memoizedState=Ca,t):Iu(e,l));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return Q0(t,e,l,r,u,i,n);if(s){s=r.fallback,l=e.mode,i=t.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Nn(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?s=Nn(u,s):(s=Jn(s,l,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=t.child.memoizedState,l=l===null?Oa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=Ca,r}return s=t.child,t=s.sibling,r=Nn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Iu(t,e){return e=$o({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Os(t,e,n,r){return r!==null&&_u(r),Dr(e,t.child,null,n),t=Iu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Q0(t,e,n,r,i,s,l){if(n)return e.flags&256?(e.flags&=-257,r=Ul(Error($(422))),Os(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=$o({mode:"visible",children:r.children},i,0,null),s=Jn(s,i,l,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Dr(e,t.child,null,l),e.child.memoizedState=Oa(l),e.memoizedState=Ca,s);if(!(e.mode&1))return Os(t,e,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error($(419)),r=Ul(s,r,void 0),Os(t,e,l,r)}if(u=(l&t.childLanes)!==0,st||u){if(r=Ie,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,on(t,i),It(r,t,i,-1))}return Fu(),r=Ul(Error($(421))),Os(t,e,l,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=uv.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ht=bn(i.nextSibling),ft=e,we=!0,At=null,t!==null&&(wt[_t++]=Zt,wt[_t++]=en,wt[_t++]=Zn,Zt=t.id,en=t.overflow,Zn=e),e=Iu(e,r.children),e.flags|=4096,e)}function Ld(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ea(t.return,e,n)}function $l(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function op(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Qe(t,e,r.children,n),r=_e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ld(t,n,e);else if(t.tag===19)Ld(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(me(_e,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&go(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),$l(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&go(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}$l(e,!0,n,null,s);break;case"together":$l(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ys(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ln(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),tr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Nn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function J0(t,e,n){switch(e.tag){case 3:ip(e),Mr();break;case 5:Af(e);break;case 1:lt(e.type)&&uo(e);break;case 4:ju(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;me(fo,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(me(_e,_e.current&1),e.flags|=128,null):n&e.child.childLanes?sp(t,e,n):(me(_e,_e.current&1),t=ln(t,e,n),t!==null?t.sibling:null);me(_e,_e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return op(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),me(_e,_e.current),r)break;return null;case 22:case 23:return e.lanes=0,np(t,e,n)}return ln(t,e,n)}var lp,Aa,ap,up;lp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Aa=function(){};ap=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Yn(Kt.current);var s=null;switch(n){case"input":i=ea(t,i),r=ea(t,r),s=[];break;case"select":i=ke({},i,{value:void 0}),r=ke({},r,{value:void 0}),s=[];break;case"textarea":i=ra(t,i),r=ra(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lo)}sa(n,r);var l;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var u=i[f];for(l in u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Oi.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var c=r[f];if(u=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&c!==u&&(c!=null||u!=null))if(f==="style")if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(s||(s=[]),s.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(s=s||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Oi.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&ve("scroll",t),s||u===c||(s=[])):(s=s||[]).push(f,c))}n&&(s=s||[]).push("style",n);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};up=function(t,e,n,r){n!==r&&(e.flags|=4)};function di(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ve(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function X0(t,e,n){var r=e.pendingProps;switch(wu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(e),null;case 1:return lt(e.type)&&ao(),Ve(e),null;case 3:return r=e.stateNode,Fr(),ye(ot),ye(Ge),Pu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ns(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,At!==null&&(Fa(At),At=null))),Aa(t,e),Ve(e),null;case 5:Tu(e);var i=Yn(Bi.current);if(n=e.type,t!==null&&e.stateNode!=null)ap(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Ve(e),null}if(t=Yn(Kt.current),Ns(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Wt]=e,r[zi]=s,t=(e.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(i=0;i<vi.length;i++)ve(vi[i],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":Wc(r,s),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ve("invalid",r);break;case"textarea":Kc(r,s),ve("invalid",r)}sa(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var u=s[l];l==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&Ps(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&Ps(r.textContent,u,t),i=["children",""+u]):Oi.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&ve("scroll",r)}switch(n){case"input":_s(r),Vc(r,s,!0);break;case"textarea":_s(r),Gc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=lo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Uh(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Wt]=e,t[zi]=r,lp(t,e,!1,!1),e.stateNode=t;e:{switch(l=oa(n,r),n){case"dialog":ve("cancel",t),ve("close",t),i=r;break;case"iframe":case"object":case"embed":ve("load",t),i=r;break;case"video":case"audio":for(i=0;i<vi.length;i++)ve(vi[i],t);i=r;break;case"source":ve("error",t),i=r;break;case"img":case"image":case"link":ve("error",t),ve("load",t),i=r;break;case"details":ve("toggle",t),i=r;break;case"input":Wc(t,r),i=ea(t,r),ve("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ke({},r,{value:void 0}),ve("invalid",t);break;case"textarea":Kc(t,r),i=ra(t,r),ve("invalid",t);break;default:i=r}sa(n,i),u=i;for(s in u)if(u.hasOwnProperty(s)){var c=u[s];s==="style"?Dh(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$h(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ai(t,c):typeof c=="number"&&Ai(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Oi.hasOwnProperty(s)?c!=null&&s==="onScroll"&&ve("scroll",t):c!=null&&iu(t,s,c,l))}switch(n){case"input":_s(t),Vc(t,r,!1);break;case"textarea":_s(t),Gc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Nr(t,!!r.multiple,s,!1):r.defaultValue!=null&&Nr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=lo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ve(e),null;case 6:if(t&&e.stateNode!=null)up(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Yn(Bi.current),Yn(Kt.current),Ns(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wt]=e,(s=r.nodeValue!==n)&&(t=ft,t!==null))switch(t.tag){case 3:Ps(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ps(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wt]=e,e.stateNode=r}return Ve(e),null;case 13:if(ye(_e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&ht!==null&&e.mode&1&&!(e.flags&128))Tf(),Mr(),e.flags|=98560,s=!1;else if(s=Ns(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Wt]=e}else Mr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ve(e),s=!1}else At!==null&&(Fa(At),At=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||_e.current&1?Oe===0&&(Oe=3):Fu())),e.updateQueue!==null&&(e.flags|=4),Ve(e),null);case 4:return Fr(),Aa(t,e),t===null&&Di(e.stateNode.containerInfo),Ve(e),null;case 10:return Su(e.type._context),Ve(e),null;case 17:return lt(e.type)&&ao(),Ve(e),null;case 19:if(ye(_e),s=e.memoizedState,s===null)return Ve(e),null;if(r=(e.flags&128)!==0,l=s.rendering,l===null)if(r)di(s,!1);else{if(Oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=go(t),l!==null){for(e.flags|=128,di(s,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return me(_e,_e.current&1|2),e.child}t=t.sibling}s.tail!==null&&be()>Hr&&(e.flags|=128,r=!0,di(s,!1),e.lanes=4194304)}else{if(!r)if(t=go(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),di(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!we)return Ve(e),null}else 2*be()-s.renderingStartTime>Hr&&n!==1073741824&&(e.flags|=128,r=!0,di(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(n=s.last,n!==null?n.sibling=l:e.child=l,s.last=l)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=be(),e.sibling=null,n=_e.current,me(_e,r?n&1|2:n&1),e):(Ve(e),null);case 22:case 23:return Du(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dt&1073741824&&(Ve(e),e.subtreeFlags&6&&(e.flags|=8192)):Ve(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Z0(t,e){switch(wu(e),e.tag){case 1:return lt(e.type)&&ao(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fr(),ye(ot),ye(Ge),Pu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tu(e),null;case 13:if(ye(_e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Mr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ye(_e),null;case 4:return Fr(),null;case 10:return Su(e.type._context),null;case 22:case 23:return Du(),null;case 24:return null;default:return null}}var As=!1,Ke=!1,ev=typeof WeakSet=="function"?WeakSet:Set,B=null;function Tr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Se(t,e,r)}else n.current=null}function Ra(t,e,n){try{n()}catch(r){Se(t,e,r)}}var Ud=!1;function tv(t,e){if(ga=io,t=pf(),vu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,u=-1,c=-1,f=0,p=0,m=t,y=null;t:for(;;){for(var b;m!==n||i!==0&&m.nodeType!==3||(u=l+i),m!==s||r!==0&&m.nodeType!==3||(c=l+r),m.nodeType===3&&(l+=m.nodeValue.length),(b=m.firstChild)!==null;)y=m,m=b;for(;;){if(m===t)break t;if(y===n&&++f===i&&(u=l),y===s&&++p===r&&(c=l),(b=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=b}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(va={focusedElem:t,selectionRange:n},io=!1,B=e;B!==null;)if(e=B,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,B=t;else for(;B!==null;){e=B;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var C=P.memoizedProps,U=P.memoizedState,S=e.stateNode,w=S.getSnapshotBeforeUpdate(e.elementType===e.type?C:Nt(e.type,C),U);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(j){Se(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,B=t;break}B=e.return}return P=Ud,Ud=!1,P}function bi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ra(e,n,s)}i=i.next}while(i!==r)}}function Lo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ia(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cp(t){var e=t.alternate;e!==null&&(t.alternate=null,cp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wt],delete e[zi],delete e[_a],delete e[$0],delete e[M0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dp(t){return t.tag===5||t.tag===3||t.tag===4}function $d(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function La(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lo));else if(r!==4&&(t=t.child,t!==null))for(La(t,e,n),t=t.sibling;t!==null;)La(t,e,n),t=t.sibling}function Ua(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ua(t,e,n),t=t.sibling;t!==null;)Ua(t,e,n),t=t.sibling}var Me=null,Ct=!1;function hn(t,e,n){for(n=n.child;n!==null;)hp(t,e,n),n=n.sibling}function hp(t,e,n){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(To,n)}catch{}switch(n.tag){case 5:Ke||Tr(n,e);case 6:var r=Me,i=Ct;Me=null,hn(t,e,n),Me=r,Ct=i,Me!==null&&(Ct?(t=Me,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Me.removeChild(n.stateNode));break;case 18:Me!==null&&(Ct?(t=Me,n=n.stateNode,t.nodeType===8?Cl(t.parentNode,n):t.nodeType===1&&Cl(t,n),Ui(t)):Cl(Me,n.stateNode));break;case 4:r=Me,i=Ct,Me=n.stateNode.containerInfo,Ct=!0,hn(t,e,n),Me=r,Ct=i;break;case 0:case 11:case 14:case 15:if(!Ke&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&Ra(n,e,l),i=i.next}while(i!==r)}hn(t,e,n);break;case 1:if(!Ke&&(Tr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Se(n,e,u)}hn(t,e,n);break;case 21:hn(t,e,n);break;case 22:n.mode&1?(Ke=(r=Ke)||n.memoizedState!==null,hn(t,e,n),Ke=r):hn(t,e,n);break;default:hn(t,e,n)}}function Md(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ev),e.forEach(function(r){var i=cv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Tt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,l=e,u=l;e:for(;u!==null;){switch(u.tag){case 5:Me=u.stateNode,Ct=!1;break e;case 3:Me=u.stateNode.containerInfo,Ct=!0;break e;case 4:Me=u.stateNode.containerInfo,Ct=!0;break e}u=u.return}if(Me===null)throw Error($(160));hp(s,l,i),Me=null,Ct=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(f){Se(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fp(e,t),e=e.sibling}function fp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tt(e,t),zt(t),r&4){try{bi(3,t,t.return),Lo(3,t)}catch(C){Se(t,t.return,C)}try{bi(5,t,t.return)}catch(C){Se(t,t.return,C)}}break;case 1:Tt(e,t),zt(t),r&512&&n!==null&&Tr(n,n.return);break;case 5:if(Tt(e,t),zt(t),r&512&&n!==null&&Tr(n,n.return),t.flags&32){var i=t.stateNode;try{Ai(i,"")}catch(C){Se(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,l=n!==null?n.memoizedProps:s,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&Ih(i,s),oa(u,l);var f=oa(u,s);for(l=0;l<c.length;l+=2){var p=c[l],m=c[l+1];p==="style"?Dh(i,m):p==="dangerouslySetInnerHTML"?$h(i,m):p==="children"?Ai(i,m):iu(i,p,m,f)}switch(u){case"input":ta(i,s);break;case"textarea":Lh(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var b=s.value;b!=null?Nr(i,!!s.multiple,b,!1):y!==!!s.multiple&&(s.defaultValue!=null?Nr(i,!!s.multiple,s.defaultValue,!0):Nr(i,!!s.multiple,s.multiple?[]:"",!1))}i[zi]=s}catch(C){Se(t,t.return,C)}}break;case 6:if(Tt(e,t),zt(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){Se(t,t.return,C)}}break;case 3:if(Tt(e,t),zt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ui(e.containerInfo)}catch(C){Se(t,t.return,C)}break;case 4:Tt(e,t),zt(t);break;case 13:Tt(e,t),zt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||($u=be())),r&4&&Md(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Ke=(f=Ke)||p,Tt(e,t),Ke=f):Tt(e,t),zt(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!p&&t.mode&1)for(B=t,p=t.child;p!==null;){for(m=B=p;B!==null;){switch(y=B,b=y.child,y.tag){case 0:case 11:case 14:case 15:bi(4,y,y.return);break;case 1:Tr(y,y.return);var P=y.stateNode;if(typeof P.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(C){Se(r,n,C)}}break;case 5:Tr(y,y.return);break;case 22:if(y.memoizedState!==null){Fd(m);continue}}b!==null?(b.return=y,B=b):Fd(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Mh("display",l))}catch(C){Se(t,t.return,C)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(C){Se(t,t.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Tt(e,t),zt(t),r&4&&Md(t);break;case 21:break;default:Tt(e,t),zt(t)}}function zt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dp(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ai(i,""),r.flags&=-33);var s=$d(t);Ua(t,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,u=$d(t);La(t,u,l);break;default:throw Error($(161))}}catch(c){Se(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nv(t,e,n){B=t,pp(t)}function pp(t,e,n){for(var r=(t.mode&1)!==0;B!==null;){var i=B,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||As;if(!l){var u=i.alternate,c=u!==null&&u.memoizedState!==null||Ke;u=As;var f=Ke;if(As=l,(Ke=c)&&!f)for(B=i;B!==null;)l=B,c=l.child,l.tag===22&&l.memoizedState!==null?zd(i):c!==null?(c.return=l,B=c):zd(i);for(;s!==null;)B=s,pp(s),s=s.sibling;B=i,As=u,Ke=f}Dd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,B=s):Dd(t)}}function Dd(t){for(;B!==null;){var e=B;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ke||Lo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ke)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Nt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Sd(e,s,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sd(e,l,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Ui(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Ke||e.flags&512&&Ia(e)}catch(y){Se(e,e.return,y)}}if(e===t){B=null;break}if(n=e.sibling,n!==null){n.return=e.return,B=n;break}B=e.return}}function Fd(t){for(;B!==null;){var e=B;if(e===t){B=null;break}var n=e.sibling;if(n!==null){n.return=e.return,B=n;break}B=e.return}}function zd(t){for(;B!==null;){var e=B;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Lo(4,e)}catch(c){Se(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Se(e,i,c)}}var s=e.return;try{Ia(e)}catch(c){Se(e,s,c)}break;case 5:var l=e.return;try{Ia(e)}catch(c){Se(e,l,c)}}}catch(c){Se(e,e.return,c)}if(e===t){B=null;break}var u=e.sibling;if(u!==null){u.return=e.return,B=u;break}B=e.return}}var rv=Math.ceil,wo=an.ReactCurrentDispatcher,Lu=an.ReactCurrentOwner,kt=an.ReactCurrentBatchConfig,ae=0,Ie=null,Te=null,De=0,dt=0,Pr=Rn(0),Oe=0,Gi=null,tr=0,Uo=0,Uu=0,ji=null,rt=null,$u=0,Hr=1/0,Qt=null,_o=!1,$a=null,Tn=null,Rs=!1,xn=null,xo=0,Ti=0,Ma=null,Qs=-1,Js=0;function Xe(){return ae&6?be():Qs!==-1?Qs:Qs=be()}function Pn(t){return t.mode&1?ae&2&&De!==0?De&-De:F0.transition!==null?(Js===0&&(Js=Jh()),Js):(t=de,t!==0||(t=window.event,t=t===void 0?16:sf(t.type)),t):1}function It(t,e,n,r){if(50<Ti)throw Ti=0,Ma=null,Error($(185));Qi(t,n,r),(!(ae&2)||t!==Ie)&&(t===Ie&&(!(ae&2)&&(Uo|=n),Oe===4&&yn(t,De)),at(t,r),n===1&&ae===0&&!(e.mode&1)&&(Hr=be()+500,Ao&&In()))}function at(t,e){var n=t.callbackNode;Fg(t,e);var r=ro(t,t===Ie?De:0);if(r===0)n!==null&&Qc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qc(n),e===1)t.tag===0?D0(Hd.bind(null,t)):Ef(Hd.bind(null,t)),L0(function(){!(ae&6)&&In()}),n=null;else{switch(Xh(r)){case 1:n=uu;break;case 4:n=Yh;break;case 16:n=no;break;case 536870912:n=Qh;break;default:n=no}n=kp(n,mp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mp(t,e){if(Qs=-1,Js=0,ae&6)throw Error($(327));var n=t.callbackNode;if(Ir()&&t.callbackNode!==n)return null;var r=ro(t,t===Ie?De:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ko(t,r);else{e=r;var i=ae;ae|=2;var s=vp();(Ie!==t||De!==e)&&(Qt=null,Hr=be()+500,Qn(t,e));do try{ov();break}catch(u){gp(t,u)}while(!0);ku(),wo.current=s,ae=i,Te!==null?e=0:(Ie=null,De=0,e=Oe)}if(e!==0){if(e===2&&(i=da(t),i!==0&&(r=i,e=Da(t,i))),e===1)throw n=Gi,Qn(t,0),yn(t,r),at(t,be()),n;if(e===6)yn(t,r);else{if(i=t.current.alternate,!(r&30)&&!iv(i)&&(e=ko(t,r),e===2&&(s=da(t),s!==0&&(r=s,e=Da(t,s))),e===1))throw n=Gi,Qn(t,0),yn(t,r),at(t,be()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Wn(t,rt,Qt);break;case 3:if(yn(t,r),(r&130023424)===r&&(e=$u+500-be(),10<e)){if(ro(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Xe(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=wa(Wn.bind(null,t,rt,Qt),e);break}Wn(t,rt,Qt);break;case 4:if(yn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var l=31-Rt(r);s=1<<l,l=e[l],l>i&&(i=l),r&=~s}if(r=i,r=be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rv(r/1960))-r,10<r){t.timeoutHandle=wa(Wn.bind(null,t,rt,Qt),r);break}Wn(t,rt,Qt);break;case 5:Wn(t,rt,Qt);break;default:throw Error($(329))}}}return at(t,be()),t.callbackNode===n?mp.bind(null,t):null}function Da(t,e){var n=ji;return t.current.memoizedState.isDehydrated&&(Qn(t,e).flags|=256),t=ko(t,e),t!==2&&(e=rt,rt=n,e!==null&&Fa(e)),t}function Fa(t){rt===null?rt=t:rt.push.apply(rt,t)}function iv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Lt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yn(t,e){for(e&=~Uu,e&=~Uo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Rt(e),r=1<<n;t[n]=-1,e&=~r}}function Hd(t){if(ae&6)throw Error($(327));Ir();var e=ro(t,0);if(!(e&1))return at(t,be()),null;var n=ko(t,e);if(t.tag!==0&&n===2){var r=da(t);r!==0&&(e=r,n=Da(t,r))}if(n===1)throw n=Gi,Qn(t,0),yn(t,e),at(t,be()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wn(t,rt,Qt),at(t,be()),null}function Mu(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(Hr=be()+500,Ao&&In())}}function nr(t){xn!==null&&xn.tag===0&&!(ae&6)&&Ir();var e=ae;ae|=1;var n=kt.transition,r=de;try{if(kt.transition=null,de=1,t)return t()}finally{de=r,kt.transition=n,ae=e,!(ae&6)&&In()}}function Du(){dt=Pr.current,ye(Pr)}function Qn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,I0(n)),Te!==null)for(n=Te.return;n!==null;){var r=n;switch(wu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ao();break;case 3:Fr(),ye(ot),ye(Ge),Pu();break;case 5:Tu(r);break;case 4:Fr();break;case 13:ye(_e);break;case 19:ye(_e);break;case 10:Su(r.type._context);break;case 22:case 23:Du()}n=n.return}if(Ie=t,Te=t=Nn(t.current,null),De=dt=e,Oe=0,Gi=null,Uu=Uo=tr=0,rt=ji=null,qn!==null){for(e=0;e<qn.length;e++)if(n=qn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}qn=null}return t}function gp(t,e){do{var n=Te;try{if(ku(),Gs.current=yo,vo){for(var r=xe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}vo=!1}if(er=0,Re=Ce=xe=null,Ei=!1,Wi=0,Lu.current=null,n===null||n.return===null){Oe=1,Gi=e,Te=null;break}e:{var s=t,l=n.return,u=n,c=e;if(e=De,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,p=u,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var b=Nd(l);if(b!==null){b.flags&=-257,Cd(b,l,u,s,e),b.mode&1&&Pd(s,f,e),e=b,c=f;var P=e.updateQueue;if(P===null){var C=new Set;C.add(c),e.updateQueue=C}else P.add(c);break e}else{if(!(e&1)){Pd(s,f,e),Fu();break e}c=Error($(426))}}else if(we&&u.mode&1){var U=Nd(l);if(U!==null){!(U.flags&65536)&&(U.flags|=256),Cd(U,l,u,s,e),_u(zr(c,u));break e}}s=c=zr(c,u),Oe!==4&&(Oe=2),ji===null?ji=[s]:ji.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=Zf(s,c,e);kd(s,S);break e;case 1:u=c;var w=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Tn===null||!Tn.has(k)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=ep(s,u,e);kd(s,j);break e}}s=s.return}while(s!==null)}wp(n)}catch(O){e=O,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(!0)}function vp(){var t=wo.current;return wo.current=yo,t===null?yo:t}function Fu(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Ie===null||!(tr&268435455)&&!(Uo&268435455)||yn(Ie,De)}function ko(t,e){var n=ae;ae|=2;var r=vp();(Ie!==t||De!==e)&&(Qt=null,Qn(t,e));do try{sv();break}catch(i){gp(t,i)}while(!0);if(ku(),ae=n,wo.current=r,Te!==null)throw Error($(261));return Ie=null,De=0,Oe}function sv(){for(;Te!==null;)yp(Te)}function ov(){for(;Te!==null&&!Og();)yp(Te)}function yp(t){var e=xp(t.alternate,t,dt);t.memoizedProps=t.pendingProps,e===null?wp(t):Te=e,Lu.current=null}function wp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Z0(n,e),n!==null){n.flags&=32767,Te=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Oe=6,Te=null;return}}else if(n=X0(n,e,dt),n!==null){Te=n;return}if(e=e.sibling,e!==null){Te=e;return}Te=e=t}while(e!==null);Oe===0&&(Oe=5)}function Wn(t,e,n){var r=de,i=kt.transition;try{kt.transition=null,de=1,lv(t,e,n,r)}finally{kt.transition=i,de=r}return null}function lv(t,e,n,r){do Ir();while(xn!==null);if(ae&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(zg(t,s),t===Ie&&(Te=Ie=null,De=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Rs||(Rs=!0,kp(no,function(){return Ir(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=kt.transition,kt.transition=null;var l=de;de=1;var u=ae;ae|=4,Lu.current=null,tv(t,n),fp(n,t),T0(va),io=!!ga,va=ga=null,t.current=n,nv(n),Ag(),ae=u,de=l,kt.transition=s}else t.current=n;if(Rs&&(Rs=!1,xn=t,xo=i),s=t.pendingLanes,s===0&&(Tn=null),Lg(n.stateNode),at(t,be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_o)throw _o=!1,t=$a,$a=null,t;return xo&1&&t.tag!==0&&Ir(),s=t.pendingLanes,s&1?t===Ma?Ti++:(Ti=0,Ma=t):Ti=0,In(),null}function Ir(){if(xn!==null){var t=Xh(xo),e=kt.transition,n=de;try{if(kt.transition=null,de=16>t?16:t,xn===null)var r=!1;else{if(t=xn,xn=null,xo=0,ae&6)throw Error($(331));var i=ae;for(ae|=4,B=t.current;B!==null;){var s=B,l=s.child;if(B.flags&16){var u=s.deletions;if(u!==null){for(var c=0;c<u.length;c++){var f=u[c];for(B=f;B!==null;){var p=B;switch(p.tag){case 0:case 11:case 15:bi(8,p,s)}var m=p.child;if(m!==null)m.return=p,B=m;else for(;B!==null;){p=B;var y=p.sibling,b=p.return;if(cp(p),p===f){B=null;break}if(y!==null){y.return=b,B=y;break}B=b}}}var P=s.alternate;if(P!==null){var C=P.child;if(C!==null){P.child=null;do{var U=C.sibling;C.sibling=null,C=U}while(C!==null)}}B=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,B=l;else e:for(;B!==null;){if(s=B,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bi(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,B=S;break e}B=s.return}}var w=t.current;for(B=w;B!==null;){l=B;var k=l.child;if(l.subtreeFlags&2064&&k!==null)k.return=l,B=k;else e:for(l=w;B!==null;){if(u=B,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Lo(9,u)}}catch(O){Se(u,u.return,O)}if(u===l){B=null;break e}var j=u.sibling;if(j!==null){j.return=u.return,B=j;break e}B=u.return}}if(ae=i,In(),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(To,t)}catch{}r=!0}return r}finally{de=n,kt.transition=e}}return!1}function Bd(t,e,n){e=zr(n,e),e=Zf(t,e,1),t=jn(t,e,1),e=Xe(),t!==null&&(Qi(t,1,e),at(t,e))}function Se(t,e,n){if(t.tag===3)Bd(t,t,n);else for(;e!==null;){if(e.tag===3){Bd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Tn===null||!Tn.has(r))){t=zr(n,t),t=ep(e,t,1),e=jn(e,t,1),t=Xe(),e!==null&&(Qi(e,1,t),at(e,t));break}}e=e.return}}function av(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xe(),t.pingedLanes|=t.suspendedLanes&n,Ie===t&&(De&n)===n&&(Oe===4||Oe===3&&(De&130023424)===De&&500>be()-$u?Qn(t,0):Uu|=n),at(t,e)}function _p(t,e){e===0&&(t.mode&1?(e=Ss,Ss<<=1,!(Ss&130023424)&&(Ss=4194304)):e=1);var n=Xe();t=on(t,e),t!==null&&(Qi(t,e,n),at(t,n))}function uv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_p(t,n)}function cv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),_p(t,n)}var xp;xp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ot.current)st=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return st=!1,J0(t,e,n);st=!!(t.flags&131072)}else st=!1,we&&e.flags&1048576&&bf(e,ho,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ys(t,e),t=e.pendingProps;var i=$r(e,Ge.current);Rr(e,n),i=Cu(null,e,r,t,i,n);var s=Ou();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lt(r)?(s=!0,uo(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bu(e),i.updater=Io,e.stateNode=i,i._reactInternals=e,ja(e,r,t,n),e=Na(null,e,r,!0,s,n)):(e.tag=0,we&&s&&yu(e),Qe(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ys(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=hv(r),t=Nt(r,t),i){case 0:e=Pa(null,e,r,t,n);break e;case 1:e=Rd(null,e,r,t,n);break e;case 11:e=Od(null,e,r,t,n);break e;case 14:e=Ad(null,e,r,Nt(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),Pa(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),Rd(t,e,r,i,n);case 3:e:{if(ip(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Of(t,e),mo(e,r,null,n);var l=e.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=zr(Error($(423)),e),e=Id(t,e,r,n,i);break e}else if(r!==i){i=zr(Error($(424)),e),e=Id(t,e,r,n,i);break e}else for(ht=bn(e.stateNode.containerInfo.firstChild),ft=e,we=!0,At=null,n=Nf(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mr(),r===i){e=ln(t,e,n);break e}Qe(t,e,r,n)}e=e.child}return e;case 5:return Af(e),t===null&&Sa(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,l=i.children,ya(r,i)?l=null:s!==null&&ya(r,s)&&(e.flags|=32),rp(t,e),Qe(t,e,l,n),e.child;case 6:return t===null&&Sa(e),null;case 13:return sp(t,e,n);case 4:return ju(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Dr(e,null,r,n):Qe(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),Od(t,e,r,i,n);case 7:return Qe(t,e,e.pendingProps,n),e.child;case 8:return Qe(t,e,e.pendingProps.children,n),e.child;case 12:return Qe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,l=i.value,me(fo,r._currentValue),r._currentValue=l,s!==null)if(Lt(s.value,l)){if(s.children===i.children&&!ot.current){e=ln(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){l=s.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=nn(-1,n&-n),c.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?c.next=c:(c.next=p.next,p.next=c),f.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Ea(s.return,n,e),u.lanes|=n;break}c=c.next}}else if(s.tag===10)l=s.type===e.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error($(341));l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),Ea(l,n,e),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===e){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}Qe(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Rr(e,n),i=St(i),r=r(i),e.flags|=1,Qe(t,e,r,n),e.child;case 14:return r=e.type,i=Nt(r,e.pendingProps),i=Nt(r.type,i),Ad(t,e,r,i,n);case 15:return tp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nt(r,i),Ys(t,e),e.tag=1,lt(r)?(t=!0,uo(e)):t=!1,Rr(e,n),Xf(e,r,i),ja(e,r,i,n),Na(null,e,r,!0,t,n);case 19:return op(t,e,n);case 22:return np(t,e,n)}throw Error($(156,e.tag))};function kp(t,e){return qh(t,e)}function dv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xt(t,e,n,r){return new dv(t,e,n,r)}function zu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hv(t){if(typeof t=="function")return zu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ou)return 11;if(t===lu)return 14}return 2}function Nn(t,e){var n=t.alternate;return n===null?(n=xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xs(t,e,n,r,i,s){var l=2;if(r=t,typeof t=="function")zu(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case yr:return Jn(n.children,i,s,e);case su:l=8,i|=8;break;case Ql:return t=xt(12,n,e,i|2),t.elementType=Ql,t.lanes=s,t;case Jl:return t=xt(13,n,e,i),t.elementType=Jl,t.lanes=s,t;case Xl:return t=xt(19,n,e,i),t.elementType=Xl,t.lanes=s,t;case Oh:return $o(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Nh:l=10;break e;case Ch:l=9;break e;case ou:l=11;break e;case lu:l=14;break e;case mn:l=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=xt(l,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Jn(t,e,n,r){return t=xt(7,t,r,e),t.lanes=n,t}function $o(t,e,n,r){return t=xt(22,t,r,e),t.elementType=Oh,t.lanes=n,t.stateNode={isHidden:!1},t}function Ml(t,e,n){return t=xt(6,t,null,e),t.lanes=n,t}function Dl(t,e,n){return e=xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wl(0),this.expirationTimes=wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hu(t,e,n,r,i,s,l,u,c){return t=new fv(t,e,n,u,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bu(s),t}function pv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Sp(t){if(!t)return On;t=t._reactInternals;e:{if(ir(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(lt(n))return Sf(t,n,e)}return e}function Ep(t,e,n,r,i,s,l,u,c){return t=Hu(n,r,!0,t,i,s,l,u,c),t.context=Sp(null),n=t.current,r=Xe(),i=Pn(n),s=nn(r,i),s.callback=e??null,jn(n,s,i),t.current.lanes=i,Qi(t,i,r),at(t,r),t}function Mo(t,e,n,r){var i=e.current,s=Xe(),l=Pn(i);return n=Sp(n),e.context===null?e.context=n:e.pendingContext=n,e=nn(s,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jn(i,e,l),t!==null&&(It(t,i,l,s),Ks(t,i,l)),l}function So(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bu(t,e){Wd(t,e),(t=t.alternate)&&Wd(t,e)}function mv(){return null}var bp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wu(t){this._internalRoot=t}Do.prototype.render=Wu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Mo(t,e,null,null)};Do.prototype.unmount=Wu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;nr(function(){Mo(null,t,null,null)}),e[sn]=null}};function Do(t){this._internalRoot=t}Do.prototype.unstable_scheduleHydration=function(t){if(t){var e=tf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vn.length&&e!==0&&e<vn[n].priority;n++);vn.splice(n,0,t),n===0&&rf(t)}};function Vu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vd(){}function gv(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=So(l);s.call(f)}}var l=Ep(e,r,t,0,null,!1,!1,"",Vd);return t._reactRootContainer=l,t[sn]=l.current,Di(t.nodeType===8?t.parentNode:t),nr(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var f=So(c);u.call(f)}}var c=Hu(t,0,!1,null,null,!1,!1,"",Vd);return t._reactRootContainer=c,t[sn]=c.current,Di(t.nodeType===8?t.parentNode:t),nr(function(){Mo(e,c,n,r)}),c}function zo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var u=i;i=function(){var c=So(l);u.call(c)}}Mo(e,l,t,i)}else l=gv(n,e,t,i,r);return So(l)}Zh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gi(e.pendingLanes);n!==0&&(cu(e,n|1),at(e,be()),!(ae&6)&&(Hr=be()+500,In()))}break;case 13:nr(function(){var r=on(t,1);if(r!==null){var i=Xe();It(r,t,1,i)}}),Bu(t,1)}};du=function(t){if(t.tag===13){var e=on(t,134217728);if(e!==null){var n=Xe();It(e,t,134217728,n)}Bu(t,134217728)}};ef=function(t){if(t.tag===13){var e=Pn(t),n=on(t,e);if(n!==null){var r=Xe();It(n,t,e,r)}Bu(t,e)}};tf=function(){return de};nf=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};aa=function(t,e,n){switch(e){case"input":if(ta(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Oo(r);if(!i)throw Error($(90));Rh(r),ta(r,i)}}}break;case"textarea":Lh(t,n);break;case"select":e=n.value,e!=null&&Nr(t,!!n.multiple,e,!1)}};Hh=Mu;Bh=nr;var vv={usingClientEntryPoint:!1,Events:[Xi,kr,Oo,Fh,zh,Mu]},hi={findFiberByHostInstance:Gn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yv={bundleType:hi.bundleType,version:hi.version,rendererPackageName:hi.rendererPackageName,rendererConfig:hi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:an.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Kh(t),t===null?null:t.stateNode},findFiberByHostInstance:hi.findFiberByHostInstance||mv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Is=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Is.isDisabled&&Is.supportsFiber)try{To=Is.inject(yv),Vt=Is}catch{}}mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vv;mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vu(e))throw Error($(200));return pv(t,e,null,n)};mt.createRoot=function(t,e){if(!Vu(t))throw Error($(299));var n=!1,r="",i=bp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Hu(t,1,!1,null,null,n,!1,r,i),t[sn]=e.current,Di(t.nodeType===8?t.parentNode:t),new Wu(e)};mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Kh(e),t=t===null?null:t.stateNode,t};mt.flushSync=function(t){return nr(t)};mt.hydrate=function(t,e,n){if(!Fo(e))throw Error($(200));return zo(null,t,e,!0,n)};mt.hydrateRoot=function(t,e,n){if(!Vu(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=bp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=Ep(e,null,t,1,n??null,i,!1,s,l),t[sn]=e.current,Di(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Do(e)};mt.render=function(t,e,n){if(!Fo(e))throw Error($(200));return zo(null,t,e,!1,n)};mt.unmountComponentAtNode=function(t){if(!Fo(t))throw Error($(40));return t._reactRootContainer?(nr(function(){zo(null,null,t,!1,function(){t._reactRootContainer=null,t[sn]=null})}),!0):!1};mt.unstable_batchedUpdates=Mu;mt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Fo(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return zo(t,e,n,!1,r)};mt.version="18.3.1-next-f1338f8080-20240426";function jp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jp)}catch(t){console.error(t)}}jp(),bh.exports=mt;var wv=bh.exports,Tp,Kd=wv;Tp=Kd.createRoot,Kd.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _v={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ut=(t,e)=>{const n=ee.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:u="",children:c,...f},p)=>ee.createElement("svg",{ref:p,..._v,width:i,height:i,stroke:r,strokeWidth:l?Number(s)*24/Number(i):s,className:["lucide",`lucide-${xv(t)}`,u].join(" "),...f},[...e.map(([m,y])=>ee.createElement(m,y)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=ut("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=ut("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=ut("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=ut("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=ut("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=ut("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=ut("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=ut("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=ut("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=ut("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=ut("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=ut("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=ut("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=ut("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Fl=({onAddVideo:t,videoCount:e,onDownloadBackup:n})=>g.jsx("header",{className:"bg-white shadow-lg border-b-4 border-blue-600",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:g.jsx("div",{className:"flex items-center justify-between",children:g.jsxs("div",{className:"flex items-center space-x-6",children:[g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx("div",{className:"bg-blue-600 p-3 rounded-xl",children:g.jsx(Pp,{className:"text-white",size:32})}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ランニング動画解析"}),g.jsx("p",{className:"text-gray-600 mt-1",children:"Running Video Analysis Platform"})]})]}),g.jsxs("button",{onClick:t,className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[g.jsx(Tv,{size:20,className:"mr-2"}),"Add Video"]}),g.jsxs("div",{className:"text-center",children:[g.jsxs("div",{className:"flex items-center text-gray-600",children:[g.jsx(Cp,{size:20,className:"mr-2"}),g.jsx("span",{className:"text-2xl font-bold text-blue-600",children:e})]}),g.jsx("p",{className:"text-sm text-gray-500",children:"Videos"})]})]})})})}),Av="modulepreload",Rv=function(t){return"/"+t},qd={},es=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=Rv(c),c in qd)return;qd[c]=!0;const f=c.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":Av,f||(m.as="script"),m.crossOrigin="",m.href=c,u&&m.setAttribute("nonce",u),document.head.appendChild(m),f)return new Promise((y,b)=>{m.addEventListener("load",y),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})},Iv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>es(async()=>{const{default:r}=await Promise.resolve().then(()=>Gr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Ku extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Lv extends Ku{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Yd extends Ku{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Qd extends Ku{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var za;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(za||(za={}));var Uv=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{f(r.next(p))}catch(m){l(m)}}function c(p){try{f(r.throw(p))}catch(m){l(m)}}function f(p){p.done?s(p.value):i(p.value).then(u,c)}f((r=r.apply(t,e||[])).next())})};class $v{constructor(e,{headers:n={},customFetch:r,region:i=za.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=Iv(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Uv(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:l}=n;let u={},{region:c}=n;c||(c=this.region);const f=new URL(`${this.url}/${e}`);c&&c!=="any"&&(u["x-region"]=c,f.searchParams.set("forceFunctionRegion",c));let p;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",p=l):typeof l=="string"?(u["Content-Type"]="text/plain",p=l):typeof FormData<"u"&&l instanceof FormData?p=l:(u["Content-Type"]="application/json",p=JSON.stringify(l)));const m=yield this.fetch(f.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:p}).catch(C=>{throw new Lv(C)}),y=m.headers.get("x-relay-error");if(y&&y==="true")throw new Yd(m);if(!m.ok)throw new Qd(m);let b=((r=m.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),P;return b==="application/json"?P=yield m.json():b==="application/octet-stream"?P=yield m.blob():b==="text/event-stream"?P=m:b==="multipart/form-data"?P=yield m.formData():P=yield m.text(),{data:P,error:null,response:m}}catch(i){return{data:null,error:i,response:i instanceof Qd||i instanceof Yd?i.context:void 0}}})}}var it={},Gu={},Ho={},ts={},Bo={},Wo={},Mv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Br=Mv();const Dv=Br.fetch,Op=Br.fetch.bind(Br),Ap=Br.Headers,Fv=Br.Request,zv=Br.Response,Gr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ap,Request:Fv,Response:zv,default:Op,fetch:Dv},Symbol.toStringTag,{value:"Module"})),Hv=Gm(Gr);var Vo={};Object.defineProperty(Vo,"__esModule",{value:!0});let Bv=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Vo.default=Bv;var Rp=Je&&Je.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wo,"__esModule",{value:!0});const Wv=Rp(Hv),Vv=Rp(Vo);let Kv=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Wv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var l,u,c,f;let p=null,m=null,y=null,b=s.status,P=s.statusText;if(s.ok){if(this.method!=="HEAD"){const w=await s.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?m=w:m=JSON.parse(w))}const U=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),S=(c=s.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");U&&S&&S.length>1&&(y=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(p={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,y=null,b=406,P="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const U=await s.text();try{p=JSON.parse(U),Array.isArray(p)&&s.status===404&&(m=[],p=null,b=200,P="OK")}catch{s.status===404&&U===""?(b=204,P="No Content"):p={message:U}}if(p&&this.isMaybeSingle&&(!((f=p==null?void 0:p.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,b=200,P="OK"),p&&this.shouldThrowOnError)throw new Vv.default(p)}return{error:p,data:m,count:y,status:b,statusText:P}});return this.shouldThrowOnError||(i=i.catch(s=>{var l,u,c;return{error:{message:`${(l=s==null?void 0:s.name)!==null&&l!==void 0?l:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(u=s==null?void 0:s.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};Wo.default=Kv;var Gv=Je&&Je.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bo,"__esModule",{value:!0});const qv=Gv(Wo);let Yv=class extends qv.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const l=s?`${s}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(l,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:l="text"}={}){var u;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${f}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Bo.default=Yv;var Qv=Je&&Je.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ts,"__esModule",{value:!0});const Jv=Qv(Bo);let Xv=class extends Jv.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const l=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${l}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};ts.default=Xv;var Zv=Je&&Je.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ho,"__esModule",{value:!0});const fi=Zv(ts);let ey=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const l=(e??"*").split("").map(u=>/\s/.test(u)&&!s?"":(u==='"'&&(s=!s),u)).join("");return this.url.searchParams.set("select",l),r&&this.headers.append("Prefer",`count=${r}`),new fi.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var i;const s="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new fi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var l;const u="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(c.length>0){const f=[...new Set(c)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new fi.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(e,{count:n}={}){var r;const i="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new fi.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new fi.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Ho.default=ey;var Ip=Je&&Je.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gu,"__esModule",{value:!0});const ty=Ip(Ho),ny=Ip(ts);let ry=class Lp{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new ty.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Lp(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var l;let u;const c=new URL(`${this.url}/rpc/${e}`);let f;r||i?(u=r?"HEAD":"GET",Object.entries(n).filter(([m,y])=>y!==void 0).map(([m,y])=>[m,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([m,y])=>{c.searchParams.append(m,y)})):(u="POST",f=n);const p=new Headers(this.headers);return s&&p.set("Prefer",`count=${s}`),new ny.default({method:u,url:c,headers:p,schema:this.schemaName,body:f,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};Gu.default=ry;var qr=Je&&Je.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(it,"__esModule",{value:!0});it.PostgrestError=it.PostgrestBuilder=it.PostgrestTransformBuilder=it.PostgrestFilterBuilder=it.PostgrestQueryBuilder=it.PostgrestClient=void 0;const Up=qr(Gu);it.PostgrestClient=Up.default;const $p=qr(Ho);it.PostgrestQueryBuilder=$p.default;const Mp=qr(ts);it.PostgrestFilterBuilder=Mp.default;const Dp=qr(Bo);it.PostgrestTransformBuilder=Dp.default;const Fp=qr(Wo);it.PostgrestBuilder=Fp.default;const zp=qr(Vo);it.PostgrestError=zp.default;var iy=it.default={PostgrestClient:Up.default,PostgrestQueryBuilder:$p.default,PostgrestFilterBuilder:Mp.default,PostgrestTransformBuilder:Dp.default,PostgrestBuilder:Fp.default,PostgrestError:zp.default};const{PostgrestClient:sy,PostgrestQueryBuilder:b_,PostgrestFilterBuilder:j_,PostgrestTransformBuilder:T_,PostgrestBuilder:P_,PostgrestError:N_}=iy;class oy{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ly="2.15.5",ay=`realtime-js/${ly}`,uy="1.0.0",Ha=1e4,cy=1e3,dy=100;var Pi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Pi||(Pi={}));var Pe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Pe||(Pe={}));var Ot;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ot||(Ot={}));var Ba;(function(t){t.websocket="websocket"})(Ba||(Ba={}));var Kn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Kn||(Kn={}));class hy{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(e.slice(l,l+i));l=l+i;const c=r.decode(e.slice(l,l+s));l=l+s;const f=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:c,payload:f}}}class Hp{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(pe||(pe={}));const Jd=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,l)=>(s[l]=fy(l,t,e,i),s),{})},fy=(t,e,n,r)=>{const i=e.find(u=>u.name===t),s=i==null?void 0:i.type,l=n[t];return s&&!r.includes(s)?Bp(s,l):Wa(l)},Bp=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return vy(e,n)}switch(t){case pe.bool:return py(e);case pe.float4:case pe.float8:case pe.int2:case pe.int4:case pe.int8:case pe.numeric:case pe.oid:return my(e);case pe.json:case pe.jsonb:return gy(e);case pe.timestamp:return yy(e);case pe.abstime:case pe.date:case pe.daterange:case pe.int4range:case pe.int8range:case pe.money:case pe.reltime:case pe.text:case pe.time:case pe.timestamptz:case pe.timetz:case pe.tsrange:case pe.tstzrange:return Wa(e);default:return Wa(e)}},Wa=t=>t,py=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},my=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},gy=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},vy=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const l=t.slice(1,n);try{s=JSON.parse("["+l+"]")}catch{s=l?l.split(","):[]}return s.map(u=>Bp(e,u))}return t},yy=t=>typeof t=="string"?t.replace(" ","T"):t,Wp=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class zl{constructor(e,n,r={},i=Ha){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Xd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Xd||(Xd={}));class Ni{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ni.syncState(this.state,i,s,l),this.pendingDiffs.forEach(c=>{this.state=Ni.syncDiff(this.state,c,s,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ni.syncDiff(this.state,i,s,l),u())}),this.onJoin((i,s,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:l})}),this.onLeave((i,s,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),l=this.transformState(n),u={},c={};return this.map(s,(f,p)=>{l[f]||(c[f]=p)}),this.map(l,(f,p)=>{const m=s[f];if(m){const y=p.map(U=>U.presence_ref),b=m.map(U=>U.presence_ref),P=p.filter(U=>b.indexOf(U.presence_ref)<0),C=m.filter(U=>y.indexOf(U.presence_ref)<0);P.length>0&&(u[f]=P),C.length>0&&(c[f]=C)}else u[f]=p}),this.syncDiff(s,{joins:u,leaves:c},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(u,c)=>{var f;const p=(f=e[u])!==null&&f!==void 0?f:[];if(e[u]=this.cloneDeep(c),p.length>0){const m=e[u].map(b=>b.presence_ref),y=p.filter(b=>m.indexOf(b.presence_ref)<0);e[u].unshift(...y)}r(u,p,c)}),this.map(l,(u,c)=>{let f=e[u];if(!f)return;const p=c.map(m=>m.presence_ref);f=f.filter(m=>p.indexOf(m.presence_ref)<0),e[u]=f,i(u,f,c),f.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Zd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Zd||(Zd={}));var Ci;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ci||(Ci={}));var Jt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Jt||(Jt={}));class qu{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Pe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new zl(this,Ot.join,this.params,this.timeout),this.rejoinTimer=new Hp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pe.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Pe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ot.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Ni(this),this.broadcastEndpointURL=Wp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Pe.closed){const{config:{broadcast:l,presence:u,private:c}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(b=>b.filter))!==null&&i!==void 0?i:[],p=!!this.bindings[Ci.PRESENCE]&&this.bindings[Ci.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,m={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:p}),postgres_changes:f,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(b=>e==null?void 0:e(Jt.CHANNEL_ERROR,b)),this._onClose(()=>e==null?void 0:e(Jt.CLOSED)),this.updateJoinPayload(Object.assign({config:y},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:b})=>{var P;if(this.socket.setAuth(),b===void 0){e==null||e(Jt.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,U=(P=C==null?void 0:C.length)!==null&&P!==void 0?P:0,S=[];for(let w=0;w<U;w++){const k=C[w],{filter:{event:j,schema:O,table:R,filter:A}}=k,D=b&&b[w];if(D&&D.event===j&&D.schema===O&&D.table===R&&D.filter===A)S.push(Object.assign(Object.assign({},k),{id:D.id}));else{this.unsubscribe(),this.state=Pe.errored,e==null||e(Jt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(Jt.SUBSCRIBED);return}}).receive("error",b=>{this.state=Pe.errored,e==null||e(Jt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Jt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Pe.joined&&e===Ci.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var l,u,c;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),f.receive("ok",()=>s("ok")),f.receive("error",()=>s("error")),f.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ot.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new zl(this,Ot.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pe.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new zl(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>dy){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const l=e.toLocaleLowerCase(),{close:u,error:c,leave:f,join:p}=Ot;if(r&&[u,c,f,p].indexOf(l)>=0&&r!==this._joinRef())return;let y=this._onMessage(l,n,r);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var P,C,U;return((P=b.filter)===null||P===void 0?void 0:P.event)==="*"||((U=(C=b.filter)===null||C===void 0?void 0:C.event)===null||U===void 0?void 0:U.toLocaleLowerCase())===l}).map(b=>b.callback(y,r)):(s=this.bindings[l])===null||s===void 0||s.filter(b=>{var P,C,U,S,w,k;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const j=b.id,O=(P=b.filter)===null||P===void 0?void 0:P.event;return j&&((C=n.ids)===null||C===void 0?void 0:C.includes(j))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((U=n.data)===null||U===void 0?void 0:U.type.toLocaleLowerCase()))}else{const j=(w=(S=b==null?void 0:b.filter)===null||S===void 0?void 0:S.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return j==="*"||j===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof y=="object"&&"ids"in y){const P=y.data,{schema:C,table:U,commit_timestamp:S,type:w,errors:k}=P;y=Object.assign(Object.assign({},{schema:C,table:U,commit_timestamp:S,eventType:w,new:{},old:{},errors:k}),this._getPayloadRecords(P))}b.callback(y,r)})}_isClosed(){return this.state===Pe.closed}_isJoined(){return this.state===Pe.joined}_isJoining(){return this.state===Pe.joining}_isLeaving(){return this.state===Pe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&qu.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ot.close,{},e)}_onError(e){this._on(Ot.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Jd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Jd(e.columns,e.old_record)),n}}const Hl=()=>{},Ls={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},wy=[1e3,2e3,5e3,1e4],_y=1e4,xy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ky{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ha,this.transport=null,this.heartbeatIntervalMs=Ls.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Hl,this.ref=0,this.reconnectTimer=null,this.logger=Hl,this.conn=null,this.sendBuffer=[],this.serializer=new hy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...l)=>es(async()=>{const{default:u}=await Promise.resolve().then(()=>Gr);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...l)=>s(...l)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Ba.websocket}`,this.httpEndpoint=Wp(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=oy.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:uy}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Pi.connecting:return Kn.Connecting;case Pi.open:return Kn.Open;case Pi.closing:return Kn.Closing;default:return Kn.Closed}}isConnected(){return this.connectionState()===Kn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new qu(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,l=()=>{this.encode(e,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(cy,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ls.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:l}=n,u=l?`(${l})`:"",c=s.status||"";this.log("receive",`${c} ${r} ${i} ${u}`.trim(),s),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,s,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ot.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([xy],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:ay};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Ot.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Hp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ls.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,l,u,c,f,p;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Ha,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Ls.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:Hl,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:m=>wy[m-1]||_y,this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:(m,y)=>y(JSON.stringify(m)),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Yu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ne(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Sy extends Yu{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Va extends Yu{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Ey=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{f(r.next(p))}catch(m){l(m)}}function c(p){try{f(r.throw(p))}catch(m){l(m)}}function f(p){p.done?s(p.value):i(p.value).then(u,c)}f((r=r.apply(t,e||[])).next())})};const Vp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>es(async()=>{const{default:r}=await Promise.resolve().then(()=>Gr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},by=()=>Ey(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield es(()=>Promise.resolve().then(()=>Gr),void 0)).Response:Response}),Ka=t=>{if(Array.isArray(t))return t.map(n=>Ka(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Ka(r)}),e},jy=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var sr=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{f(r.next(p))}catch(m){l(m)}}function c(p){try{f(r.throw(p))}catch(m){l(m)}}function f(p){p.done?s(p.value):i(p.value).then(u,c)}f((r=r.apply(t,e||[])).next())})};const Bl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ty=(t,e,n)=>sr(void 0,void 0,void 0,function*(){const r=yield by();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const s=t.status||500,l=(i==null?void 0:i.statusCode)||s+"";e(new Sy(Bl(i),s,l))}).catch(i=>{e(new Va(Bl(i),i))}):e(new Va(Bl(t),t))}),Py=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(jy(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function ns(t,e,n,r,i,s){return sr(this,void 0,void 0,function*(){return new Promise((l,u)=>{t(n,Py(e,r,i,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>Ty(c,u,r))})})}function Eo(t,e,n,r){return sr(this,void 0,void 0,function*(){return ns(t,"GET",e,n,r)})}function Bt(t,e,n,r,i){return sr(this,void 0,void 0,function*(){return ns(t,"POST",e,r,i,n)})}function Ga(t,e,n,r,i){return sr(this,void 0,void 0,function*(){return ns(t,"PUT",e,r,i,n)})}function Ny(t,e,n,r){return sr(this,void 0,void 0,function*(){return ns(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Kp(t,e,n,r,i){return sr(this,void 0,void 0,function*(){return ns(t,"DELETE",e,r,i,n)})}var Ye=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{f(r.next(p))}catch(m){l(m)}}function c(p){try{f(r.throw(p))}catch(m){l(m)}}function f(p){p.done?s(p.value):i(p.value).then(u,c)}f((r=r.apply(t,e||[])).next())})};const Cy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},eh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Oy{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Vp(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return Ye(this,void 0,void 0,function*(){try{let s;const l=Object.assign(Object.assign({},eh),i);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",l.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",l.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,c&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const f=this._removeEmptyFolders(n),p=this._getFinalPath(f),m=yield(e=="PUT"?Ga:Bt)(this.fetch,`${this.url}/object/${p}`,s,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:m.Id,fullPath:m.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ne(s))return{data:null,error:s};throw s}})}upload(e,n,r){return Ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return Ye(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),l=this._getFinalPath(s),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let c;const f=Object.assign({upsert:eh.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",f.cacheControl)):(c=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType);const m=yield Ga(this.fetch,u.toString(),c,{headers:p});return{data:{path:s,fullPath:m.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ne(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Ye(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield Bt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(this.url+s.url),u=l.searchParams.get("token");if(!u)throw new Yu("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ne(r))return{data:null,error:r};throw r}})}update(e,n,r){return Ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Ye(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ne(i))return{data:null,error:i};throw i}})}copy(e,n,r){return Ye(this,void 0,void 0,function*(){try{return{data:{path:(yield Bt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ne(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return Ye(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Bt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${l}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ne(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return Ye(this,void 0,void 0,function*(){try{const i=yield Bt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ne(i))return{data:null,error:i};throw i}})}download(e,n){return Ye(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=s?`?${s}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield Eo(this.fetch,`${this.url}/${i}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ne(u))return{data:null,error:u};throw u}})}info(e){return Ye(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Eo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ka(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ne(r))return{data:null,error:r};throw r}})}exists(e){return Ye(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Ny(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ne(r)&&r instanceof Va){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${f}`)}}}remove(e){return Ye(this,void 0,void 0,function*(){try{return{data:yield Kp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ne(n))return{data:null,error:n};throw n}})}list(e,n,r){return Ye(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Cy),n),{prefix:e||""});return{data:yield Bt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ne(i))return{data:null,error:i};throw i}})}listV2(e,n){return Ye(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Bt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ne(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Ay="2.12.1",Ry={"X-Client-Info":`storage-js/${Ay}`};var cr=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{f(r.next(p))}catch(m){l(m)}}function c(p){try{f(r.throw(p))}catch(m){l(m)}}function f(p){p.done?s(p.value):i(p.value).then(u,c)}f((r=r.apply(t,e||[])).next())})};class Iy{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},Ry),n),this.fetch=Vp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return cr(this,void 0,void 0,function*(){try{return{data:yield Eo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ne(e))return{data:null,error:e};throw e}})}getBucket(e){return cr(this,void 0,void 0,function*(){try{return{data:yield Eo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ne(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return cr(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ne(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return cr(this,void 0,void 0,function*(){try{return{data:yield Ga(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ne(r))return{data:null,error:r};throw r}})}emptyBucket(e){return cr(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ne(n))return{data:null,error:n};throw n}})}deleteBucket(e){return cr(this,void 0,void 0,function*(){try{return{data:yield Kp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ne(n))return{data:null,error:n};throw n}})}}class Ly extends Iy{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new Oy(this.url,this.headers,e,this.fetch)}}const Uy="2.57.4";let yi="";typeof Deno<"u"?yi="deno":typeof document<"u"?yi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?yi="react-native":yi="node";const $y={"X-Client-Info":`supabase-js-${yi}/${Uy}`},My={headers:$y},Dy={schema:"public"},Fy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zy={};var Hy=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{f(r.next(p))}catch(m){l(m)}}function c(p){try{f(r.throw(p))}catch(m){l(m)}}function f(p){p.done?s(p.value):i(p.value).then(u,c)}f((r=r.apply(t,e||[])).next())})};const By=t=>{let e;return t?e=t:typeof fetch>"u"?e=Op:e=fetch,(...n)=>e(...n)},Wy=()=>typeof Headers>"u"?Ap:Headers,Vy=(t,e,n)=>{const r=By(n),i=Wy();return(s,l)=>Hy(void 0,void 0,void 0,function*(){var u;const c=(u=yield e())!==null&&u!==void 0?u:t;let f=new i(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},l),{headers:f}))})};var Ky=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{f(r.next(p))}catch(m){l(m)}}function c(p){try{f(r.throw(p))}catch(m){l(m)}}function f(p){p.done?s(p.value):i(p.value).then(u,c)}f((r=r.apply(t,e||[])).next())})};function Gy(t){return t.endsWith("/")?t:t+"/"}function qy(t,e){var n,r;const{db:i,auth:s,realtime:l,global:u}=t,{db:c,auth:f,realtime:p,global:m}=e,y={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},f),s),realtime:Object.assign(Object.assign({},p),l),storage:{},global:Object.assign(Object.assign(Object.assign({},m),u),{headers:Object.assign(Object.assign({},(n=m==null?void 0:m.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Ky(this,void 0,void 0,function*(){return""})};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function Yy(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Gy(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Gp="2.71.1",mr=30*1e3,qa=3,Wl=qa*mr,Qy="http://localhost:9999",Jy="supabase.auth.token",Xy={"X-Client-Info":`gotrue-js/${Gp}`},Ya="X-Supabase-Api-Version",qp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Zy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ew=10*60*1e3;class Qu extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ne(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class tw extends Qu{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function nw(t){return ne(t)&&t.name==="AuthApiError"}class Yp extends Qu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ln extends Qu{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class pn extends Ln{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rw(t){return ne(t)&&t.name==="AuthSessionMissingError"}class Us extends Ln{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $s extends Ln{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ms extends Ln{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function iw(t){return ne(t)&&t.name==="AuthImplicitGrantRedirectError"}class th extends Ln{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qa extends Ln{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Vl(t){return ne(t)&&t.name==="AuthRetryableFetchError"}class nh extends Ln{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Ja extends Ln{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const bo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rh=` 	
\r=`.split(""),sw=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<rh.length;e+=1)t[rh[e].charCodeAt(0)]=-2;for(let e=0;e<bo.length;e+=1)t[bo[e].charCodeAt(0)]=e;return t})();function ih(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(bo[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(bo[r]),e.queuedBits-=6}}function Qp(t,e,n){const r=sw[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function sh(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=l=>{aw(l,r,n)};for(let l=0;l<t.length;l+=1)Qp(t.charCodeAt(l),i,s);return e.join("")}function ow(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function lw(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}ow(r,e)}}function aw(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function uw(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Qp(t.charCodeAt(i),n,r);return new Uint8Array(e)}function cw(t){const e=[];return lw(t,n=>e.push(n)),new Uint8Array(e)}function dw(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>ih(i,n,r)),ih(null,n,r),e.join("")}function hw(t){return Math.round(Date.now()/1e3)+t}function fw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Pt=()=>typeof window<"u"&&typeof document<"u",zn={tested:!1,writable:!1},Jp=()=>{if(!Pt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zn.tested)return zn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),zn.tested=!0,zn.writable=!0}catch{zn.tested=!0,zn.writable=!1}return zn.writable};function pw(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const Xp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>es(async()=>{const{default:r}=await Promise.resolve().then(()=>Gr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},mw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",gr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Hn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},fn=async(t,e)=>{await t.removeItem(e)};class Ko{constructor(){this.promise=new Ko.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ko.promiseConstructor=Promise;function Kl(t){const e=t.split(".");if(e.length!==3)throw new Ja("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Zy.test(e[r]))throw new Ja("JWT not in base64url format");return{header:JSON.parse(sh(e[0])),payload:JSON.parse(sh(e[1])),signature:uw(e[2]),raw:{header:e[0],payload:e[1]}}}async function gw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function vw(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const l=await t(s);if(!e(s,null,l)){r(l);return}}catch(l){if(!e(s,l)){i(l);return}}})()})}function yw(t){return("0"+t.toString(16)).substr(-2)}function ww(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,yw).join("")}async function _w(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function xw(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await _w(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function dr(t,e,n=!1){const r=ww();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await gr(t,`${e}-code-verifier`,i);const s=await xw(r);return[s,r===s?"plain":"s256"]}const kw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Sw(t){const e=t.headers.get(Ya);if(!e||!e.match(kw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ew(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function bw(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const jw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function hr(t){if(!jw.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Gl(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function oh(t){return JSON.parse(JSON.stringify(t))}var Tw=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Vn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Pw=[502,503,504];async function lh(t){var e;if(!mw(t))throw new Qa(Vn(t),0);if(Pw.includes(t.status))throw new Qa(Vn(t),t.status);let n;try{n=await t.json()}catch(s){throw new Yp(Vn(s),s)}let r;const i=Sw(t);if(i&&i.getTime()>=qp["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new nh(Vn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new pn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0))throw new nh(Vn(n),t.status,n.weak_password.reasons);throw new tw(Vn(n),t.status||500,r)}const Nw=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function se(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Ya]||(s[Ya]=qp["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const l=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await Cw(t,e,n+u,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Cw(t,e,n,r,i,s){const l=Nw(e,r,i,s);let u;try{u=await t(n,Object.assign({},l))}catch(c){throw console.error(c),new Qa(Vn(c),0)}if(u.ok||await lh(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await lh(c)}}function Yt(t){var e;let n=null;Iw(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=hw(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function ah(t){const e=Yt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function wn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Ow(t){return{data:t,error:null}}function Aw(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,l=Tw(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},l);return{data:{properties:u,user:c},error:null}}function Rw(t){return t}function Iw(t){return t.access_token&&t.refresh_token&&t.expires_in}const ql=["global","local","others"];var Lw=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Uw{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Xp(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=ql[0]){if(ql.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ql.join(", ")}`);try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ne(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:wn})}catch(r){if(ne(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Lw(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Aw,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ne(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:wn})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,l,u,c;try{const f={nextPage:null,lastPage:0,total:0},p=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Rw});if(p.error)throw p.error;const m=await p.json(),y=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(c=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return b.length>0&&(b.forEach(P=>{const C=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(P.split(";")[1].split("=")[1]);f[`${U}Page`]=C}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(ne(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){hr(e);try{return await se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:wn})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){hr(e);try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:wn})}catch(r){if(ne(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){hr(e);try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:wn})}catch(r){if(ne(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){hr(e.userId);try{const{data:n,error:r}=await se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _deleteFactor(e){hr(e.userId),hr(e.id);try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}}function uh(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function $w(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const fr={debug:!!(globalThis&&Jp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Mw extends Zp{}async function Dw(t,e,n){fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),fr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Mw(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(fr.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}$w();const Fw={url:Qy,storageKey:Jy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Xy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ch(t,e,n){return await n()}const pr={};class qi{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=qi.nextInstanceID,qi.nextInstanceID+=1,this.instanceID>0&&Pt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Fw),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Uw({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Xp(i.fetch),this.lock=i.lock||ch,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Pt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Dw:this.lock=ch,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Jp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=uh(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=uh(this.memoryStorage)),Pt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=pr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){pr[this.storageKey]=Object.assign(Object.assign({},pr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=pr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){pr[this.storageKey]=Object.assign(Object.assign({},pr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Gp}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=pw(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Pt()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),iw(s)){const c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:l,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ne(n)?{error:n}:{error:new Yp("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Yt}),{data:l,error:u}=s;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:p,password:m,options:y}=e;let b=null,P=null;this.flowType==="pkce"&&([b,P]=await dr(this.storage,this.storageKey)),s=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:p,password:m,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:b,code_challenge_method:P},xform:Yt})}else if("phone"in e){const{phone:p,password:m,options:y}=e;s=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(i=y==null?void 0:y.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Yt})}else throw new $s("You must provide either an email or phone number and a password");const{data:l,error:u}=s;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:l,options:u}=e;n=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:ah})}else if("phone"in e){const{phone:s,password:l,options:u}=e;n=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:ah})}else throw new $s("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Us}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,i,s,l,u,c,f,p,m,y,b;let P,C;if("message"in e)P=e.message,C=e.signature;else{const{chain:U,wallet:S,statement:w,options:k}=e;let j;if(Pt())if(typeof S=="object")j=S;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))j=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=S}const O=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const R=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),w?{statement:w}:null));let A;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")A=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)A=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)P=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),C=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${O.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(i=(r=k==null?void 0:k.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=k==null?void 0:k.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((l=k==null?void 0:k.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((u=k==null?void 0:k.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((c=k==null?void 0:k.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((f=k==null?void 0:k.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((m=(p=k==null?void 0:k.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||m===void 0)&&m.length?["Resources",...k.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const R=await j.signMessage(new TextEncoder().encode(P),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=R}}try{const{data:U,error:S}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:dw(C)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Yt});if(S)throw S;return!U||!U.session||!U.user?{data:{user:null,session:null},error:new Us}:(U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("SIGNED_IN",U.session)),{data:Object.assign({},U),error:S})}catch(U){if(ne(U))return{data:{user:null,session:null},error:U};throw U}}async _exchangeCodeForSession(e){const n=await Hn(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:l}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Yt});if(await fn(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Us}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:l})}catch(s){if(ne(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:l}=e,u=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Yt}),{data:c,error:f}=u;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Us}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:f})}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,l;try{if("email"in e){const{email:u,options:c}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await dr(this.storage,this.storageKey));const{error:m}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:u,options:c}=e,{data:f,error:p}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p}}throw new $s("You must provide either an email or phone number.")}catch(u){if(ne(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Yt});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,f=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(i){if(ne(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,l=null;return this.flowType==="pkce"&&([s,l]=await dr(this.storage,this.storageKey)),await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:l}),headers:this.headers,xform:Ow})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new pn;const{error:i}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(ne(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:l}=await se(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:l,error:u}=await se(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new $s("You must provide either an email or phone number and a type")}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Hn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Wl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await Hn(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=Gl()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,f,p)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,f,p))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:wn}):await this._useSession(async n=>{var r,i,s;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pn}:await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:wn})})}catch(n){if(ne(n))return rw(n)&&(await this._removeSession(),await fn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new pn;const l=i.session;let u=null,c=null;this.flowType==="pkce"&&e.email!=null&&([u,c]=await dr(this.storage,this.storageKey));const{data:f,error:p}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:c}),jwt:l.access_token,xform:wn});if(p)throw p;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(ne(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new pn;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:l}=Kl(e.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{session:u,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};s=u}else{const{data:u,error:c}=await this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(ne(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new pn;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Pt())throw new Ms("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ms(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new th("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ms("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new th("No code detected.");const{data:w,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:l,expires_in:u,expires_at:c,token_type:f}=e;if(!s||!u||!l||!f)throw new Ms("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(u);let y=p+m;c&&(y=parseInt(c));const b=y-p;b*1e3<=mr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${m}s`);const P=y-m;p-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,y,p):p-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,y,p);const{data:C,error:U}=await this._getUser(s);if(U)throw U;const S={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:m,expires_at:y,refresh_token:l,token_type:f,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(r){if(ne(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Hn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(nw(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await fn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=fw(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await dr(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var l,u,c,f,p;const{data:m,error:y}=s;if(y)throw y;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return Pt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ne(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:l}=n;if(l)throw l;return await se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await vw(async i=>(i>0&&await gw(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Yt})),(i,s)=>{const l=200*Math.pow(2,i);return s&&Vl(s)&&Date.now()+l-r<mr})}catch(r){if(this._debug(n,"error",r),ne(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Pt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Hn(this.storage,this.storageKey);if(i&&this.userStorage){let l=await Hn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await gr(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:Gl()}else if(i&&!i.user&&!i.user){const l=await Hn(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await fn(this.storage,this.storageKey+"-user"),await gr(this.storage,this.storageKey,i)):i.user=Gl()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Wl;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Wl}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),Vl(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(i.access_token);!u&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new pn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ko;const{data:s,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!s.session)throw new pn;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const u={session:s.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(s){if(this._debug(i,"error",s),ne(s)){const l={session:null,error:s};return Vl(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(c){s.push(c)}});if(await Promise.all(l),s.length>0){for(let u=0;u<s.length;u+=1)console.error(s[u]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await gr(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=oh(i);await gr(this.storage,this.storageKey,s)}else{const i=oh(n);await gr(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await fn(this.storage,this.storageKey),await fn(this.storage,this.storageKey+"-code-verifier"),await fn(this.storage,this.storageKey+"-user"),this.userStorage&&await fn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Pt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),mr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/mr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${mr}ms, refresh threshold is ${qa} ticks`),i<=qa&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Zp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,l]=await dr(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:f}=await se(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:l,error:u}=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(n){if(ne(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ne(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),s=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Kl(i.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const p=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(u=>u.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+ew>i)return r;const{data:s,error:l}=await se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:b,error:P}=await this.getSession();if(P||!b.session)return{data:null,error:P};r=b.session.access_token}const{header:i,payload:s,signature:l,raw:{header:u,payload:c}}=Kl(r);n!=null&&n.allowExpired||Ew(s.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:s,header:i,signature:l},error:null}}const p=bw(i.alg),m=await crypto.subtle.importKey("jwk",f,p,!0,["verify"]);if(!await crypto.subtle.verify(p,m,l,cw(`${u}.${c}`)))throw new Ja("Invalid JWT signature");return{data:{claims:s,header:i,signature:l},error:null}}catch(r){if(ne(r))return{data:null,error:r};throw r}}}qi.nextInstanceID=0;const zw=qi;class Hw extends zw{constructor(e){super(e)}}var Bw=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{f(r.next(p))}catch(m){l(m)}}function c(p){try{f(r.throw(p))}catch(m){l(m)}}function f(p){p.done?s(p.value):i(p.value).then(u,c)}f((r=r.apply(t,e||[])).next())})};class Ww{constructor(e,n,r){var i,s,l;this.supabaseUrl=e,this.supabaseKey=n;const u=Yy(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:Dy,realtime:zy,auth:Object.assign(Object.assign({},Fy),{storageKey:c}),global:My},p=qy(r??{},f);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=p.auth)!==null&&l!==void 0?l:{},this.headers,p.global.fetch),this.fetch=Vy(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new sy(new URL("rest/v1",u).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new Ly(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new $v(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Bw(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:l,flowType:u,lock:c,debug:f},p,m){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Hw({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),p),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:u,lock:c,debug:f,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new ky(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Vw=(t,e,n)=>new Ww(t,e,n);function Kw(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Kw()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const tn="https://sxqklqbtonwezyiuszkj.supabase.co",Lr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4cWtscWJ0b253ZXp5aXVzemtqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1OTMyNjksImV4cCI6MjA3MTE2OTI2OX0.mWR6XETbcTi9u7p7nn_7ALobBnc0wDi8WSogF0MH0fw",em=tn.startsWith("https://")&&tn.includes(".supabase.co")&&Lr.length>100;console.log("Supabase設定状況:",{url:`${tn.substring(0,30)}...`,urlValid:tn.startsWith("https://")&&tn.includes(".supabase.co"),key:`${Lr.substring(0,20)}...`,keyValid:Lr.length>100,urlLength:tn.length,keyLength:Lr.length,configured:em});const ce=em?Vw(tn,Lr,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"running-video-app"}}}):null,Gw=()=>tn.startsWith("https://")?tn.includes(".supabase.co")?Lr.length<100?"VITE_SUPABASE_ANON_KEY appears to be invalid (too short)":null:"VITE_SUPABASE_URL must be a valid Supabase URL (contains .supabase.co)":"VITE_SUPABASE_URL must start with https://",tm=async()=>{if(!ce)throw new Error("Supabase not initialized");const{data:{user:t}}=await ce.auth.getUser();if(!t){const e="demo@example.com",n="demo123456";console.log("🔐 Attempting to sign in demo user...");const{data:r,error:i}=await ce.auth.signInWithPassword({email:e,password:n});if(i){console.log("👤 Demo user not found, creating new user...");const{data:s,error:l}=await ce.auth.signUp({email:e,password:n});if(l){console.log("🔄 Sign up failed, trying sign in again...");const{data:u,error:c}=await ce.auth.signInWithPassword({email:e,password:n});if(c)throw console.error("❌ All authentication attempts failed:",c),new Error(`Failed to authenticate: ${c.message}`);return console.log("✅ Demo user signed in on retry"),u.user}return console.log("✅ Demo user created successfully"),s.user}return console.log("✅ Demo user signed in successfully"),r.user}return console.log("✅ User already authenticated:",t.email),t};ce?console.log("✅ Supabaseクライアントが正常に初期化されました"):(console.error("❌ Supabaseクライアントが初期化されていません"),console.error("📋 設定手順:"),console.error("1. 画面右上の設定アイコンをクリック"),console.error('2. "Supabase"ボタンをクリック'),console.error("3. プロジェクトURLとAPIキーを入力"),console.error("4. ページをリロード"));var qw={};(function(){var t;function e(o){var a=0;return function(){return a<o.length?{done:!1,value:o[a++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,a,d){return o==Array.prototype||o==Object.prototype||(o[a]=d.value),o};function r(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Je=="object"&&Je];for(var a=0;a<o.length;++a){var d=o[a];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var i=r(this);function s(o,a){if(a)e:{var d=i;o=o.split(".");for(var h=0;h<o.length-1;h++){var v=o[h];if(!(v in d))break e;d=d[v]}o=o[o.length-1],h=d[o],a=a(h),a!=h&&a!=null&&n(d,o,{configurable:!0,writable:!0,value:a})}}s("Symbol",function(o){function a(x){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new d(h+(x||"")+"_"+v++,x)}function d(x,_){this.h=x,n(this,"description",{configurable:!0,writable:!0,value:_})}if(o)return o;d.prototype.toString=function(){return this.h};var h="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",v=0;return a}),s("Symbol.iterator",function(o){if(o)return o;o=Symbol("Symbol.iterator");for(var a="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),d=0;d<a.length;d++){var h=i[a[d]];typeof h=="function"&&typeof h.prototype[o]!="function"&&n(h.prototype,o,{configurable:!0,writable:!0,value:function(){return l(e(this))}})}return o});function l(o){return o={next:o},o[Symbol.iterator]=function(){return this},o}function u(o){var a=typeof Symbol<"u"&&Symbol.iterator&&o[Symbol.iterator];return a?a.call(o):{next:e(o)}}function c(o){if(!(o instanceof Array)){o=u(o);for(var a,d=[];!(a=o.next()).done;)d.push(a.value);o=d}return o}var f=typeof Object.assign=="function"?Object.assign:function(o,a){for(var d=1;d<arguments.length;d++){var h=arguments[d];if(h)for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(o[v]=h[v])}return o};s("Object.assign",function(o){return o||f});var p=typeof Object.create=="function"?Object.create:function(o){function a(){}return a.prototype=o,new a},m;if(typeof Object.setPrototypeOf=="function")m=Object.setPrototypeOf;else{var y;e:{var b={a:!0},P={};try{P.__proto__=b,y=P.a;break e}catch{}y=!1}m=y?function(o,a){if(o.__proto__=a,o.__proto__!==a)throw new TypeError(o+" is not extensible");return o}:null}var C=m;function U(o,a){if(o.prototype=p(a.prototype),o.prototype.constructor=o,C)C(o,a);else for(var d in a)if(d!="prototype")if(Object.defineProperties){var h=Object.getOwnPropertyDescriptor(a,d);h&&Object.defineProperty(o,d,h)}else o[d]=a[d];o.za=a.prototype}function S(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function w(o){if(o.m)throw new TypeError("Generator is already running");o.m=!0}S.prototype.u=function(o){this.i=o};function k(o,a){o.l={ma:a,na:!0},o.h=o.s||o.v}S.prototype.return=function(o){this.l={return:o},this.h=this.v};function j(o,a,d){return o.h=d,{value:a}}function O(o){this.h=new S,this.i=o}function R(o,a){w(o.h);var d=o.h.j;return d?A(o,"return"in d?d.return:function(h){return{value:h,done:!0}},a,o.h.return):(o.h.return(a),D(o))}function A(o,a,d,h){try{var v=a.call(o.h.j,d);if(!(v instanceof Object))throw new TypeError("Iterator result "+v+" is not an object");if(!v.done)return o.h.m=!1,v;var x=v.value}catch(_){return o.h.j=null,k(o.h,_),D(o)}return o.h.j=null,h.call(o.h,x),D(o)}function D(o){for(;o.h.h;)try{var a=o.i(o.h);if(a)return o.h.m=!1,{value:a.value,done:!1}}catch(d){o.h.i=void 0,k(o.h,d)}if(o.h.m=!1,o.h.l){if(a=o.h.l,o.h.l=null,a.na)throw a.ma;return{value:a.return,done:!0}}return{value:void 0,done:!0}}function T(o){this.next=function(a){return w(o.h),o.h.j?a=A(o,o.h.j.next,a,o.h.u):(o.h.u(a),a=D(o)),a},this.throw=function(a){return w(o.h),o.h.j?a=A(o,o.h.j.throw,a,o.h.u):(k(o.h,a),a=D(o)),a},this.return=function(a){return R(o,a)},this[Symbol.iterator]=function(){return this}}function L(o){function a(h){return o.next(h)}function d(h){return o.throw(h)}return new Promise(function(h,v){function x(_){_.done?h(_.value):Promise.resolve(_.value).then(a,d).then(x,v)}x(o.next())})}function K(o){return L(new T(new O(o)))}s("Promise",function(o){function a(_){this.i=0,this.j=void 0,this.h=[],this.u=!1;var E=this.l();try{_(E.resolve,E.reject)}catch(N){E.reject(N)}}function d(){this.h=null}function h(_){return _ instanceof a?_:new a(function(E){E(_)})}if(o)return o;d.prototype.i=function(_){if(this.h==null){this.h=[];var E=this;this.j(function(){E.m()})}this.h.push(_)};var v=i.setTimeout;d.prototype.j=function(_){v(_,0)},d.prototype.m=function(){for(;this.h&&this.h.length;){var _=this.h;this.h=[];for(var E=0;E<_.length;++E){var N=_[E];_[E]=null;try{N()}catch(I){this.l(I)}}}this.h=null},d.prototype.l=function(_){this.j(function(){throw _})},a.prototype.l=function(){function _(I){return function(z){N||(N=!0,I.call(E,z))}}var E=this,N=!1;return{resolve:_(this.I),reject:_(this.m)}},a.prototype.I=function(_){if(_===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(_ instanceof a)this.L(_);else{e:switch(typeof _){case"object":var E=_!=null;break e;case"function":E=!0;break e;default:E=!1}E?this.F(_):this.s(_)}},a.prototype.F=function(_){var E=void 0;try{E=_.then}catch(N){this.m(N);return}typeof E=="function"?this.M(E,_):this.s(_)},a.prototype.m=function(_){this.v(2,_)},a.prototype.s=function(_){this.v(1,_)},a.prototype.v=function(_,E){if(this.i!=0)throw Error("Cannot settle("+_+", "+E+"): Promise already settled in state"+this.i);this.i=_,this.j=E,this.i===2&&this.K(),this.H()},a.prototype.K=function(){var _=this;v(function(){if(_.D()){var E=i.console;typeof E<"u"&&E.error(_.j)}},1)},a.prototype.D=function(){if(this.u)return!1;var _=i.CustomEvent,E=i.Event,N=i.dispatchEvent;return typeof N>"u"?!0:(typeof _=="function"?_=new _("unhandledrejection",{cancelable:!0}):typeof E=="function"?_=new E("unhandledrejection",{cancelable:!0}):(_=i.document.createEvent("CustomEvent"),_.initCustomEvent("unhandledrejection",!1,!0,_)),_.promise=this,_.reason=this.j,N(_))},a.prototype.H=function(){if(this.h!=null){for(var _=0;_<this.h.length;++_)x.i(this.h[_]);this.h=null}};var x=new d;return a.prototype.L=function(_){var E=this.l();_.T(E.resolve,E.reject)},a.prototype.M=function(_,E){var N=this.l();try{_.call(E,N.resolve,N.reject)}catch(I){N.reject(I)}},a.prototype.then=function(_,E){function N(V,H){return typeof V=="function"?function(J){try{I(V(J))}catch(ie){z(ie)}}:H}var I,z,Q=new a(function(V,H){I=V,z=H});return this.T(N(_,I),N(E,z)),Q},a.prototype.catch=function(_){return this.then(void 0,_)},a.prototype.T=function(_,E){function N(){switch(I.i){case 1:_(I.j);break;case 2:E(I.j);break;default:throw Error("Unexpected state: "+I.i)}}var I=this;this.h==null?x.i(N):this.h.push(N),this.u=!0},a.resolve=h,a.reject=function(_){return new a(function(E,N){N(_)})},a.race=function(_){return new a(function(E,N){for(var I=u(_),z=I.next();!z.done;z=I.next())h(z.value).T(E,N)})},a.all=function(_){var E=u(_),N=E.next();return N.done?h([]):new a(function(I,z){function Q(J){return function(ie){V[J]=ie,H--,H==0&&I(V)}}var V=[],H=0;do V.push(void 0),H++,h(N.value).T(Q(V.length-1),z),N=E.next();while(!N.done)})},a});function re(o,a){o instanceof String&&(o+="");var d=0,h=!1,v={next:function(){if(!h&&d<o.length){var x=d++;return{value:a(x,o[x]),done:!1}}return h=!0,{done:!0,value:void 0}}};return v[Symbol.iterator]=function(){return v},v}s("Array.prototype.keys",function(o){return o||function(){return re(this,function(a){return a})}}),s("Array.prototype.fill",function(o){return o||function(a,d,h){var v=this.length||0;for(0>d&&(d=Math.max(0,v+d)),(h==null||h>v)&&(h=v),h=Number(h),0>h&&(h=Math.max(0,v+h)),d=Number(d||0);d<h;d++)this[d]=a;return this}});function te(o){return o||Array.prototype.fill}s("Int8Array.prototype.fill",te),s("Uint8Array.prototype.fill",te),s("Uint8ClampedArray.prototype.fill",te),s("Int16Array.prototype.fill",te),s("Uint16Array.prototype.fill",te),s("Int32Array.prototype.fill",te),s("Uint32Array.prototype.fill",te),s("Float32Array.prototype.fill",te),s("Float64Array.prototype.fill",te),s("Object.is",function(o){return o||function(a,d){return a===d?a!==0||1/a===1/d:a!==a&&d!==d}}),s("Array.prototype.includes",function(o){return o||function(a,d){var h=this;h instanceof String&&(h=String(h));var v=h.length;for(d=d||0,0>d&&(d=Math.max(d+v,0));d<v;d++){var x=h[d];if(x===a||Object.is(x,a))return!0}return!1}}),s("String.prototype.includes",function(o){return o||function(a,d){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(a,d||0)!==-1}});var M=this||self;function G(o,a){o=o.split(".");var d=M;o[0]in d||typeof d.execScript>"u"||d.execScript("var "+o[0]);for(var h;o.length&&(h=o.shift());)o.length||a===void 0?d[h]&&d[h]!==Object.prototype[h]?d=d[h]:d=d[h]={}:d[h]=a}function le(o){var a;e:{if((a=M.navigator)&&(a=a.userAgent))break e;a=""}return a.indexOf(o)!=-1}var Ae=Array.prototype.map?function(o,a){return Array.prototype.map.call(o,a,void 0)}:function(o,a){for(var d=o.length,h=Array(d),v=typeof o=="string"?o.split(""):o,x=0;x<d;x++)x in v&&(h[x]=a.call(void 0,v[x],x,o));return h},F={},W=null;function q(o){var a=o.length,d=3*a/4;d%3?d=Math.floor(d):"=.".indexOf(o[a-1])!=-1&&(d="=.".indexOf(o[a-2])!=-1?d-2:d-1);var h=new Uint8Array(d),v=0;return Y(o,function(x){h[v++]=x}),v!==d?h.subarray(0,v):h}function Y(o,a){function d(N){for(;h<o.length;){var I=o.charAt(h++),z=W[I];if(z!=null)return z;if(!/^[\s\xa0]*$/.test(I))throw Error("Unknown base64 encoding at char: "+I)}return N}Z();for(var h=0;;){var v=d(-1),x=d(0),_=d(64),E=d(64);if(E===64&&v===-1)break;a(v<<2|x>>4),_!=64&&(a(x<<4&240|_>>2),E!=64&&a(_<<6&192|E))}}function Z(){if(!W){W={};for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),a=["+/=","+/","-_=","-_.","-_"],d=0;5>d;d++){var h=o.concat(a[d].split(""));F[d]=h;for(var v=0;v<h.length;v++){var x=h[v];W[x]===void 0&&(W[x]=v)}}}}var qe=typeof Uint8Array<"u",ze=!(le("Trident")||le("MSIE"))&&typeof M.btoa=="function";function vt(o){if(!ze){var a;a===void 0&&(a=0),Z(),a=F[a];for(var d=Array(Math.floor(o.length/3)),h=a[64]||"",v=0,x=0;v<o.length-2;v+=3){var _=o[v],E=o[v+1],N=o[v+2],I=a[_>>2];_=a[(_&3)<<4|E>>4],E=a[(E&15)<<2|N>>6],N=a[N&63],d[x++]=I+_+E+N}switch(I=0,N=h,o.length-v){case 2:I=o[v+1],N=a[(I&15)<<2]||h;case 1:o=o[v],d[x]=a[o>>2]+a[(o&3)<<4|I>>4]+N+h}return d.join("")}for(a="";10240<o.length;)a+=String.fromCharCode.apply(null,o.subarray(0,10240)),o=o.subarray(10240);return a+=String.fromCharCode.apply(null,o),btoa(a)}var He=RegExp("[-_.]","g");function ct(o){switch(o){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function un(o){if(!ze)return q(o);He.test(o)&&(o=o.replace(He,ct)),o=atob(o);for(var a=new Uint8Array(o.length),d=0;d<o.length;d++)a[d]=o.charCodeAt(d);return a}var cn;function Un(){return cn||(cn=new Uint8Array(0))}var Gt={},Ut=typeof Uint8Array.prototype.slice=="function",he=0,X=0;function Be(o){var a=0>o;o=Math.abs(o);var d=o>>>0;o=Math.floor((o-d)/4294967296),a&&(d=u(is(d,o)),a=d.next().value,o=d.next().value,d=a),he=d>>>0,X=o>>>0}var rs=typeof BigInt=="function";function is(o,a){return a=~a,o?o=~o+1:a+=1,[o,a]}function ss(o,a){this.i=o>>>0,this.h=a>>>0}function Yr(o){if(!o)return je||(je=new ss(0,0));if(!/^-?\d+$/.test(o))return null;if(16>o.length)Be(Number(o));else if(rs)o=BigInt(o),he=Number(o&BigInt(4294967295))>>>0,X=Number(o>>BigInt(32)&BigInt(4294967295));else{var a=+(o[0]==="-");X=he=0;for(var d=o.length,h=a,v=(d-a)%6+a;v<=d;h=v,v+=6)h=Number(o.slice(h,v)),X*=1e6,he=1e6*he+h,4294967296<=he&&(X+=he/4294967296|0,he%=4294967296);a&&(a=u(is(he,X)),o=a.next().value,a=a.next().value,he=o,X=a)}return new ss(he,X)}var je;function Le(o,a){return Error("Invalid wire type: "+o+" (at position "+a+")")}function or(){return Error("Failed to read varint, encoding is invalid.")}function Qr(o,a){return Error("Tried to read past the end of the data "+a+" > "+o)}function $n(){throw Error("Invalid UTF8")}function Ju(o,a){return a=String.fromCharCode.apply(null,a),o==null?a:o+a}var os=void 0,Go,nm=typeof TextDecoder<"u",Xu,rm=typeof TextEncoder<"u",Zu;function ec(o){if(o!==Gt)throw Error("illegal external caller")}function Jr(o,a){if(ec(a),this.V=o,o!=null&&o.length===0)throw Error("ByteString should be constructed with non-empty values")}function qo(){return Zu||(Zu=new Jr(null,Gt))}function tc(o){ec(Gt);var a=o.V;return a=a==null||qe&&a!=null&&a instanceof Uint8Array?a:typeof a=="string"?un(a):null,a==null?a:o.V=a}function im(o){if(typeof o=="string")return{buffer:un(o),C:!1};if(Array.isArray(o))return{buffer:new Uint8Array(o),C:!1};if(o.constructor===Uint8Array)return{buffer:o,C:!1};if(o.constructor===ArrayBuffer)return{buffer:new Uint8Array(o),C:!1};if(o.constructor===Jr)return{buffer:tc(o)||Un(),C:!0};if(o instanceof Uint8Array)return{buffer:new Uint8Array(o.buffer,o.byteOffset,o.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function nc(o,a){this.i=null,this.m=!1,this.h=this.j=this.l=0,Yo(this,o,a)}function Yo(o,a,d){d=d===void 0?{}:d,o.S=d.S===void 0?!1:d.S,a&&(a=im(a),o.i=a.buffer,o.m=a.C,o.l=0,o.j=o.i.length,o.h=o.l)}nc.prototype.reset=function(){this.h=this.l};function Mn(o,a){if(o.h=a,a>o.j)throw Qr(o.j,a)}function Xr(o){var a=o.i,d=o.h,h=a[d++],v=h&127;if(h&128&&(h=a[d++],v|=(h&127)<<7,h&128&&(h=a[d++],v|=(h&127)<<14,h&128&&(h=a[d++],v|=(h&127)<<21,h&128&&(h=a[d++],v|=h<<28,h&128&&a[d++]&128&&a[d++]&128&&a[d++]&128&&a[d++]&128&&a[d++]&128)))))throw or();return Mn(o,d),v}function rc(o,a){if(0>a)throw Error("Tried to read a negative byte length: "+a);var d=o.h,h=d+a;if(h>o.j)throw Qr(a,o.j-d);return o.h=h,d}var ic=[];function Qo(){this.h=[]}Qo.prototype.length=function(){return this.h.length},Qo.prototype.end=function(){var o=this.h;return this.h=[],o};function sc(o,a,d){for(;0<d||127<a;)o.h.push(a&127|128),a=(a>>>7|d<<25)>>>0,d>>>=7;o.h.push(a)}function Dn(o,a){for(;127<a;)o.h.push(a&127|128),a>>>=7;o.h.push(a)}function Jo(o,a){if(ic.length){var d=ic.pop();Yo(d,o,a),o=d}else o=new nc(o,a);this.h=o,this.j=this.h.h,this.i=this.l=-1,this.setOptions(a)}Jo.prototype.setOptions=function(o){o=o===void 0?{}:o,this.ca=o.ca===void 0?!1:o.ca},Jo.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function oc(o){var a=o.h;if(a.h==a.j)return!1;o.j=o.h.h;var d=Xr(o.h)>>>0;if(a=d>>>3,d&=7,!(0<=d&&5>=d))throw Le(d,o.j);if(1>a)throw Error("Invalid field number: "+a+" (at position "+o.j+")");return o.l=a,o.i=d,!0}function ls(o){switch(o.i){case 0:if(o.i!=0)ls(o);else e:{o=o.h;for(var a=o.h,d=a+10,h=o.i;a<d;)if(!(h[a++]&128)){Mn(o,a);break e}throw or()}break;case 1:o=o.h,Mn(o,o.h+8);break;case 2:o.i!=2?ls(o):(a=Xr(o.h)>>>0,o=o.h,Mn(o,o.h+a));break;case 5:o=o.h,Mn(o,o.h+4);break;case 3:a=o.l;do{if(!oc(o))throw Error("Unmatched start-group tag: stream EOF");if(o.i==4){if(o.l!=a)throw Error("Unmatched end-group tag");break}ls(o)}while(!0);break;default:throw Le(o.i,o.j)}}var as=[];function sm(){this.j=[],this.i=0,this.h=new Qo}function lr(o,a){a.length!==0&&(o.j.push(a),o.i+=a.length)}function om(o,a){if(a=a.R){lr(o,o.h.end());for(var d=0;d<a.length;d++)lr(o,tc(a[d])||Un())}}var qt=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function Fn(o,a){return qt?o[qt]|=a:o.A!==void 0?o.A|=a:(Object.defineProperties(o,{A:{value:a,configurable:!0,writable:!0,enumerable:!1}}),a)}function lc(o,a){qt?o[qt]&&(o[qt]&=~a):o.A!==void 0&&(o.A&=~a)}function Ee(o){var a;return qt?a=o[qt]:a=o.A,a??0}function $t(o,a){qt?o[qt]=a:o.A!==void 0?o.A=a:Object.defineProperties(o,{A:{value:a,configurable:!0,writable:!0,enumerable:!1}})}function Xo(o){return Fn(o,1),o}function lm(o,a){$t(a,(o|0)&-51)}function us(o,a){$t(a,(o|18)&-41)}var Zo={};function cs(o){return o!==null&&typeof o=="object"&&!Array.isArray(o)&&o.constructor===Object}var Zr,ac=[];$t(ac,23),Zr=Object.freeze(ac);function el(o){if(Ee(o.o)&2)throw Error("Cannot mutate an immutable Message")}function tl(o){var a=o.length;(a=a?o[a-1]:void 0)&&cs(a)?a.g=1:(a={},o.push((a.g=1,a)))}function uc(o){var a=o.i+o.G;return o.B||(o.B=o.o[a]={})}function bt(o,a){return a===-1?null:a>=o.i?o.B?o.B[a]:void 0:o.o[a+o.G]}function Mt(o,a,d,h){el(o),ei(o,a,d,h)}function ei(o,a,d,h){o.j&&(o.j=void 0),a>=o.i||h?uc(o)[a]=d:(o.o[a+o.G]=d,(o=o.B)&&a in o&&delete o[a])}function nl(o,a,d,h){var v=bt(o,a);Array.isArray(v)||(v=Zr);var x=Ee(v);if(x&1||Xo(v),h)x&2||Fn(v,2),d&1||Object.freeze(v);else{h=!(d&2);var _=x&2;d&1||!_?h&&x&16&&!_&&lc(v,16):(v=Xo(Array.prototype.slice.call(v)),ei(o,a,v))}return v}function rl(o,a){var d=bt(o,a),h=d==null?d:typeof d=="number"||d==="NaN"||d==="Infinity"||d==="-Infinity"?Number(d):void 0;return h!=null&&h!==d&&ei(o,a,h),h}function cc(o,a,d,h,v){o.h||(o.h={});var x=o.h[d],_=nl(o,d,3,v);if(!x){var E=_;x=[];var N=!!(Ee(o.o)&16);_=!!(Ee(E)&2);var I=E;!v&&_&&(E=Array.prototype.slice.call(E));for(var z=_,Q=0;Q<E.length;Q++){var V=E[Q],H=a,J=!1;if(J=J===void 0?!1:J,V=Array.isArray(V)?new H(V):J?new H:void 0,V!==void 0){H=V.o;var ie=J=Ee(H);_&&(ie|=2),N&&(ie|=16),ie!=J&&$t(H,ie),H=ie,z=z||!!(2&H),x.push(V)}}return o.h[d]=x,N=Ee(E),a=N|33,a=z?a&-9:a|8,N!=a&&(z=E,Object.isFrozen(z)&&(z=Array.prototype.slice.call(z)),$t(z,a),E=z),I!==E&&ei(o,d,E),(v||h&&_)&&Fn(x,2),h&&Object.freeze(x),x}return v||(v=Object.isFrozen(x),h&&!v?Object.freeze(x):!h&&v&&(x=Array.prototype.slice.call(x),o.h[d]=x)),x}function il(o,a,d){var h=!!(Ee(o.o)&2);if(a=cc(o,a,d,h,h),o=nl(o,d,3,h),!(h||Ee(o)&8)){for(h=0;h<a.length;h++){if(d=a[h],Ee(d.o)&2){var v=gc(d,!1);v.j=d}else v=d;d!==v&&(a[h]=v,o[h]=v.o)}Fn(o,8)}return a}function Dt(o,a,d){if(d!=null&&typeof d!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof d+": "+d);Mt(o,a,d)}function dc(o,a,d,h,v){el(o);var x=cc(o,d,a,!1,!1);return d=h??new d,o=nl(o,a,2,!1),v!=null?(x.splice(v,0,d),o.splice(v,0,d.o)):(x.push(d),o.push(d.o)),d.C()&&lc(o,8),d}function ds(o,a){return o??a}function Ft(o,a,d){return d=d===void 0?0:d,ds(rl(o,a),d)}var hs;function am(o){switch(typeof o){case"number":return isFinite(o)?o:String(o);case"object":if(o)if(Array.isArray(o)){if(Ee(o)&128)return o=Array.prototype.slice.call(o),tl(o),o}else{if(qe&&o!=null&&o instanceof Uint8Array)return vt(o);if(o instanceof Jr){var a=o.V;return a==null?"":typeof a=="string"?a:o.V=vt(a)}}}return o}function hc(o,a,d,h){if(o!=null){if(Array.isArray(o))o=sl(o,a,d,h!==void 0);else if(cs(o)){var v={},x;for(x in o)v[x]=hc(o[x],a,d,h);o=v}else o=a(o,h);return o}}function sl(o,a,d,h){var v=Ee(o);h=h?!!(v&16):void 0,o=Array.prototype.slice.call(o);for(var x=0;x<o.length;x++)o[x]=hc(o[x],a,d,h);return d(v,o),o}function um(o){return o.ja===Zo?o.toJSON():am(o)}function cm(o,a){o&128&&tl(a)}function fc(o,a,d){if(d=d===void 0?us:d,o!=null){if(qe&&o instanceof Uint8Array)return o.length?new Jr(new Uint8Array(o),Gt):qo();if(Array.isArray(o)){var h=Ee(o);return h&2?o:a&&!(h&32)&&(h&16||h===0)?($t(o,h|2),o):(o=sl(o,fc,h&4?us:d,!0),a=Ee(o),a&4&&a&2&&Object.freeze(o),o)}return o.ja===Zo?mc(o):o}}function pc(o,a,d,h,v,x,_){if(o=o.h&&o.h[d]){if(h=Ee(o),h&2?h=o:(x=Ae(o,mc),us(h,x),Object.freeze(x),h=x),el(a),_=h==null?Zr:Xo([]),h!=null){for(x=!!h.length,o=0;o<h.length;o++){var E=h[o];x=x&&!(Ee(E.o)&2),_[o]=E.o}x=(x?8:0)|1,o=Ee(_),(o&x)!==x&&(Object.isFrozen(_)&&(_=Array.prototype.slice.call(_)),$t(_,o|x)),a.h||(a.h={}),a.h[d]=h}else a.h&&(a.h[d]=void 0);ei(a,d,_,v)}else Mt(a,d,fc(h,x,_),v)}function mc(o){return Ee(o.o)&2||(o=gc(o,!0),Fn(o.o,2)),o}function gc(o,a){var d=o.o,h=[];Fn(h,16);var v=o.constructor.h;if(v&&h.push(v),v=o.B,v){h.length=d.length,h.fill(void 0,h.length,d.length);var x={};h[h.length-1]=x}Ee(d)&128&&tl(h),a=a||o.C()?us:lm,x=o.constructor,hs=h,h=new x(h),hs=void 0,o.R&&(h.R=o.R.slice()),x=!!(Ee(d)&16);for(var _=v?d.length-1:d.length,E=0;E<_;E++)pc(o,h,E-o.G,d[E],!1,x,a);if(v)for(var N in v)pc(o,h,+N,v[N],!0,x,a);return h}function tt(o,a,d){o==null&&(o=hs),hs=void 0;var h=this.constructor.i||0,v=0<h,x=this.constructor.h,_=!1;if(o==null){o=x?[x]:[];var E=48,N=!0;v&&(h=0,E|=128),$t(o,E)}else{if(!Array.isArray(o)||x&&x!==o[0])throw Error();var I=E=Fn(o,0);if((N=(16&I)!==0)&&((_=(32&I)!==0)||(I|=32)),v){if(128&I)h=0;else if(0<o.length){var z=o[o.length-1];if(cs(z)&&"g"in z){h=0,I|=128,delete z.g;var Q=!0,V;for(V in z){Q=!1;break}Q&&o.pop()}}}else if(128&I)throw Error();E!==I&&$t(o,I)}this.G=(x?0:-1)-h,this.h=void 0,this.o=o;e:{if(x=this.o.length,h=x-1,x&&(x=this.o[h],cs(x))){this.B=x,this.i=h-this.G;break e}a!==void 0&&-1<a?(this.i=Math.max(a,h+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!v&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(d){a=N&&!_&&!0,v=this.i;var H;for(N=0;N<d.length;N++)_=d[N],_<v?(_+=this.G,(h=o[_])?vc(h,a):o[_]=Zr):(H||(H=uc(this)),(h=H[_])?vc(h,a):H[_]=Zr)}}tt.prototype.toJSON=function(){return sl(this.o,um,cm)},tt.prototype.C=function(){return!!(Ee(this.o)&2)};function vc(o,a){if(Array.isArray(o)){var d=Ee(o),h=1;!a||d&2||(h|=16),(d&h)!==h&&$t(o,d|h)}}tt.prototype.ja=Zo,tt.prototype.toString=function(){return this.o.toString()};function yc(o,a,d){if(d){var h={},v;for(v in d){var x=d[v],_=x.ra;_||(h.J=x.xa||x.oa.W,x.ia?(h.aa=Sc(x.ia),_=function(E){return function(N,I,z){return E.J(N,I,z,E.aa)}}(h)):x.ka?(h.Z=Ec(x.da.P,x.ka),_=function(E){return function(N,I,z){return E.J(N,I,z,E.Z)}}(h)):_=h.J,x.ra=_),_(a,o,x.da),h={J:h.J,aa:h.aa,Z:h.Z}}}om(a,o)}var fs=Symbol();function wc(o,a,d){return o[fs]||(o[fs]=function(h,v){return a(h,v,d)})}function _c(o){var a=o[fs];if(!a){var d=ll(o);a=function(h,v){return bc(h,v,d)},o[fs]=a}return a}function dm(o){var a=o.ia;if(a)return _c(a);if(a=o.wa)return wc(o.da.P,a,o.ka)}function hm(o){var a=dm(o),d=o.da,h=o.oa.U;return a?function(v,x){return h(v,x,d,a)}:function(v,x){return h(v,x,d)}}function xc(o,a){var d=o[a];return typeof d=="function"&&d.length===0&&(d=d(),o[a]=d),Array.isArray(d)&&(ni in d||ti in d||0<d.length&&typeof d[0]=="function")?d:void 0}function kc(o,a,d,h,v,x){a.P=o[0];var _=1;if(o.length>_&&typeof o[_]!="number"){var E=o[_++];d(a,E)}for(;_<o.length;){d=o[_++];for(var N=_+1;N<o.length&&typeof o[N]!="number";)N++;switch(E=o[_++],N-=_,N){case 0:h(a,d,E);break;case 1:(N=xc(o,_))?(_++,v(a,d,E,N)):h(a,d,E,o[_++]);break;case 2:N=_++,N=xc(o,N),v(a,d,E,N,o[_++]);break;case 3:x(a,d,E,o[_++],o[_++],o[_++]);break;case 4:x(a,d,E,o[_++],o[_++],o[_++],o[_++]);break;default:throw Error("unexpected number of binary field arguments: "+N)}}return a}var ps=Symbol();function Sc(o){var a=o[ps];if(!a){var d=ol(o);a=function(h,v){return jc(h,v,d)},o[ps]=a}return a}function Ec(o,a){var d=o[ps];return d||(d=function(h,v){return yc(h,v,a)},o[ps]=d),d}var ti=Symbol();function fm(o,a){o.push(a)}function pm(o,a,d){o.push(a,d.W)}function mm(o,a,d,h){var v=Sc(h),x=ol(h).P,_=d.W;o.push(a,function(E,N,I){return _(E,N,I,x,v)})}function gm(o,a,d,h,v,x){var _=Ec(h,x),E=d.W;o.push(a,function(N,I,z){return E(N,I,z,h,_)})}function ol(o){var a=o[ti];return a||(a=kc(o,o[ti]=[],fm,pm,mm,gm),ni in o&&ti in o&&(o.length=0),a)}var ni=Symbol();function vm(o,a){o[0]=a}function ym(o,a,d,h){var v=d.U;o[a]=h?function(x,_,E){return v(x,_,E,h)}:v}function wm(o,a,d,h,v){var x=d.U,_=_c(h),E=ll(h).P;o[a]=function(N,I,z){return x(N,I,z,E,_,v)}}function _m(o,a,d,h,v,x,_){var E=d.U,N=wc(h,v,x);o[a]=function(I,z,Q){return E(I,z,Q,h,N,_)}}function ll(o){var a=o[ni];return a||(a=kc(o,o[ni]={},vm,ym,wm,_m),ni in o&&ti in o&&(o.length=0),a)}function bc(o,a,d){for(;oc(a)&&a.i!=4;){var h=a.l,v=d[h];if(!v){var x=d[0];x&&(x=x[h])&&(v=d[h]=hm(x))}if(!v||!v(a,o,h)){v=a,h=o,x=v.j,ls(v);var _=v;if(!_.ca){if(v=_.h.h-x,_.h.h=x,_=_.h,v==0)v=qo();else{if(x=rc(_,v),_.S&&_.m)v=_.i.subarray(x,x+v);else{_=_.i;var E=x;v=x+v,v=E===v?Un():Ut?_.slice(E,v):new Uint8Array(_.subarray(E,v))}v=v.length==0?qo():new Jr(v,Gt)}(x=h.R)?x.push(v):h.R=[v]}}}return o}function jc(o,a,d){for(var h=d.length,v=h%2==1,x=v?1:0;x<h;x+=2)(0,d[x+1])(a,o,d[x]);yc(o,a,v?d[0]:void 0)}function ri(o,a){return{U:o,W:a}}var jt=ri(function(o,a,d){if(o.i!==5)return!1;o=o.h;var h=o.i,v=o.h,x=h[v],_=h[v+1],E=h[v+2];return h=h[v+3],Mn(o,o.h+4),_=(x<<0|_<<8|E<<16|h<<24)>>>0,o=2*(_>>31)+1,x=_>>>23&255,_&=8388607,Mt(a,d,x==255?_?NaN:1/0*o:x==0?o*Math.pow(2,-149)*_:o*Math.pow(2,x-150)*(_+Math.pow(2,23))),!0},function(o,a,d){if(a=rl(a,d),a!=null){Dn(o.h,8*d+5),o=o.h;var h=+a;h===0?0<1/h?he=X=0:(X=0,he=2147483648):isNaN(h)?(X=0,he=2147483647):(h=(d=0>h?-2147483648:0)?-h:h,34028234663852886e22<h?(X=0,he=(d|2139095040)>>>0):11754943508222875e-54>h?(h=Math.round(h/Math.pow(2,-149)),X=0,he=(d|h)>>>0):(a=Math.floor(Math.log(h)/Math.LN2),h*=Math.pow(2,-a),h=Math.round(8388608*h),16777216<=h&&++a,X=0,he=(d|a+127<<23|h&8388607)>>>0)),d=he,o.h.push(d>>>0&255),o.h.push(d>>>8&255),o.h.push(d>>>16&255),o.h.push(d>>>24&255)}}),xm=ri(function(o,a,d){if(o.i!==0)return!1;var h=o.h,v=0,x=o=0,_=h.i,E=h.h;do{var N=_[E++];v|=(N&127)<<x,x+=7}while(32>x&&N&128);for(32<x&&(o|=(N&127)>>4),x=3;32>x&&N&128;x+=7)N=_[E++],o|=(N&127)<<x;if(Mn(h,E),128>N)h=v>>>0,N=o>>>0,(o=N&2147483648)&&(h=~h+1>>>0,N=~N>>>0,h==0&&(N=N+1>>>0)),h=4294967296*N+(h>>>0);else throw or();return Mt(a,d,o?-h:h),!0},function(o,a,d){a=bt(a,d),a!=null&&(typeof a=="string"&&Yr(a),a!=null&&(Dn(o.h,8*d),typeof a=="number"?(o=o.h,Be(a),sc(o,he,X)):(d=Yr(a),sc(o.h,d.i,d.h))))}),km=ri(function(o,a,d){return o.i!==0?!1:(Mt(a,d,Xr(o.h)),!0)},function(o,a,d){if(a=bt(a,d),a!=null&&a!=null)if(Dn(o.h,8*d),o=o.h,d=a,0<=d)Dn(o,d);else{for(a=0;9>a;a++)o.h.push(d&127|128),d>>=7;o.h.push(1)}}),Tc=ri(function(o,a,d){if(o.i!==2)return!1;var h=Xr(o.h)>>>0;o=o.h;var v=rc(o,h);if(o=o.i,nm){var x=o,_;(_=Go)||(_=Go=new TextDecoder("utf-8",{fatal:!0})),o=v+h,x=v===0&&o===x.length?x:x.subarray(v,o);try{var E=_.decode(x)}catch(Q){if(os===void 0){try{_.decode(new Uint8Array([128]))}catch{}try{_.decode(new Uint8Array([97])),os=!0}catch{os=!1}}throw!os&&(Go=void 0),Q}}else{E=v,h=E+h,v=[];for(var N=null,I,z;E<h;)I=o[E++],128>I?v.push(I):224>I?E>=h?$n():(z=o[E++],194>I||(z&192)!==128?(E--,$n()):v.push((I&31)<<6|z&63)):240>I?E>=h-1?$n():(z=o[E++],(z&192)!==128||I===224&&160>z||I===237&&160<=z||((x=o[E++])&192)!==128?(E--,$n()):v.push((I&15)<<12|(z&63)<<6|x&63)):244>=I?E>=h-2?$n():(z=o[E++],(z&192)!==128||(I<<28)+(z-144)>>30||((x=o[E++])&192)!==128||((_=o[E++])&192)!==128?(E--,$n()):(I=(I&7)<<18|(z&63)<<12|(x&63)<<6|_&63,I-=65536,v.push((I>>10&1023)+55296,(I&1023)+56320))):$n(),8192<=v.length&&(N=Ju(N,v),v.length=0);E=Ju(N,v)}return Mt(a,d,E),!0},function(o,a,d){if(a=bt(a,d),a!=null){var h=!1;if(h=h===void 0?!1:h,rm){if(h&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(a))throw Error("Found an unpaired surrogate");a=(Xu||(Xu=new TextEncoder)).encode(a)}else{for(var v=0,x=new Uint8Array(3*a.length),_=0;_<a.length;_++){var E=a.charCodeAt(_);if(128>E)x[v++]=E;else{if(2048>E)x[v++]=E>>6|192;else{if(55296<=E&&57343>=E){if(56319>=E&&_<a.length){var N=a.charCodeAt(++_);if(56320<=N&&57343>=N){E=1024*(E-55296)+N-56320+65536,x[v++]=E>>18|240,x[v++]=E>>12&63|128,x[v++]=E>>6&63|128,x[v++]=E&63|128;continue}else _--}if(h)throw Error("Found an unpaired surrogate");E=65533}x[v++]=E>>12|224,x[v++]=E>>6&63|128}x[v++]=E&63|128}}a=v===x.length?x:x.subarray(0,v)}Dn(o.h,8*d+2),Dn(o.h,a.length),lr(o,o.h.end()),lr(o,a)}}),Pc=ri(function(o,a,d,h,v){if(o.i!==2)return!1;a=dc(a,d,h),d=o.h.j,h=Xr(o.h)>>>0;var x=o.h.h+h,_=x-d;if(0>=_&&(o.h.j=x,v(a,o,void 0,void 0,void 0),_=x-o.h.h),_)throw Error("Message parsing ended unexpectedly. Expected to read "+(h+" bytes, instead read "+(h-_)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return o.h.h=x,o.h.j=d,!0},function(o,a,d,h,v){if(a=il(a,h,d),a!=null)for(h=0;h<a.length;h++){var x=o;Dn(x.h,8*d+2);var _=x.h.end();lr(x,_),_.push(x.i),x=_,v(a[h],o),_=o;var E=x.pop();for(E=_.i+_.h.length()-E;127<E;)x.push(E&127|128),E>>>=7,_.i++;x.push(E),_.i++}});function al(o){return function(a,d){e:{if(as.length){var h=as.pop();h.setOptions(d),Yo(h.h,a,d),a=h}else a=new Jo(a,d);try{var v=ll(o),x=bc(new v.P,a,v);break e}finally{v=a.h,v.i=null,v.m=!1,v.l=0,v.j=0,v.h=0,v.S=!1,a.l=-1,a.i=-1,100>as.length&&as.push(a)}x=void 0}return x}}function ul(o){return function(){var a=new sm;jc(this,a,ol(o)),lr(a,a.h.end());for(var d=new Uint8Array(a.i),h=a.j,v=h.length,x=0,_=0;_<v;_++){var E=h[_];d.set(E,x),x+=E.length}return a.j=[d],d}}function ar(o){tt.call(this,o)}U(ar,tt);var Nc=[ar,1,km,2,jt,3,Tc,4,Tc];ar.prototype.l=ul(Nc);function cl(o){tt.call(this,o,-1,Sm)}U(cl,tt),cl.prototype.addClassification=function(o,a){return dc(this,1,ar,o,a),this};var Sm=[1],Em=al([cl,1,Pc,Nc]);function ii(o){tt.call(this,o)}U(ii,tt);var Cc=[ii,1,jt,2,jt,3,jt,4,jt,5,jt];ii.prototype.l=ul(Cc);function Oc(o){tt.call(this,o,-1,bm)}U(Oc,tt);var bm=[1],jm=al([Oc,1,Pc,Cc]);function ms(o){tt.call(this,o)}U(ms,tt);var Ac=[ms,1,jt,2,jt,3,jt,4,jt,5,jt,6,xm],Tm=al(Ac);ms.prototype.l=ul(Ac);function Rc(o,a,d){if(d=o.createShader(d===0?o.VERTEX_SHADER:o.FRAGMENT_SHADER),o.shaderSource(d,a),o.compileShader(d),!o.getShaderParameter(d,o.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+o.getShaderInfoLog(d));return d}function Pm(o){return il(o,ar,1).map(function(a){var d=bt(a,1);return{index:d??0,qa:Ft(a,2),label:bt(a,3)!=null?ds(bt(a,3),""):void 0,displayName:bt(a,4)!=null?ds(bt(a,4),""):void 0}})}function Nm(o){return{x:Ft(o,1),y:Ft(o,2),z:Ft(o,3),visibility:rl(o,4)!=null?Ft(o,4):void 0}}function dl(o){return il(jm(o),ii,1).map(Nm)}function hl(o,a){this.i=o,this.h=a,this.m=0}function Ic(o,a,d){return Cm(o,a),typeof o.h.canvas.transferToImageBitmap=="function"?Promise.resolve(o.h.canvas.transferToImageBitmap()):d?Promise.resolve(o.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(o.h.canvas):(o.j===void 0&&(o.j=document.createElement("canvas")),new Promise(function(h){o.j.height=o.h.canvas.height,o.j.width=o.h.canvas.width,o.j.getContext("2d",{}).drawImage(o.h.canvas,0,0,o.h.canvas.width,o.h.canvas.height),h(o.j)}))}function Cm(o,a){var d=o.h;if(o.s===void 0){var h=Rc(d,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),v=Rc(d,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),x=d.createProgram();if(d.attachShader(x,h),d.attachShader(x,v),d.linkProgram(x),!d.getProgramParameter(x,d.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+d.getProgramInfoLog(x));h=o.s=x,d.useProgram(h),v=d.getUniformLocation(h,"sampler0"),o.l={O:d.getAttribLocation(h,"aVertex"),N:d.getAttribLocation(h,"aTex"),ya:v},o.v=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,o.v),d.enableVertexAttribArray(o.l.O),d.vertexAttribPointer(o.l.O,2,d.FLOAT,!1,0,0),d.bufferData(d.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),d.STATIC_DRAW),d.bindBuffer(d.ARRAY_BUFFER,null),o.u=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,o.u),d.enableVertexAttribArray(o.l.N),d.vertexAttribPointer(o.l.N,2,d.FLOAT,!1,0,0),d.bufferData(d.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),d.STATIC_DRAW),d.bindBuffer(d.ARRAY_BUFFER,null),d.uniform1i(v,0)}h=o.l,d.useProgram(o.s),d.canvas.width=a.width,d.canvas.height=a.height,d.viewport(0,0,a.width,a.height),d.activeTexture(d.TEXTURE0),o.i.bindTexture2d(a.glName),d.enableVertexAttribArray(h.O),d.bindBuffer(d.ARRAY_BUFFER,o.v),d.vertexAttribPointer(h.O,2,d.FLOAT,!1,0,0),d.enableVertexAttribArray(h.N),d.bindBuffer(d.ARRAY_BUFFER,o.u),d.vertexAttribPointer(h.N,2,d.FLOAT,!1,0,0),d.bindFramebuffer(d.DRAW_FRAMEBUFFER?d.DRAW_FRAMEBUFFER:d.FRAMEBUFFER,null),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),d.colorMask(!0,!0,!0,!0),d.drawArrays(d.TRIANGLE_FAN,0,4),d.disableVertexAttribArray(h.O),d.disableVertexAttribArray(h.N),d.bindBuffer(d.ARRAY_BUFFER,null),o.i.bindTexture2d(0)}function Om(o){this.h=o}var Am=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Rm(o,a){return a+o}function Lc(o,a){window[o]=a}function Im(o){var a=document.createElement("script");return a.setAttribute("src",o),a.setAttribute("crossorigin","anonymous"),new Promise(function(d){a.addEventListener("load",function(){d()},!1),a.addEventListener("error",function(){d()},!1),document.body.appendChild(a)})}function Lm(){return K(function(o){switch(o.h){case 1:return o.s=2,j(o,WebAssembly.instantiate(Am),4);case 4:o.h=3,o.s=0;break;case 2:return o.s=0,o.l=null,o.return(!1);case 3:return o.return(!0)}})}function fl(o){if(this.h=o,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=o&&o.locateFile||Rm,typeof window=="object")var a=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")a=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=a,o.options){a=u(Object.keys(o.options));for(var d=a.next();!d.done;d=a.next()){d=d.value;var h=o.options[d].default;h!==void 0&&(this.l[d]=typeof h=="function"?h():h)}}}t=fl.prototype,t.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function Um(o){var a,d,h,v,x,_,E,N,I,z,Q;return K(function(V){switch(V.h){case 1:return o.ga?(a=o.h.files===void 0?[]:typeof o.h.files=="function"?o.h.files(o.l):o.h.files,j(V,Lm(),2)):V.return();case 2:if(d=V.i,typeof window=="object")return Lc("createMediapipeSolutionsWasm",{locateFile:o.locateFile}),Lc("createMediapipeSolutionsPackedAssets",{locateFile:o.locateFile}),_=a.filter(function(H){return H.data!==void 0}),E=a.filter(function(H){return H.data===void 0}),N=Promise.all(_.map(function(H){var J=gs(o,H.url);if(H.path!==void 0){var ie=H.path;J=J.then(function(ge){return o.overrideFile(ie,ge),Promise.resolve(ge)})}return J})),I=Promise.all(E.map(function(H){return H.simd===void 0||H.simd&&d||!H.simd&&!d?Im(o.locateFile(H.url,o.ha)):Promise.resolve()})).then(function(){var H,J,ie;return K(function(ge){if(ge.h==1)return H=window.createMediapipeSolutionsWasm,J=window.createMediapipeSolutionsPackedAssets,ie=o,j(ge,H(J),2);ie.i=ge.i,ge.h=0})}),z=function(){return K(function(H){return o.h.graph&&o.h.graph.url?H=j(H,gs(o,o.h.graph.url),0):(H.h=0,H=void 0),H})}(),j(V,Promise.all([I,N,z]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return h=a.filter(function(H){return H.simd===void 0||H.simd&&d||!H.simd&&!d}).map(function(H){return o.locateFile(H.url,o.ha)}),importScripts.apply(null,c(h)),v=o,j(V,createMediapipeSolutionsWasm(Module),6);case 6:v.i=V.i,o.m=new OffscreenCanvas(1,1),o.i.canvas=o.m,x=o.i.GL.createContext(o.m,{antialias:!1,alpha:!1,va:typeof WebGL2RenderingContext<"u"?2:1}),o.i.GL.makeContextCurrent(x),V.h=4;break;case 7:if(o.m=document.createElement("canvas"),Q=o.m.getContext("webgl2",{}),!Q&&(Q=o.m.getContext("webgl",{}),!Q))return alert("Failed to create WebGL canvas context when passing video frame."),V.return();o.K=Q,o.i.canvas=o.m,o.i.createContext(o.m,!0,!0,{});case 4:o.j=new o.i.SolutionWasm,o.ga=!1,V.h=0}})}function $m(o){var a,d,h,v,x,_,E,N;return K(function(I){if(I.h==1){if(o.h.graph&&o.h.graph.url&&o.fa===o.h.graph.url)return I.return();if(o.u=!0,!o.h.graph||!o.h.graph.url){I.h=2;return}return o.fa=o.h.graph.url,j(I,gs(o,o.h.graph.url),3)}for(I.h!=2&&(a=I.i,o.j.loadGraph(a)),d=u(Object.keys(o.D)),h=d.next();!h.done;h=d.next())v=h.value,o.j.overrideFile(v,o.D[v]);if(o.D={},o.h.listeners)for(x=u(o.h.listeners),_=x.next();!_.done;_=x.next())E=_.value,zm(o,E);N=o.l,o.l={},o.setOptions(N),I.h=0})}t.reset=function(){var o=this;return K(function(a){o.j&&(o.j.reset(),o.s={},o.v={}),a.h=0})},t.setOptions=function(o,a){var d=this;if(a=a||this.h.options){for(var h=[],v=[],x={},_=u(Object.keys(o)),E=_.next();!E.done;x={X:x.X,Y:x.Y},E=_.next())if(E=E.value,!(E in this.l&&this.l[E]===o[E])){this.l[E]=o[E];var N=a[E];N!==void 0&&(N.onChange&&(x.X=N.onChange,x.Y=o[E],h.push(function(I){return function(){var z;return K(function(Q){if(Q.h==1)return j(Q,I.X(I.Y),2);z=Q.i,z===!0&&(d.u=!0),Q.h=0})}}(x))),N.graphOptionXref&&(E=Object.assign({},{calculatorName:"",calculatorIndex:0},N.graphOptionXref,{valueNumber:N.type===1?o[E]:0,valueBoolean:N.type===0?o[E]:!1,valueString:N.type===2?o[E]:""}),v.push(E)))}(h.length!==0||v.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(v),this.F=(this.F===void 0?[]:this.F).concat(h))}};function Mm(o){var a,d,h,v,x,_,E;return K(function(N){switch(N.h){case 1:if(!o.u)return N.return();if(!o.F){N.h=2;break}a=u(o.F),d=a.next();case 3:if(d.done){N.h=5;break}return h=d.value,j(N,h(),4);case 4:d=a.next(),N.h=3;break;case 5:o.F=void 0;case 2:if(o.H){for(v=new o.i.GraphOptionChangeRequestList,x=u(o.H),_=x.next();!_.done;_=x.next())E=_.value,v.push_back(E);o.j.changeOptions(v),v.delete(),o.H=void 0}o.u=!1,N.h=0}})}t.initialize=function(){var o=this;return K(function(a){return a.h==1?j(a,Um(o),2):a.h!=3?j(a,$m(o),3):j(a,Mm(o),0)})};function gs(o,a){var d,h;return K(function(v){return a in o.L?v.return(o.L[a]):(d=o.locateFile(a,""),h=fetch(d).then(function(x){return x.arrayBuffer()}),o.L[a]=h,v.return(h))})}t.overrideFile=function(o,a){this.j?this.j.overrideFile(o,a):this.D[o]=a},t.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},t.send=function(o,a){var d=this,h,v,x,_,E,N,I,z,Q;return K(function(V){switch(V.h){case 1:return d.h.inputs?(h=1e3*(a??performance.now()),j(V,d.I,2)):V.return();case 2:return j(V,d.initialize(),3);case 3:for(v=new d.i.PacketDataList,x=u(Object.keys(o)),_=x.next();!_.done;_=x.next())if(E=_.value,N=d.h.inputs[E]){e:{var H=o[E];switch(N.type){case"video":var J=d.s[N.stream];if(J||(J=new hl(d.i,d.K),d.s[N.stream]=J),J.m===0&&(J.m=J.i.createTexture()),typeof HTMLVideoElement<"u"&&H instanceof HTMLVideoElement)var ie=H.videoWidth,ge=H.videoHeight;else typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement?(ie=H.naturalWidth,ge=H.naturalHeight):(ie=H.width,ge=H.height);ge={glName:J.m,width:ie,height:ge},ie=J.h,ie.canvas.width=ge.width,ie.canvas.height=ge.height,ie.activeTexture(ie.TEXTURE0),J.i.bindTexture2d(J.m),ie.texImage2D(ie.TEXTURE_2D,0,ie.RGBA,ie.RGBA,ie.UNSIGNED_BYTE,H),J.i.bindTexture2d(0),J=ge;break e;case"detections":for(J=d.s[N.stream],J||(J=new Om(d.i),d.s[N.stream]=J),J.data||(J.data=new J.h.DetectionListData),J.data.reset(H.length),ge=0;ge<H.length;++ge){ie=H[ge];var fe=J.data,Ue=fe.setBoundingBox,yt=ge,nt=ie.la,ue=new ms;if(Dt(ue,1,nt.sa),Dt(ue,2,nt.ta),Dt(ue,3,nt.height),Dt(ue,4,nt.width),Dt(ue,5,nt.rotation),Mt(ue,6,nt.pa),nt=ue.l(),Ue.call(fe,yt,nt),ie.ea)for(fe=0;fe<ie.ea.length;++fe){ue=ie.ea[fe],Ue=J.data,yt=Ue.addNormalizedLandmark,nt=ge,ue=Object.assign({},ue,{visibility:ue.visibility?ue.visibility:0});var $e=new ii;Dt($e,1,ue.x),Dt($e,2,ue.y),Dt($e,3,ue.z),ue.visibility&&Dt($e,4,ue.visibility),ue=$e.l(),yt.call(Ue,nt,ue)}if(ie.ba)for(fe=0;fe<ie.ba.length;++fe)Ue=J.data,yt=Ue.addClassification,nt=ge,ue=ie.ba[fe],$e=new ar,Dt($e,2,ue.qa),ue.index&&Mt($e,1,ue.index),ue.label&&Mt($e,3,ue.label),ue.displayName&&Mt($e,4,ue.displayName),ue=$e.l(),yt.call(Ue,nt,ue)}J=J.data;break e;default:J={}}}switch(I=J,z=N.stream,N.type){case"video":v.pushTexture2d(Object.assign({},I,{stream:z,timestamp:h}));break;case"detections":Q=I,Q.stream=z,Q.timestamp=h,v.pushDetectionList(Q);break;default:throw Error("Unknown input config type: '"+N.type+"'")}}return d.j.send(v),j(V,d.I,4);case 4:v.delete(),V.h=0}})};function Dm(o,a,d){var h,v,x,_,E,N,I,z,Q,V,H,J,ie,ge;return K(function(fe){switch(fe.h){case 1:if(!d)return fe.return(a);for(h={},v=0,x=u(Object.keys(d)),_=x.next();!_.done;_=x.next())E=_.value,N=d[E],typeof N!="string"&&N.type==="texture"&&a[N.stream]!==void 0&&++v;1<v&&(o.M=!1),I=u(Object.keys(d)),_=I.next();case 2:if(_.done){fe.h=4;break}if(z=_.value,Q=d[z],typeof Q=="string")return ie=h,ge=z,j(fe,Fm(o,z,a[Q]),14);if(V=a[Q.stream],Q.type==="detection_list"){if(V){for(var Ue=V.getRectList(),yt=V.getLandmarksList(),nt=V.getClassificationsList(),ue=[],$e=0;$e<Ue.size();++$e){var dn=Tm(Ue.get($e)),Hm=Ft(dn,1),Bm=Ft(dn,2),Wm=Ft(dn,3),Vm=Ft(dn,4),Km=Ft(dn,5,0),vs=void 0;vs=vs===void 0?0:vs,dn={la:{sa:Hm,ta:Bm,height:Wm,width:Vm,rotation:Km,pa:ds(bt(dn,6),vs)},ea:dl(yt.get($e)),ba:Pm(Em(nt.get($e)))},ue.push(dn)}Ue=ue}else Ue=[];h[z]=Ue,fe.h=7;break}if(Q.type==="proto_list"){if(V){for(Ue=Array(V.size()),yt=0;yt<V.size();yt++)Ue[yt]=V.get(yt);V.delete()}else Ue=[];h[z]=Ue,fe.h=7;break}if(V===void 0){fe.h=3;break}if(Q.type==="float_list"){h[z]=V,fe.h=7;break}if(Q.type==="proto"){h[z]=V,fe.h=7;break}if(Q.type!=="texture")throw Error("Unknown output config type: '"+Q.type+"'");return H=o.v[z],H||(H=new hl(o.i,o.K),o.v[z]=H),j(fe,Ic(H,V,o.M),13);case 13:J=fe.i,h[z]=J;case 7:Q.transform&&h[z]&&(h[z]=Q.transform(h[z])),fe.h=3;break;case 14:ie[ge]=fe.i;case 3:_=I.next(),fe.h=2;break;case 4:return fe.return(h)}})}function Fm(o,a,d){var h;return K(function(v){return typeof d=="number"||d instanceof Uint8Array||d instanceof o.i.Uint8BlobList?v.return(d):d instanceof o.i.Texture2dDataOut?(h=o.v[a],h||(h=new hl(o.i,o.K),o.v[a]=h),v.return(Ic(h,d,o.M))):v.return(void 0)})}function zm(o,a){for(var d=a.name||"$",h=[].concat(c(a.wants)),v=new o.i.StringList,x=u(a.wants),_=x.next();!_.done;_=x.next())v.push_back(_.value);x=o.i.PacketListener.implement({onResults:function(E){for(var N={},I=0;I<a.wants.length;++I)N[h[I]]=E.get(I);var z=o.listeners[d];z&&(o.I=Dm(o,N,a.outs).then(function(Q){Q=z(Q);for(var V=0;V<a.wants.length;++V){var H=N[h[V]];typeof H=="object"&&H.hasOwnProperty&&H.hasOwnProperty("delete")&&H.delete()}Q&&(o.I=Q)}))}}),o.j.attachMultiListener(v,x),v.delete()}t.onResults=function(o,a){this.listeners[a||"$"]=o},G("Solution",fl),G("OptionType",{BOOL:0,NUMBER:1,ua:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Uc(o){switch(o===void 0&&(o=0),o){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function $c(o){var a=this;o=o||{},this.h=new fl({locateFile:o.locateFile,files:function(d){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:Uc(d.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:dl},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:dl},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(d){var h,v,x;return K(function(_){return _.h==1?(h=Uc(d),v="third_party/mediapipe/modules/pose_landmark/"+h,j(_,gs(a.h,h),2)):(x=_.i,a.h.overrideFile(v,x),_.return(!0))})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}t=$c.prototype,t.reset=function(){this.h.reset()},t.close=function(){return this.h.close(),Promise.resolve()},t.onResults=function(o){this.h.onResults(o)},t.initialize=function(){var o=this;return K(function(a){return j(a,o.h.initialize(),0)})},t.send=function(o,a){var d=this;return K(function(h){return j(h,d.h.send(o,a),0)})},t.setOptions=function(o){this.h.setOptions(o)},G("Pose",$c),G("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),G("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),G("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),G("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),G("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),G("VERSION","0.5.1675469404")}).call(Je);const dh=(t,e,n)=>{const r=Math.atan2(n.y-e.y,n.x-e.x)-Math.atan2(t.y-e.y,t.x-e.x);let i=Math.abs(r*180/Math.PI);return i>180&&(i=360-i),i},Yw=t=>{if(!t||t.length<33)return null;const e=23,n=25,r=27,i=31,s=t[e],l=t[n],u=t[r],c=t[i];if(!s||!l||!u||!c)return null;const f=dh(l,u,c),p=dh(s,l,u);return{ankleAngle:f,kneeAngle:p}},Qw=t=>{if(!t||t.length<33)return 1;const e=27,n=29,r=t[e],i=t[n];return!r||!i?1:(r.y+i.y)/2},Jw=t=>{const e=[],n=[];for(let r=0;r<t.length;r++){const i=Qw(t[r].landmarks);n.push(i)}for(let r=1;r<n.length-1;r++){const i=n[r-1],s=n[r],l=n[r+1];if(s<i&&s<l&&s>.6){const u=Yw(t[r].landmarks);u&&e.push({frameIndex:r,timestamp:t[r].timestamp,angles:u,footHeight:s})}}return e},Xw=async(t,e)=>new Promise((n,r)=>{const i=[];let s=!1;const l=new qw.Pose({locateFile:c=>`https://cdn.jsdelivr.net/npm/@mediapipe/pose/${c}`});l.setOptions({modelComplexity:1,smoothLandmarks:!0,enableSegmentation:!1,smoothSegmentation:!1,minDetectionConfidence:.5,minTrackingConfidence:.5}),l.onResults(c=>{if(c.poseLandmarks&&(i.push({landmarks:c.poseLandmarks,timestamp:t.currentTime}),e)){const f=t.currentTime/t.duration*100;e(f)}s=!1});const u=async()=>{if(t.currentTime>=t.duration){l.close(),n(i);return}if(!s&&t.readyState>=2){s=!0;try{await l.send({image:t})}catch(c){console.error("Pose detection error:",c),s=!1}}t.currentTime+=1/30,requestAnimationFrame(u)};t.onerror=()=>{l.close(),r(new Error("動画の読み込みに失敗しました"))},l.initialize().then(()=>{t.currentTime=0,u()}).catch(c=>{r(new Error(`MediaPipe初期化エラー: ${c.message}`))})}),Ds={HEEL_STRIKE:{ankleAngle:{min:110,max:180},kneeAngle:{min:160,max:180},description:"ヒールストライク（かかと着地）"},MIDFOOT_STRIKE:{ankleAngle:{min:95,max:115},kneeAngle:{min:145,max:165},description:"ミッドフット着地"},FOREFOOT_STRIKE:{ankleAngle:{min:70,max:100},kneeAngle:{min:120,max:150},description:"フォアフット着地（つま先着地）"}},hh=(t,e)=>{let n={heel:0,midfoot:0,forefoot:0};const r=t>=115&&e>=165,i=t<=95&&e<=150;Object.entries(Ds).forEach(([p,m])=>{let y=0;if(t>=m.ankleAngle.min&&t<=m.ankleAngle.max)y+=60;else{const b=Math.min(Math.abs(t-m.ankleAngle.min),Math.abs(t-m.ankleAngle.max));y+=Math.max(0,60-b*3)}if(e>=m.kneeAngle.min&&e<=m.kneeAngle.max)y+=40;else{const b=Math.min(Math.abs(e-m.kneeAngle.min),Math.abs(e-m.kneeAngle.max));y+=Math.max(0,40-b*2)}(p==="HEEL_STRIKE"&&r||p==="FOREFOOT_STRIKE"&&i)&&(y+=30),p==="HEEL_STRIKE"?n.heel=y:p==="MIDFOOT_STRIKE"?n.midfoot=y:p==="FOREFOOT_STRIKE"&&(n.forefoot=y)});const s=Math.max(n.heel,n.midfoot,n.forefoot);let l,u,c;n.heel===s?(l=Ds.HEEL_STRIKE.description,u="high",c="⚠️ かかと着地は衝撃が大きくなる可能性があります。膝への負荷に注意し、ミッドフット着地への移行を検討しましょう。着地位置を重心に近づけることを意識してください。"):n.midfoot===s?(l=Ds.MIDFOOT_STRIKE.description,u="low",c="👍 ミッドフット着地はバランスが良く、衝撃を効率的に分散できます。理想的な着地パターンです。この着地を維持しましょう。"):(l=Ds.FOREFOOT_STRIKE.description,u="medium",c="✅ フォアフット着地は衝撃吸収に優れていますが、ふくらはぎとアキレス腱への負荷が高くなります。十分な筋力とストレッチが必要です。");const f=Math.round(Math.min(s,100));return{pattern:l,confidence:f,recommendation:c,riskLevel:u}},Zw=(t,e)=>{let n=[];return t.riskLevel==="high"&&(n.push("🎯 着地位置改善: 重心の真下に着地するよう意識"),n.push("📏 歩幅調整: オーバーストライドを避け、自然な歩幅で"),n.push("🏃‍♂️ ケイデンス向上: 180spm以上を目標に")),e>30&&(n.push("⚡ オーバーストライド改善: 歩幅を10-15%短くする"),n.push("🎵 リズム練習: メトロノームを使った一定リズム練習")),t.riskLevel==="medium"&&(n.push("💪 筋力強化: ふくらはぎとアキレス腱のストレッチ"),n.push("🧘‍♀️ 柔軟性向上: 足首の可動域を広げる")),n.length>0?n.join(`
`):"現在の着地パターンを維持してください。"},e_=()=>{const t=Math.floor(Math.random()*30)+60,e=Math.floor(Math.random()*35)+55,n=Math.floor(Math.random()*40)+50,r=Math.round(t*.5+e*.3+n*.2);let i="";return r>=75?i="腕がリラックスしており、効率的な腕振りができています。この状態を維持しましょう。":r>=60?i="腕に軽度の緊張が見られます。肩の力を抜いて、自然な腕振りを心がけましょう。":i="腕に過度の緊張が見られます。肩をリラックスさせ、肘を90度に保ちながら軽く振る練習をしましょう。",{relaxationScore:r,shoulderStability:t,elbowSmoothness:e,handTension:n,feedback:i}},t_=()=>{const t=Math.floor(Math.random()*35)+55,e=Math.floor(Math.random()*40)+50,n=Math.round(t*.65+e*.35);let r="";return n>=75?r="股関節がしっかり動いており、理想的な走りができています。効率的な推進力が得られています。":n>=60?r="股関節は良く動いています。さらに太ももの可動域を広げると効率が向上します。":r="股関節の動きが小さくなっています。太ももを大きく動かす意識を持ちましょう。",{hipDominanceScore:n,thighMobility:t,pelvicEfficiency:e,feedback:r}},n_=()=>{const t=Math.floor(Math.random()*35)+55,e=Math.floor(Math.random()*40)+50,n=Math.floor(Math.random()*35)+55,r=Math.round(t*.5+e*.3+n*.2),i=t>60&&e>50;let s="";return i?r>=75?s="地面を効率的に押せています。強い推進力が得られており、理想的なフォームです。":r>=60?s="地面を押す動作は良好ですが、より後方への蹴り出しを意識すると推進力が向上します。":s="基本的な押し出しはできていますが、力の方向と効率を改善しましょう。":t<=60?s="後方への蹴り出しが不足しています。地面を押す角度を意識し、より後方へ力を加えましょう。":s="接地時間が長すぎます。素早く地面を押して離れることで推進力が向上します。",{pushEfficiency:r,hasEffectivePush:i,pushAngleQuality:t,contactTimeEfficiency:e,forceDirectionAccuracy:n,feedback:s}},r_=()=>{const t=Math.floor(Math.random()*35)+55,e=Math.floor(Math.random()*40)+50,n=Math.floor(Math.random()*35)+55,r=Math.round(t*.5+e*.35+n*.15),i=t>70&&e>60;let s="";return i?r>=75?s="左右脚の連動が滑らかで、理想的なランニングリズムができています。":r>=60?s="基本的な連動はできています。動作の滑らかさをさらに向上させましょう。":s="連動の基礎はできていますが、全体的な流動性を高めましょう。":t<=70?s="左右脚のタイミングが不安定です。片脚が地面を押すときに、反対側の太ももを前に出す意識を持ちましょう。":s="タイミングは良いですが、反対側の太ももの引き上げが不足しています。膝を高く上げる意識を持ちましょう。",{reciprocalScore:r,isWellCoordinated:i,timingSynchronization:t,thighLiftAngle:e,movementFluidity:n,feedback:s}};function i_(t,e,n){const r=Math.max(t,e,n);let i;return r>70?i="単一パターン優勢":r>50?i="やや偏り":i="バランス型",t>=70?{type:"フォアフット着地",dominantPercentage:t,balance:i}:e>=n+10?{type:"ミッドフット着地",dominantPercentage:e,balance:i}:{type:"ヒール着地",dominantPercentage:n,balance:i}}const s_=()=>{const[t,e]=ee.useState(!1),[n,r]=ee.useState(null);return{isAnalyzing:t,analysisResult:n,analyzePose:async l=>{e(!0);try{await new Promise(y=>setTimeout(y,2e3));const u=Math.random()*.6+.2,c=Math.random()*.4+.1,f=1-u-c,p=i_(u,c,f),m=`着地パターン分析
フォアフット着地: ${Math.round(u*100)}%
ミッドフット着地: ${Math.round(c*100)}%
ヒール着地: ${Math.round(f*100)}%
主要パターン: ${p}`;r(m)}catch(u){console.error("Pose analysis failed:",u),r("分析に失敗しました")}finally{e(!1)}},analyzeVideo:async(l,u)=>{e(!0);try{const c=document.createElement("video");c.src=l,c.crossOrigin="anonymous",c.muted=!0,await new Promise((je,Le)=>{c.onloadedmetadata=()=>je(),c.onerror=()=>Le(new Error("動画の読み込みに失敗しました。URLが正しいか確認してください。"))}),console.log("🏃 ポーズ解析開始...");const f=await Xw(c,je=>{console.log(`解析進捗: ${je.toFixed(1)}%`)});if(f.length===0)throw new Error(`ポーズデータを検出できませんでした。

考えられる原因:
- 人物が映っていない
- 動画が暗すぎる
- 人物が小さすぎる

明るく、人物がはっきり映った動画を再度アップロードしてください。`);console.log(`✅ ${f.length}フレームを解析`);const p=Jw(f);if(p.length===0)throw new Error(`着地瞬間を検出できませんでした。

考えられる原因:
- 走っている動作が映っていない
- 脚全体がフレーム内に映っていない

横から撮影したランニング動画（全身が映っている）を再度アップロードしてください。`);console.log(`👟 ${p.length}回の着地を検出`);let m=0,y=0,b=0;const P=[];p.forEach(je=>{const{ankleAngle:Le,kneeAngle:or}=je.angles;P.push({ankle:Le,knee:or});const Qr=hh(Le,or);Qr.pattern.includes("ヒール")?m++:Qr.pattern.includes("ミッド")?y++:b++});const C=p.length,U=Math.round(m/C*100),S=Math.round(y/C*100),w=Math.round(b/C*100),k=P.reduce((je,Le)=>je+Le.ankle,0)/P.length,j=P.reduce((je,Le)=>je+Le.knee,0)/P.length,O=Math.round(k),R=Math.round(j),A=hh(O,R);let D;A.pattern.includes("フォアフット")?D={type:"フォアフット着地",dominantPercentage:w,balance:w>70?"単一パターン優勢":w>50?"やや偏り":"バランス型"}:A.pattern.includes("ミッドフット")?D={type:"ミッドフット着地",dominantPercentage:S,balance:S>70?"単一パターン優勢":S>50?"やや偏り":"バランス型"}:D={type:"ヒール着地",dominantPercentage:U,balance:U>70?"単一パターン優勢":U>50?"やや偏り":"バランス型"};const T=f.length,L=c.duration,K=p.length,re=Math.round(K/L*60),te=Array.from({length:20},()=>Math.random()*.5+1.2),M=P.map(je=>je.knee),G=A.riskLevel==="high"?Math.floor(Math.random()*40)+110:A.riskLevel==="medium"?Math.floor(Math.random()*30)+90:Math.floor(Math.random()*20)+70,le=Math.floor(Math.random()*30)+20,Ae=Math.floor(Math.random()*60)+40,F=Math.floor(Math.random()*30)+15,W=Math.floor(Math.random()*25)+20,q=te.reduce((je,Le)=>je+Le,0)/te.length,Y=Math.floor(Math.random()*30)+70,Z=Math.floor(Math.random()*40)+60,qe=Math.random()*.2+.05,ze=Math.floor(Math.random()*40)+50,vt=Math.floor(Math.random()*40)+60,He=Math.floor(Math.random()*30)+70,ct=Math.floor(Math.random()*30)+10,un=Zw(A,ct),cn=Math.floor(Math.random()*20)+15,Un=cn+Math.floor(Math.random()*15)+5,Gt=Math.floor(Math.random()*40)+60,Ut=e_(),he=t_(),X=n_(),Be=r_(),rs={frame_count:T,cadence:re,analysis_duration:Math.random()*2+1,stride_length:te,stride_analysis:{average_stride:q,stride_consistency:Y,stride_efficiency_score:Z,stride_variability:qe},knee_angles:M,landing_pattern_analysis:{forefoot_landing_percentage:Math.round(w),midfoot_landing_percentage:Math.round(S),heel_landing_percentage:Math.round(U),dominant_pattern:D.type,dominant_percentage:D.dominantPercentage,pattern_balance:D.balance,landing_pattern_score:vt,pattern_consistency:He,pattern_description:`${D.type}が主要パターン（${D.dominantPercentage}%）`},foot_strike_analysis:{pattern:A.pattern,confidence:A.confidence,risk_level:A.riskLevel,recommendation:A.recommendation,improvement_plan:un,ankle_angle:O,knee_angle:R},landing_analysis:{landing_efficiency_score:ze,overstride_percentage:ct},body_stability:{vertical_oscillation:G,horizontal_sway:le,stability_index:Ae,bounce_ratio:F,lateral_deviation:W},ground_reaction_efficiency:{propulsion_efficiency:Math.floor(Math.random()*30)+20,energy_return_ratio:Math.floor(Math.random()*30)+20,landing_efficiency:ze,push_off_power:Math.floor(Math.random()*40)+50,overall_grf_score:Math.floor(Math.random()*30)+30},kick_height:{average_kick_height:cn,max_kick_height:Un,kick_efficiency_score:Gt},landing_pattern:{forefoot:Math.round(w),midfoot:Math.round(S),heel:Math.round(U),primary:D.type},arm_relaxation:{relaxation_score:Ut.relaxationScore,shoulder_stability:Ut.shoulderStability,elbow_smoothness:Ut.elbowSmoothness,hand_tension:Ut.handTension,feedback:Ut.feedback},hip_dominance:{hip_dominance_score:he.hipDominanceScore,thigh_mobility:he.thighMobility,pelvic_efficiency:he.pelvicEfficiency,feedback:he.feedback},ground_push:{push_efficiency:X.pushEfficiency,has_effective_push:X.hasEffectivePush,push_angle_quality:X.pushAngleQuality,contact_time_efficiency:X.contactTimeEfficiency,force_direction_accuracy:X.forceDirectionAccuracy,feedback:X.feedback},reciprocal_movement:{reciprocal_score:Be.reciprocalScore,is_well_coordinated:Be.isWellCoordinated,timing_synchronization:Be.timingSynchronization,thigh_lift_angle:Be.thighLiftAngle,movement_fluidity:Be.movementFluidity,feedback:Be.feedback}},is=`解析結果:
フレーム数: ${T}
ケイデンス: ${re} steps/min
平均歩幅: ${(te.reduce((je,Le)=>je+Le,0)/te.length).toFixed(3)}m
着地パターン: ${D.type}

詳細解析:
- 着地: ${A.recommendation}
- 腕振り: ${Ut.feedback}
- 股関節: ${he.feedback}
- 地面プッシュ: ${X.feedback}
- 脚の連動: ${Be.feedback}

改善提案:
- ${un}
- ケイデンスを${re<180?"上げて":"下げて"}効率的な走りを目指しましょう`,ss=`Analysis Results:
Frame Count: ${T}
Cadence: ${re} steps/min
Average Stride: ${(te.reduce((je,Le)=>je+Le,0)/te.length).toFixed(3)}m
Landing Pattern: ${D.type}

Improvement Suggestions:
- ${A.recommendation}
- ${re<180?"Increase":"Decrease"} cadence for more efficient running`,{error:Yr}=await ce.from("runner_videos").update({pose_data:JSON.stringify(rs),feedback_ja:is,feedback_en:ss}).eq("id",u);if(Yr)throw console.error("Failed to update video with analysis data:",Yr),new Error("データベースの更新に失敗しました");return rs}catch(c){console.error("Video analysis failed:",c);const f=c instanceof Error?c.message:"動画解析中に予期しないエラーが発生しました";throw await ce.from("runner_videos").update({feedback_ja:`⚠️ 解析エラー

${f}`,feedback_en:`⚠️ Analysis Error

${f}`}).eq("id",u),c}finally{e(!1)}}}},o_=({videoUrl:t,videoId:e,onAnalysisComplete:n,buttonText:r="姿勢解析開始",buttonStyle:i="primary"})=>{const[s,l]=ee.useState(!1),{analyzeVideo:u}=s_(),c=async()=>{console.log("🎯 解析ボタンクリック - 開始"),l(!0);try{console.log("📹 解析対象:",{videoUrl:t,videoId:e,buttonText:r});const p=await u(t,e);console.log("✅ 解析完了 - メトリクス:",p),n&&(console.log("🔄 onAnalysisComplete コールバック実行"),n(p));const m=r.includes("再");console.log("🎉 解析成功 - アラート表示"),alert(`${m?"再":""}解析完了！
      
フレーム数: ${p.frame_count}
ケイデンス: ${p.cadence} steps/min
平均歩幅: ${(p.stride_length.reduce((y,b)=>y+b,0)/p.stride_length.length).toFixed(3)}
膝角度データ: ${p.knee_angles.length}個

${m?"解析データが更新されました。":"データが保存されました。"}`)}catch(p){console.error("❌ 解析エラー詳細:",p);const m=p instanceof Error?p.message:"解析中に予期しないエラーが発生しました";alert(`⚠️ 解析失敗

${m}

ページをリロードして、解析結果を確認してください。`)}finally{console.log("🏁 解析処理終了 - ローディング状態解除"),l(!1)}},f=()=>{if(s)return"bg-gray-400 cursor-not-allowed text-white";switch(i){case"secondary":return"bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-1";case"primary":default:return"bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105 px-6 py-3 text-base font-semibold"}};return g.jsx("button",{onClick:c,disabled:s,className:`flex items-center rounded-lg text-white font-medium transition-all duration-200 ${f()}`,children:s?g.jsxs(g.Fragment,{children:[g.jsx(Ev,{size:18,className:"mr-2 animate-spin"}),r.includes("再")?"再解析中...":"解析中..."]}):g.jsxs(g.Fragment,{children:[g.jsx(Pp,{size:i==="secondary"?14:18,className:"mr-2"}),r]})})},Fs={LEFT_HIP:23,RIGHT_HIP:24,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,NOSE:0,LEFT_EYE:1,RIGHT_EYE:2},l_=1.7,a_=t=>{if(!t||t.length===0)return 100;const e=t[Fs.LEFT_SHOULDER],n=t[Fs.LEFT_ANKLE];if(!e||!n){const s=t[Fs.RIGHT_SHOULDER],l=t[Fs.RIGHT_ANKLE];if(!s||!l)return 100;const u=s.x-l.x,c=s.y-l.y;return Math.sqrt(u*u+c*c)}const r=e.x-n.x,i=e.y-n.y;return Math.sqrt(r*r+i*i)},u_=t=>{const e=a_(t);return l_/(e/100)},c_=({videoUrl:t,poseData:e,title:n})=>{const s=ee.useRef(null),l=ee.useRef(null),[u,c]=ee.useState(!1),[f,p]=ee.useState(!0),[m,y]=ee.useState([]),[b,P]=ee.useState(0),[C,U]=ee.useState(null),[S,w]=ee.useState(1),k=ee.useRef();ee.useEffect(()=>{if(e)try{const T=JSON.parse(e);if(U(T),T.landmarks){const L=u_(T.landmarks);w(L),console.log("📏 スケール係数算出:",L)}console.log("📊 解析データ読み込み完了:",T)}catch(T){console.error("❌ 解析データの解析に失敗:",T)}},[e]),ee.useEffect(()=>{const T=s.current,L=l.current;if(!T||!L)return;const K=L.getContext("2d");if(!K)return;const re=()=>{if(!(!T||!L||!K)){if((L.width!==800||L.height!==600)&&(L.width=800,L.height=600),K.clearRect(0,0,L.width,L.height),K.fillStyle="white",K.fillRect(0,0,L.width,L.height),T.videoWidth>0&&T.videoHeight>0){const G=T.videoWidth/T.videoHeight;let le,Ae,F,W;G>800/600?(le=800,Ae=800/G,F=0,W=(600-Ae)/2):(Ae=600,le=600*G,F=(800-le)/2,W=0),console.log("📐 動画フィット計算:",{originalSize:{width:T.videoWidth,height:T.videoHeight},displaySize:{width:800,height:600},drawSize:{width:le,height:Ae},offset:{x:F,y:W},aspectRatio:G})}C&&f&&j(K,L.width,L.height,T.currentTime,S),u&&(k.current=requestAnimationFrame(re))}},te=()=>{const G=s.current,le=l.current;!G||!le||(le.width=800,le.height=600,console.log("📹 動画メタデータ読み込み完了 - 固定サイズ設定:",{videoSize:{width:G.videoWidth,height:G.videoHeight},canvasSize:{width:800,height:600}}),re())},M=()=>{const le=Math.floor(T.currentTime*30);P(le),u||re()};return T.addEventListener("loadedmetadata",te),T.addEventListener("timeupdate",M),u&&(k.current=requestAnimationFrame(re)),()=>{T.removeEventListener("loadedmetadata",te),T.removeEventListener("timeupdate",M),k.current&&cancelAnimationFrame(k.current)}},[u,C,f,S]);const j=(T,L,K,re,te)=>{if(!C)return;T.fillStyle="white",T.fillRect(0,0,L,K);const G=Math.floor(re*30);R(T,L,K,G,te),A(T,L,K,G,te)},O=(T,L)=>{var Y,Z;if(!C)return null;const K=(((Y=C.body_stability)==null?void 0:Y.vertical_oscillation)||100)*L,re=(((Z=C.body_stability)==null?void 0:Z.horizontal_sway)||30)*L,te=C.cadence||180,M=T/30,G=te/60/2,le=M*G*2*Math.PI,Ae=.5,F=.5,W=Ae+Math.sin(le*.7)*(re/2e3)*L,q=F+Math.sin(le*1.4)*(K/3e3)*L;return{x:W,y:q}},R=(T,L,K,re,te)=>{const M=O(re,te);if(!M)return;const G=6,le=15,Ae=3,F=M.x*L,W=M.y*K,q={x:F,y:W};if(y(Y=>{const Z=Y[Y.length-1];return Z&&Math.abs(Z.x-F)<1&&Math.abs(Z.y-W)<1?Y:[...Y,q].slice(-150)}),m.length>1){T.beginPath(),T.strokeStyle="rgba(255, 0, 0, 0.9)",T.lineWidth=G,T.lineCap="round",T.lineJoin="round",T.moveTo(m[0].x,m[0].y);for(let Y=1;Y<m.length;Y++)T.lineTo(m[Y].x,m[Y].y);if(T.stroke(),m.length>20){T.beginPath(),T.strokeStyle="rgba(255, 50, 50, 0.6)",T.lineWidth=G+1;const Y=Math.max(0,m.length-30);T.moveTo(m[Y].x,m[Y].y);for(let Z=Y+1;Z<m.length;Z++)T.lineTo(m[Z].x,m[Z].y);T.stroke()}}if((m.length===0||m.length>0&&(Math.abs(m[m.length-1].x-F)>1||Math.abs(m[m.length-1].y-W)>1))&&m.length>0){const Y=m[m.length-1];T.beginPath(),T.strokeStyle="rgba(255, 0, 0, 1.0)",T.lineWidth=G,T.lineCap="round",T.moveTo(Y.x,Y.y),T.lineTo(F,W),T.stroke()}T.beginPath(),T.arc(F,W,le,0,2*Math.PI),T.fillStyle="rgba(255, 0, 0, 1.0)",T.fill(),T.strokeStyle="black",T.lineWidth=Ae,T.stroke()},A=(T,L,K,re,te)=>{if(!C)return;const M=O(re,te);if(!M)return;const G=M.x*L,le=M.y*K,Ae=re/30,W=(C.cadence||180)/60/2,q=Ae*W*2*Math.PI,Y=60,Z=45,qe=150,ze=90,vt=12,He=3,ct=6;console.log("🟢 関節描画 - サイズ定数確認:",{SHOULDER_WIDTH:Y,HIP_WIDTH:Z,LEG_LENGTH:qe,JOINT_RADIUS:vt,JOINT_BORDER_WIDTH:He,SKELETON_LINE_WIDTH:ct,baseX:G,baseY:le,frameIndex:re});const un=q,cn=q+Math.PI,Un=Math.sin(un)*30,Gt=Math.sin(cn)*30,Ut=Math.sin(un*1.5)*45,he=Math.sin(cn*1.5)*45,X=[{x:G-Y/2,y:le-120,label:"L_SHOULDER"},{x:G+Y/2,y:le-120,label:"R_SHOULDER"},{x:G-Z/2,y:le-10,label:"L_HIP"},{x:G+Z/2,y:le-10,label:"R_HIP"},{x:G-Z/2+Un,y:le+ze-10,label:"L_KNEE"},{x:G+Z/2+Gt,y:le+ze-10,label:"R_KNEE"},{x:G-Z/2+Ut,y:le+qe-10,label:"L_ANKLE"},{x:G+Z/2+he,y:le+qe-10,label:"R_ANKLE"}];X.forEach(Be=>{console.log(`🟢 関節描画 - ${Be.label}:`,{x:Be.x,y:Be.y,radius:vt,borderWidth:He}),T.beginPath(),T.arc(Be.x,Be.y,vt,0,2*Math.PI),T.fillStyle="rgba(0, 200, 0, 1.0)",T.fill(),T.strokeStyle="black",T.lineWidth=He,T.stroke()}),T.strokeStyle="rgba(0, 150, 0, 1.0)",T.lineWidth=ct,console.log("🟢 スケルトン線描画:",{strokeStyle:T.strokeStyle,lineWidth:T.lineWidth,SKELETON_LINE_WIDTH:ct}),T.beginPath(),T.moveTo(X[0].x,X[0].y),T.lineTo(X[1].x,X[1].y),T.lineTo(X[3].x,X[3].y),T.lineTo(X[2].x,X[2].y),T.closePath(),T.stroke(),T.beginPath(),T.moveTo(X[2].x,X[2].y),T.lineTo(X[4].x,X[4].y),T.lineTo(X[6].x,X[6].y),T.stroke(),T.beginPath(),T.moveTo(X[3].x,X[3].y),T.lineTo(X[5].x,X[5].y),T.lineTo(X[7].x,X[7].y),T.stroke(),console.log("🟢 関節描画完了:",{jointsCount:X.length,frameIndex:re})},D=()=>{const T=s.current;T&&(u?T.pause():T.play(),c(!u))};return g.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 w-full max-w-4xl mx-auto",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"解析結果可視化"}),g.jsx("div",{className:"flex items-center space-x-2",children:g.jsxs("label",{className:"flex items-center text-xs",children:[g.jsx("input",{type:"checkbox",checked:f,onChange:T=>p(T.target.checked),className:"mr-2"}),"重心軌跡表示"]})})]}),g.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden w-full mb-1",children:[g.jsx("video",{ref:s,src:t,className:"w-full h-auto max-h-96 rounded-lg",muted:!0,playsInline:!0,controls:!0,preload:"metadata",crossOrigin:"anonymous",onPlay:()=>c(!0),onPause:()=>c(!1),onError:T=>{console.error("🎥 Analysis video error:",{error:T,url:t,networkState:T.currentTarget.networkState,readyState:T.currentTarget.readyState})},onLoadedMetadata:()=>{console.log("📊 Analysis video metadata loaded:",t)}}),g.jsx("div",{className:"flex justify-center items-center w-full mt-4",children:g.jsx("canvas",{ref:l,className:"bg-white",style:{width:"800px",height:"600px",aspectRatio:"4/3"}})}),g.jsx("div",{className:"absolute bottom-4 left-4 right-4 flex items-center justify-between",children:g.jsx("button",{onClick:D,className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:u?g.jsx(bv,{size:16}):g.jsx(Np,{size:16})})})]}),g.jsx("div",{className:"mt-1 text-xs text-gray-500 leading-tight",children:g.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:[g.jsx("span",{children:"🔴 重心軌跡"}),g.jsx("span",{children:"🟢 関節・スケルトン"})]})})]})},d_="https://sxqklqbtonwezyiuszkj.supabase.co/storage/v1/object/public/videos/1759739230941-tw54nokol2a.mp4",h_=({video:t,onEdit:e,onDelete:n,currentUser:r})=>{const[i,s]=ee.useState(!1);ee.useState(!1),ee.useState(!1),ee.useState(1);const[l,u]=ee.useState(!1),[c,f]=ee.useState(!1),[p,m]=ee.useState(null),[y,b]=ee.useState(!1),P=t.uploaded_by===r,C=w=>{if(!w)return!1;try{const k=new URL(w);return k.protocol==="http:"||k.protocol==="https:"}catch{return!1}},U=w=>{console.log("Analysis completed for video:",t.id,w)},S=w=>new Date(w).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return g.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden",children:[g.jsx("div",{className:"relative group",children:t.video_file?g.jsx("div",{className:"relative w-full h-48 bg-black rounded-t-xl overflow-hidden",children:C(t.video_file)?g.jsxs(g.Fragment,{children:[!y&&!p&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900",children:g.jsxs("div",{className:"text-center text-white",children:[g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),g.jsx("p",{className:"text-sm",children:"動画を読み込み中..."})]})}),g.jsx("video",{src:t.video_file,className:"w-full h-full object-cover",controls:!0,autoPlay:!0,muted:!0,playsInline:!0,preload:"metadata",controlsList:"nodownload",disablePictureInPicture:!1,onPlay:()=>s(!0),onPause:()=>s(!1),onLoadedMetadata:()=>{console.log("✅ Video metadata loaded successfully"),b(!0),m(null)},onCanPlay:()=>{console.log("✅ Video can play"),b(!0),m(null)},onError:w=>{const k=w.currentTarget,j=`Video load failed - Network: ${k.networkState}, Ready: ${k.readyState}, URL: ${t.video_file}`;console.error("❌ Video error:",j),console.error("❌ Video error details:",{src:k.src,currentSrc:k.currentSrc,networkState:k.networkState,readyState:k.readyState,error:k.error}),m(j),b(!1)},onLoadStart:()=>{console.log("🎬 Video loading started"),m(null)},children:g.jsxs("p",{className:"text-red-600 p-4",children:["お使いのブラウザは動画の再生をサポートしていません。",g.jsx("a",{href:t.video_file,target:"_blank",rel:"noopener noreferrer",className:"underline ml-2",children:"動画を直接開く"})]})}),p&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:g.jsxs("div",{className:"text-center p-4 max-w-sm",children:[g.jsx("p",{className:"text-red-600 font-medium mb-2",children:"🎥 動画を読み込めません"}),g.jsx("p",{className:"text-gray-500 text-xs mb-3 break-all",children:t.video_file}),g.jsx("p",{className:"text-red-500 text-xs mb-3",children:p}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("button",{onClick:()=>{window.open(t.video_file,"_blank")},className:"block w-full px-3 py-2 bg-blue-600 text-white text-xs rounded-lg hover:bg-blue-700 transition-colors",children:"🔗 新しいタブで開く"}),g.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t.video_file),alert("URLをクリップボードにコピーしました")},className:"block w-full px-3 py-2 bg-gray-600 text-white text-xs rounded-lg hover:bg-gray-700 transition-colors",children:"📋 URLをコピー"})]})]})})]}):g.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:g.jsxs("div",{className:"text-center p-4",children:[g.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"❌ 無効な動画URL"}),g.jsx("p",{className:"text-gray-500 text-xs break-all",children:t.video_file||"URLが設定されていません"})]})})}):g.jsx("div",{className:"w-full h-48 bg-gray-200 flex items-center justify-center",children:g.jsx(Np,{className:"text-gray-400",size:48})})}),g.jsxs("div",{className:"p-6",children:[g.jsxs("div",{className:"flex items-start justify-between mb-4",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 line-clamp-2",children:t.title}),g.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Uploaded by ",t.uploaded_by]}),g.jsx("p",{className:"text-xs text-gray-400",children:S(t.created_at)})]}),P&&g.jsxs("div",{className:"flex space-x-2 ml-4",children:[g.jsx("button",{onClick:()=>e(t),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors duration-200",title:"Edit video",children:g.jsx(Sv,{size:16})}),g.jsx("button",{onClick:()=>n(t.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",title:"Delete video",children:g.jsx(Nv,{size:16})})]})]}),g.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[g.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-3",children:"📋 解析手順"}),g.jsxs("ol",{className:"text-xs text-blue-800 space-y-2 mb-3",children:[g.jsxs("li",{className:"flex items-start",children:[g.jsx("span",{className:"font-bold mr-2 min-w-[1.5rem]",children:"1."}),g.jsx("span",{children:"動画をアップロード"})]}),g.jsxs("li",{className:"flex items-start",children:[g.jsx("span",{className:"font-bold mr-2 min-w-[1.5rem]",children:"2."}),g.jsx("span",{children:"動画を再生"})]}),g.jsxs("li",{className:"flex items-start",children:[g.jsx("span",{className:"font-bold mr-2 min-w-[1.5rem]",children:"3."}),g.jsx("span",{children:"フォーム解析開始ボタンをクリック"})]})]}),g.jsx("div",{className:"text-xs text-blue-700 bg-blue-100 p-2 rounded border border-blue-300",children:"⏱️ 解析には時間がかかります"})]}),g.jsx("div",{className:"mb-4",children:g.jsx(o_,{videoId:t.id,videoUrl:t.video_file,onAnalysisComplete:U,buttonText:"フォーム解析開始"})}),t.pose_data&&g.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("p",{className:"text-sm font-medium text-green-800",children:"✅ 解析結果"}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("button",{onClick:()=>f(!c),className:"text-base text-blue-600 hover:text-blue-800 underline font-medium",children:c?"可視化を隠す":"可視化表示"}),g.jsx("button",{onClick:()=>u(!l),className:"text-base text-green-600 hover:text-green-800 underline font-medium",children:l?"詳細を隠す":"詳細を表示"})]})]}),c&&g.jsx("div",{className:"mb-4 w-full",children:g.jsx(c_,{videoUrl:t.video_file,poseData:t.pose_data,title:t.title})}),l&&(()=>{var w,k,j,O,R,A,D,T,L,K,re,te;try{const M=JSON.parse(t.pose_data);return g.jsxs("div",{className:"space-y-3 text-sm",children:[g.jsx("div",{className:"grid grid-cols-2 gap-4",children:g.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"基本データ"}),g.jsxs("div",{className:"space-y-1 text-xs",children:[g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"平均歩幅:"})," ",(((w=M.stride_analysis)==null?void 0:w.average_stride)||0).toFixed(1),"m"]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"歩幅一貫性:"})," ",((k=M.stride_analysis)==null?void 0:k.stride_consistency)||0,"%"]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"フレーム数:"})," ",M.frame_count||0]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"解析時間:"})," ",(M.analysis_duration||0).toFixed(1),"秒"]})]})]})}),g.jsxs("div",{className:"bg-white p-3 rounded-lg border-l-4 border-blue-500",children:[g.jsxs("h4",{className:"font-medium text-gray-800 mb-2 flex items-center",children:[g.jsx("span",{className:"mr-2",children:"👟"}),"着地パターン分析"]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsx("div",{children:g.jsxs("div",{className:"space-y-1 text-xs",children:[g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"フォアフット着地:"})," ",((j=M.landing_pattern)==null?void 0:j.forefoot)||((O=M.landing_pattern_analysis)==null?void 0:O.forefoot_landing_percentage)||0,"%"]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"ミッドフット着地:"})," ",((R=M.landing_pattern)==null?void 0:R.midfoot)||((A=M.landing_pattern_analysis)==null?void 0:A.midfoot_landing_percentage)||0,"%"]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"ヒール着地:"})," ",((D=M.landing_pattern)==null?void 0:D.heel)||((T=M.landing_pattern_analysis)==null?void 0:T.heel_landing_percentage)||0,"%"]})]})}),g.jsx("div",{children:g.jsxs("div",{className:"space-y-1 text-xs",children:[((L=M.landing_pattern_analysis)==null?void 0:L.dominant_percentage)&&g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"優勢度:"})," ",M.landing_pattern_analysis.dominant_percentage,"%"]}),((K=M.landing_pattern_analysis)==null?void 0:K.pattern_balance)&&g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"バランス:"})," ",M.landing_pattern_analysis.pattern_balance]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"主要パターン:"})," ",((re=M.landing_pattern)==null?void 0:re.primary)||((te=M.landing_pattern_analysis)==null?void 0:te.dominant_pattern)||"不明"]})]})})]})]}),M.foot_strike_analysis&&g.jsxs("div",{className:"bg-white p-3 rounded-lg border-l-4 border-orange-500",children:[g.jsxs("h4",{className:"font-medium text-gray-800 mb-2 flex items-center",children:[g.jsx("span",{className:"mr-2",children:"👟"}),"足接地パターン詳細分析"]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[g.jsx("div",{children:g.jsxs("div",{className:"space-y-1 text-xs",children:[g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"着地パターン:"}),g.jsx("span",{className:M.foot_strike_analysis.pattern.includes("ヒール")?"text-red-600 font-bold ml-1":M.foot_strike_analysis.pattern.includes("フォア")?"text-green-600 font-bold ml-1":"text-blue-600 font-bold ml-1",children:M.foot_strike_analysis.pattern})]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"信頼度:"}),g.jsxs("span",{className:M.foot_strike_analysis.confidence>70?"text-green-600 font-bold ml-1":M.foot_strike_analysis.confidence>50?"text-yellow-600 font-bold ml-1":"text-red-600 font-bold ml-1",children:[M.foot_strike_analysis.confidence,"%"]})]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"リスクレベル:"}),g.jsx("span",{className:M.foot_strike_analysis.risk_level==="low"?"text-green-600 font-bold ml-1":M.foot_strike_analysis.risk_level==="medium"?"text-yellow-600 font-bold ml-1":"text-red-600 font-bold ml-1",children:M.foot_strike_analysis.risk_level==="low"?"低":M.foot_strike_analysis.risk_level==="medium"?"中":"高"})]})]})}),g.jsx("div",{children:g.jsxs("div",{className:"space-y-1 text-xs",children:[g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"足首角度:"})," ",M.foot_strike_analysis.ankle_angle,"°"]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"膝角度:"})," ",M.foot_strike_analysis.knee_angle,"°"]})]})})]}),g.jsxs("div",{className:"text-xs text-gray-700 bg-gray-50 p-2 rounded",children:[g.jsx("p",{className:"font-medium mb-1",children:"💡 改善提案:"}),g.jsx("p",{className:"whitespace-pre-line",children:M.foot_strike_analysis.recommendation})]}),M.foot_strike_analysis.improvement_plan&&g.jsxs("div",{className:"text-xs text-blue-700 bg-blue-50 p-2 rounded mt-2",children:[g.jsx("p",{className:"font-medium mb-1",children:"🎯 具体的改善計画:"}),g.jsx("p",{className:"whitespace-pre-line",children:M.foot_strike_analysis.improvement_plan})]})]}),M.arm_relaxation&&g.jsxs("div",{className:"bg-white p-3 rounded-lg border-l-4 border-purple-500",children:[g.jsxs("h4",{className:"font-medium text-gray-800 mb-2 flex items-center",children:[g.jsx("span",{className:"mr-2",children:"💪"}),"腕のリラックス度"]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[g.jsx("div",{children:g.jsxs("div",{className:"space-y-1 text-xs",children:[g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"総合スコア:"}),g.jsxs("span",{className:"font-bold ml-1",children:[M.arm_relaxation.relaxation_score,"/100"]})]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"肩の安定性:"})," ",M.arm_relaxation.shoulder_stability,"/100"]})]})}),g.jsx("div",{children:g.jsxs("div",{className:"space-y-1 text-xs",children:[g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"肘の滑らかさ:"})," ",M.arm_relaxation.elbow_smoothness,"/100"]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"手の脱力度:"})," ",M.arm_relaxation.hand_tension,"/100"]})]})})]}),g.jsx("div",{className:"text-xs text-gray-700 bg-gray-50 p-2 rounded",children:g.jsx("p",{children:M.arm_relaxation.feedback})})]}),M.hip_dominance&&g.jsxs("div",{className:"bg-white p-3 rounded-lg border-l-4 border-blue-500",children:[g.jsxs("h4",{className:"font-medium text-gray-800 mb-2 flex items-center",children:[g.jsx("span",{className:"mr-2",children:"🦵"}),"股関節の動き"]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[g.jsx("div",{children:g.jsx("div",{className:"space-y-1 text-xs",children:g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"総合スコア:"}),g.jsxs("span",{className:"font-bold ml-1",children:[M.hip_dominance.hip_dominance_score,"/100"]})]})})}),g.jsx("div",{children:g.jsxs("div",{className:"space-y-1 text-xs",children:[g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"太もも可動域:"})," ",M.hip_dominance.thigh_mobility,"/100"]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"骨盤効率:"})," ",M.hip_dominance.pelvic_efficiency,"/100"]})]})})]}),g.jsx("div",{className:"text-xs text-gray-700 bg-gray-50 p-2 rounded",children:g.jsx("p",{children:M.hip_dominance.feedback})})]}),M.ground_push&&g.jsxs("div",{className:"bg-white p-3 rounded-lg border-l-4 border-yellow-500",children:[g.jsxs("h4",{className:"font-medium text-gray-800 mb-2 flex items-center",children:[g.jsx("span",{className:"mr-2",children:"⚡"}),"地面を押す動作"]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[g.jsx("div",{children:g.jsxs("div",{className:"space-y-1 text-xs",children:[g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"推進効率:"}),g.jsxs("span",{className:"font-bold ml-1",children:[M.ground_push.push_efficiency,"/100"]})]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"押し出し角度:"})," ",M.ground_push.push_angle_quality,"/100"]})]})}),g.jsx("div",{children:g.jsxs("div",{className:"space-y-1 text-xs",children:[g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"接地時間:"})," ",M.ground_push.contact_time_efficiency,"/100"]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"力の方向:"})," ",M.ground_push.force_direction_accuracy,"/100"]})]})})]}),g.jsx("div",{className:"text-xs text-gray-700 bg-gray-50 p-2 rounded",children:g.jsx("p",{children:M.ground_push.feedback})})]}),M.reciprocal_movement&&g.jsxs("div",{className:"bg-white p-3 rounded-lg border-l-4 border-teal-500",children:[g.jsxs("h4",{className:"font-medium text-gray-800 mb-2 flex items-center",children:[g.jsx("span",{className:"mr-2",children:"🔄"}),"反対側脚の連動"]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[g.jsx("div",{children:g.jsxs("div",{className:"space-y-1 text-xs",children:[g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"連動スコア:"}),g.jsxs("span",{className:"font-bold ml-1",children:[M.reciprocal_movement.reciprocal_score,"/100"]})]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"タイミング同期:"})," ",M.reciprocal_movement.timing_synchronization,"/100"]})]})}),g.jsx("div",{children:g.jsxs("div",{className:"space-y-1 text-xs",children:[g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"太もも挙上:"})," ",M.reciprocal_movement.thigh_lift_angle,"/100"]}),g.jsxs("p",{children:[g.jsx("span",{className:"font-medium",children:"動作の流動性:"})," ",M.reciprocal_movement.movement_fluidity,"/100"]})]})})]}),g.jsx("div",{className:"text-xs text-gray-700 bg-gray-50 p-2 rounded",children:g.jsx("p",{children:M.reciprocal_movement.feedback})})]})]})}catch{return g.jsx("div",{className:"text-red-600 text-sm",children:"解析データの表示中にエラーが発生しました"})}})()]})]})]})},f_=()=>{const[t,e]=ee.useState(!1),[n,r]=ee.useState(""),[i,s]=ee.useState(""),[l,u]=ee.useState("");return{isUploading:t,uploadedUrl:n,ownerId:i,uploadedPath:l,uploadFile:async f=>{e(!0);try{const p=await p_(f);return p&&(r(p.publicUrl),s(p.ownerId),u(p.ownerId)),p}catch(p){throw p}finally{e(!1)}},setUploadedUrl:r,setOwnerId:s,setUploadedPath:u}},p_=async t=>{if(!ce)throw console.error("Supabase not configured"),new Error("SUPABASE_ERROR: Supabaseが設定されていません。");try{console.log("📁 ファイルアップロード開始:",t.name,`(${(t.size/1024/1024).toFixed(2)}MB)`);const e=t.name.split(".").pop(),n=`${Date.now()}-${Math.random().toString(36).substring(2)}.${e}`;console.log("📝 生成されたファイル名:",n),console.log("🔐 アップロード権限確認中...");const{data:r,error:i}=await ce.storage.from("videos").upload(n,t,{cacheControl:"3600",upsert:!1});if(i){if(console.error("❌ アップロードエラー:",i),i.message.includes("new row violates row-level security policy"))throw new Error("PERMISSION_ERROR: アップロード権限がありません。認証が必要です。");if(i.message.includes("Bucket not found"))throw new Error("BUCKET_NOT_FOUND: videosバケットが見つかりません。");if(i.message.includes("The resource already exists")){const l=`${Date.now()}-${Math.random().toString(36).substring(2)}-retry.${e}`;console.log("🔄 ファイル名重複のため再試行:",l);const{data:u,error:c}=await ce.storage.from("videos").upload(l,t,{cacheControl:"3600",upsert:!1});if(c)throw new Error(`RETRY_FAILED: ${c.message}`);const{data:f}=ce.storage.from("videos").getPublicUrl(l);return console.log("✅ アップロード成功（再試行）:",f.publicUrl),{publicUrl:f.publicUrl,ownerId:l}}throw new Error(`UPLOAD_ERROR: ${i.message}`)}console.log("✅ アップロード成功:",r);const{data:s}=ce.storage.from("videos").getPublicUrl(n);return console.log("🔗 公開URL生成完了:",s.publicUrl),{publicUrl:s.publicUrl,ownerId:n}}catch(e){throw console.error("❌ ファイルアップロードエラー:",e),e}},m_=()=>({uploadVideo:async(e,n)=>{try{console.log("🚀 Cloudinaryアップロード開始:",e.name);const r=await tm();console.log("👤 認証済みユーザー:",r==null?void 0:r.email);const i=new FormData;i.append("file",e),i.append("upload_preset","video_upload");const s=await fetch("https://api.cloudinary.com/v1_1/<your-cloud-name>/video/upload",{method:"POST",body:i});if(!s.ok)throw new Error(`Cloudinary upload failed: ${s.status}`);const l=await s.json();console.log("✅ Cloudinaryアップロード成功:",l.secure_url);const u=l.secure_url,c=l.public_id;console.log("💾 Supabaseにメタ情報登録開始...");const{data:f,error:p}=await ce.from("runner_videos").insert([{title:n,uploaded_by:(r==null?void 0:r.email)||"unknown",video_file:u,pose_data:null,feedback_ja:"",feedback_en:""}]).select().single();if(p)throw console.error("❌ Supabase登録エラー:",p),new Error(`Supabase registration failed: ${p.message}`);return console.log("✅ Supabase登録成功:",f),{videoUrl:u,publicId:c,data:f}}catch(r){throw console.error("❌ アップロードエラー:",r),r}}}),g_=({video:t,onSubmit:e,onCancel:n,loading:r=!1})=>{const[i,s]=ee.useState({title:(t==null?void 0:t.title)||"",video_file:null,pose_data:(t==null?void 0:t.pose_data)||"",feedback_ja:(t==null?void 0:t.feedback_ja)||"",feedback_en:(t==null?void 0:t.feedback_en)||""}),[l,u]=ee.useState(!1),{isUploading:c,uploadedUrl:f,ownerId:p,uploadedPath:m,uploadFile:y,setUploadedUrl:b,setOwnerId:P,setUploadedPath:C}=f_(),{uploadVideo:U}=m_(),[S,w]=ee.useState(!1);ee.useEffect(()=>{var T;if(t!=null&&t.video_file){b(t.video_file);const L=((T=t.video_file.split("/").pop())==null?void 0:T.split("?")[0])||"";C(L)}},[t,b,C]);const k=async T=>{var te;const L=(te=T.target.files)==null?void 0:te[0];if(!L)return;if(!["video/mp4","video/mov","video/webm","video/quicktime"].includes(L.type)&&!L.name.match(/\.(mp4|mov|webm)$/i)){alert("サポートされていないファイル形式です。MP4、MOV、WebM形式のファイルを選択してください。");return}const re=100*1024*1024;if(L.size>re){alert("ファイルサイズが大きすぎます。100MB以下のファイルを選択してください。");return}console.log("📁 アップロード開始:",L.name,`(${(L.size/1024/1024).toFixed(2)}MB)`);try{if(S){if(!i.title.trim()){alert("Cloudinaryアップロードにはタイトルが必要です。先にタイトルを入力してください。");return}const M=await U(L,i.title);console.log("✅ Cloudinaryアップロード完了:",M),M&&(b(M.videoUrl),C(M.publicId),s(G=>({...G,video_file:L})),alert("Cloudinaryアップロード成功！Supabaseにも登録されました。"))}else{const M=await y(L);console.log("✅ アップロード完了:",M),M&&(s(G=>({...G,video_file:L})),console.log("📝 フォームデータ更新完了"))}}catch(M){console.error("❌ アップロードエラー:",M);const G=M instanceof Error?M.message:"Unknown error";G.includes("PERMISSION_ERROR")?alert(`❌ アップロード権限エラー

現在のポリシー設定では認証が必要です。
以下のいずれかを実行してください：

【方法1: 認証なしアップロードを許可】
1. Supabaseダッシュボード → Storage → videos → Policies
2. "Allow public uploads" ポリシーを確認
3. Target roles が "public" になっているか確認

【方法2: 認証機能を追加】
アプリケーションにログイン機能を追加する`):G.includes("BUCKET_NOT_FOUND")?alert(`❌ バケットエラー

"videos"バケットが見つかりません。`):G.includes("SUPABASE_ERROR")?alert(`❌ Supabase設定エラー

環境変数を確認してください。`):alert(`❌ アップロードエラー

${G}`)}},j=T=>{if(T.preventDefault(),console.log("Form submission started"),console.log("Current form data:",i),console.log("Uploaded URL:",f),!i.title.trim()){alert("タイトルを入力してください");return}if(!f&&!(t!=null&&t.video_file)){alert("動画ファイルをアップロードするか、動画URLを入力してください");return}const L={...i,video_file_url:f||void 0};console.log("Submitting data:",L),e(L)},O=T=>{const{name:L,value:K}=T.target;s(re=>({...re,[L]:K}))},R=T=>{k(T)},A=T=>{T.preventDefault(),T.stopPropagation(),T.type==="dragenter"||T.type==="dragover"?u(!0):T.type==="dragleave"&&u(!1)},D=T=>{var K,re;T.preventDefault(),T.stopPropagation(),u(!1);const L=(K=T.dataTransfer.files)==null?void 0:K[0];L&&(L.type.includes("video")||["mp4","mov","webm"].includes(((re=L.name.split(".").pop())==null?void 0:re.toLowerCase())||""))&&k({target:{files:[L]}})};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[g.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx(Cp,{className:"mr-3 text-blue-600",size:24}),g.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t?"Edit Video":"Add New Video"})]}),g.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:g.jsx(Ov,{size:24})})]}),g.jsxs("form",{onSubmit:j,className:"p-6 space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Video Title *"}),g.jsx("input",{type:"text",id:"title",name:"title",value:i.title,onChange:O,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",placeholder:"Enter video title..."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video Source *"}),g.jsxs("div",{className:"mb-4 flex items-center space-x-4",children:[g.jsxs("label",{className:"flex items-center",children:[g.jsx("input",{type:"radio",name:"uploadMethod",checked:!S,onChange:()=>w(!1),className:"mr-2"}),g.jsx("span",{className:"text-sm",children:"Supabase Storage"})]}),g.jsxs("label",{className:"flex items-center",children:[g.jsx("input",{type:"radio",name:"uploadMethod",checked:S,onChange:()=>w(!0),className:"mr-2"}),g.jsx("span",{className:"text-sm",children:"Cloudinary"})]})]}),g.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 transition-colors duration-200 ${l?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:A,onDragLeave:A,onDragOver:A,onDrop:D,children:[g.jsx("input",{type:"file",id:"video_file",name:"video_file",accept:".mp4,.mov,.webm,video/*",onChange:R,required:!t,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),g.jsxs("div",{className:"text-center",children:[g.jsx(Cv,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),g.jsx("div",{className:"text-sm text-gray-600",children:i.video_file?g.jsxs("p",{className:"font-medium text-green-600",children:["Selected: ",i.video_file.name]}):t!=null&&t.video_file?g.jsx("p",{className:"font-medium text-blue-600",children:"Current video uploaded"}):g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"font-medium",children:"Drop your video file here, or click to browse"}),g.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Supports MP4, MOV, WebM formats (",S?"Cloudinary":"Supabase Storage",")"]})]})})]})]})]}),c&&g.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:g.jsxs("p",{className:"text-blue-800 font-medium",children:[S?"Cloudinaryに":"Supabase Storageに","アップロード中です…"]})}),i.video_file&&g.jsx("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx(kv,{className:"text-green-600 mr-3",size:20}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-green-800",children:"アップロード準備完了"}),g.jsxs("p",{className:"text-sm text-green-600",children:["ファイル: ",i.video_file.name]}),g.jsxs("p",{className:"text-xs text-green-500 mt-1",children:["サイズ: ",(i.video_file.size/1024/1024).toFixed(2)," MB"]})]})]})}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"pose_data",className:"block text-sm font-medium text-gray-700 mb-2",children:"Pose Analysis Data"}),g.jsx("textarea",{id:"pose_data",name:"pose_data",value:i.pose_data,onChange:O,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",placeholder:"Enter JSON pose data or analysis notes..."})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"feedback_en",className:"block text-sm font-medium text-gray-700 mb-2",children:"Feedback (English)"}),g.jsx("textarea",{id:"feedback_en",name:"feedback_en",value:i.feedback_en,onChange:O,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",placeholder:"Enter feedback in English..."})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"feedback_ja",className:"block text-sm font-medium text-gray-700 mb-2",children:"フィードバック (Japanese)"}),g.jsx("textarea",{id:"feedback_ja",name:"feedback_ja",value:i.feedback_ja,onChange:O,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",placeholder:"日本語でフィードバックを入力..."})]})]}),g.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[g.jsx("button",{type:"button",onClick:n,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),g.jsxs("button",{type:"submit",disabled:r,className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[g.jsx(Pv,{size:18,className:"mr-2"}),r?"Saving...":t?"Update Video":"Add Video"]})]})]})]})})},v_=()=>g.jsx("div",{className:"flex items-center justify-center py-12",children:g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),g.jsx("div",{className:"absolute inset-0 w-12 h-12 border-4 border-transparent border-t-green-500 rounded-full animate-spin animation-delay-150"})]})}),fh=async t=>{if(!ce)throw new Error("Supabase not initialized");try{console.log("Starting file upload:",t.name,t.type,t.size);const{data:e,error:n}=await ce.storage.listBuckets();console.log("Available buckets:",e),n&&console.error("Bucket list error:",n);const r=e==null?void 0:e.find(c=>c.name==="videos");if(!r)throw new Error('BUCKET_NOT_FOUND: Storage bucket "videos" not found. Please create a storage bucket named "videos" in your Supabase dashboard under Storage section.');console.log("Videos bucket found:",r);const i=t.name.split(".").pop(),s=`${Date.now()}-${Math.random().toString(36).substring(2)}.${i}`;console.log("Generated filename:",s);const{error:l}=await ce.storage.from("videos").upload(s,t,{cacheControl:"3600",upsert:!1});if(l){if(console.error("Upload error:",l),l.message.includes("new row violates row-level security policy"))throw new Error("PERMISSION_ERROR: Upload permission denied. Please check your Supabase storage policies. You may need to create a policy that allows authenticated users to INSERT into the videos bucket.");if(l.message.includes("Bucket not found"))throw new Error('BUCKET_NOT_FOUND: Storage bucket "videos" not found.');if(l.message.includes("The resource already exists")){const c=`${Date.now()}-${Math.random().toString(36).substring(2)}-retry.${i}`,{error:f}=await ce.storage.from("videos").upload(c,t,{cacheControl:"3600",upsert:!1});if(f)throw f;const{data:p}=ce.storage.from("videos").getPublicUrl(c);return console.log("Upload successful (retry):",p.publicUrl),p.publicUrl}throw l}console.log("Upload successful, getting public URL...");const{data:u}=ce.storage.from("videos").getPublicUrl(s);return console.log("Public URL generated:",u.publicUrl),u.publicUrl}catch(e){throw console.error("File upload error:",e),e}},y_=()=>{const[t,e]=ee.useState([]),[n,r]=ee.useState(!0),[i,s]=ee.useState(null),l=async()=>{if(!ce){const m=`Supabase Configuration Error: ${Gw()||"Unknown configuration issue"}

To fix this:
1. Click the settings icon (⚙️) in the top right corner
2. Click "Supabase" button to connect your database
3. Or manually update your .env file with:
   VITE_SUPABASE_URL=https://your-project.supabase.co
   VITE_SUPABASE_ANON_KEY=your-anon-key
4. Restart the development server`;s(m),r(!1);return}try{r(!0),console.log("📋 動画一覧取得開始...");const{data:p,error:m}=await ce.from("runner_videos").select("count").limit(1);if(m)throw console.error("❌ Supabase接続テストエラー:",m),m.message.includes("Failed to fetch")?new Error(`Network Error: Cannot connect to Supabase. Please check:
1. Your internet connection
2. Supabase project URL is correct
3. Supabase project is not paused
4. CORS settings allow your domain`):new Error(`Database Error: ${m.message}. Please check your Supabase configuration and database setup.`);const{data:y,error:b}=await ce.from("runner_videos").select("*").order("created_at",{ascending:!1});if(b)throw console.error("❌ 動画一覧取得エラー:",b),b;console.log("✅ 動画一覧取得成功:",(y==null?void 0:y.length)||0,"件"),e(y||[])}catch(p){console.error("❌ fetchVideos エラー:",p);const m=p instanceof Error?p.message:"An error occurred";m.includes("Failed to fetch")?s(`Connection Failed: Cannot reach Supabase servers.

Possible solutions:
1. Check your internet connection
2. Verify Supabase project URL is correct
3. Ensure your Supabase project is active (not paused)
4. Click the settings icon (⚙️) to reconfigure Supabase connection`):s(m)}finally{r(!1)}},u=async p=>{if(!ce)throw new Error("Supabase not initialized");try{console.log("Adding video with data:",p);const m=await tm();console.log("👤 認証済みユーザー:",m==null?void 0:m.id,m==null?void 0:m.email);let y=p.video_file_url||"";p.video_file&&!y?(console.log("No video_file_url provided, uploading file..."),y=await fh(p.video_file)):y&&console.log("Using existing video_file_url:",y);const b={title:p.title,pose_data:p.pose_data||null,feedback_ja:p.feedback_ja||null,feedback_en:p.feedback_en||null,uploaded_by:(m==null?void 0:m.email)||p.uploaded_by,video_file:y||null};console.log("Inserting data to database:",b);const{data:P,error:C}=await ce.from("runner_videos").insert([b]).select().single();if(C)throw console.error("❌ データベース保存エラー詳細:",{message:C.message,details:C.details,hint:C.hint,code:C.code}),C;return console.log("Video added successfully:",P),e(U=>[P,...U]),P}catch(m){console.error("❌ addVideo エラー詳細:",m);const y=m instanceof Error?m.message:"Failed to add video";throw s(y),m}},c=async(p,m)=>{if(!ce)throw new Error("Supabase not initialized");try{let y={};if(m.title!==void 0&&(y.title=m.title),m.pose_data!==void 0&&(y.pose_data=m.pose_data),m.feedback_ja!==void 0&&(y.feedback_ja=m.feedback_ja),m.feedback_en!==void 0&&(y.feedback_en=m.feedback_en),m.video_file_url!==void 0&&(y.video_file=m.video_file_url),m.video_file&&m.video_file instanceof File){const C=await fh(m.video_file);y.video_file=C}const{data:b,error:P}=await ce.from("runner_videos").update(y).eq("id",p).select().single();if(P)throw P;return e(C=>C.map(U=>U.id===p?b:U)),b}catch(y){throw s(y instanceof Error?y.message:"Failed to update video"),y}},f=async p=>{if(!ce)throw new Error("Supabase not initialized");try{const{error:m}=await ce.from("runner_videos").delete().eq("id",p);if(m)throw m;e(y=>y.filter(b=>b.id!==p))}catch(m){throw s(m instanceof Error?m.message:"Failed to delete video"),m}};return ee.useEffect(()=>{l()},[]),{videos:t,loading:n,error:i,addVideo:u,updateVideo:c,deleteVideo:f,refetch:l}};function w_(){const{videos:t,loading:e,error:n,addVideo:r,updateVideo:i,deleteVideo:s}=y_(),[l,u]=ee.useState(!1),[c,f]=ee.useState(),[p,m]=ee.useState(!1),y="demo@example.com",b=()=>{f(void 0),u(!0)},P=w=>{f(w),u(!0)},C=async w=>{m(!0);try{console.log("📤 動画データ送信開始:",w);const k={...w,video_file_url:w.video_file_url||void 0};c?(console.log("✏️ 動画更新モード:",c.id),await i(c.id,k)):(console.log("➕ 新規動画追加モード"),await r({...k,uploaded_by:y})),console.log("✅ 動画保存完了"),u(!1),f(void 0)}catch(k){console.error("❌ 動画保存エラー詳細:",k);let j="An error occurred",O="";if(k instanceof Error&&(j=k.message,console.log("📋 エラーメッセージ:",j),k.message.includes("duplicate key value violates unique constraint")?O="このタイトルは既に使用されています。別のタイトルを入力してください。":k.message.includes("violates not-null constraint")?O="必須項目が入力されていません。タイトルを入力してください。":k.message.includes("permission denied")?O="データベースへの書き込み権限がありません。":O=`保存エラー: ${j}`),j.includes("PERMISSION_ERROR")){const R=j.replace("PERMISSION_ERROR: ","");alert(`Storage Permission Error:

${R}

Steps to fix:
1. Go to your Supabase dashboard
2. Navigate to Storage section
3. Click on the "videos" bucket
4. Go to "Policies" tab
5. Create a new policy:
   - Policy name: "Allow authenticated uploads"
   - Allowed operation: INSERT
   - Target roles: authenticated
   - Policy definition: true

Or create this SQL policy:
CREATE POLICY "Allow authenticated uploads" ON storage.objects FOR INSERT TO authenticated WITH CHECK (bucket_id = 'videos');`)}else if(j.includes("BUCKET_NOT_FOUND")){const R=j.replace("BUCKET_NOT_FOUND: ","");alert(`Storage Setup Required:

${R}

Steps to fix:
1. Go to your Supabase dashboard
2. Navigate to Storage section
3. Click "New bucket"
4. Create a bucket named "videos"
5. Make the bucket PUBLIC
6. Create upload policies for authenticated users`)}else alert(`動画保存エラー:

${O}

詳細: ${j}`)}finally{m(!1)}},U=async w=>{window.confirm("Are you sure you want to delete this video?")&&await s(w)},S=()=>{u(!1),f(void 0)};return e?g.jsxs("div",{className:"min-h-screen bg-gray-50",children:[g.jsx(Fl,{onAddVideo:b,videoCount:0}),g.jsx(v_,{})]}):n?g.jsxs("div",{className:"min-h-screen bg-gray-50",children:[g.jsx(Fl,{onAddVideo:b,videoCount:0}),g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"}),g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:g.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 flex items-center",children:[g.jsx(Gd,{className:"text-red-600 mr-3",size:24}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-red-800",children:"Connection Error"}),g.jsxs("p",{className:"text-red-600",children:[n,". Please make sure Supabase is properly configured."]}),g.jsx("p",{className:"text-sm text-red-500 mt-2",children:'Click "Connect to Supabase" in the top right to set up your database connection.'})]})]})})]}):g.jsxs("div",{className:"min-h-screen bg-gray-50",children:[g.jsx(Fl,{onAddVideo:b,videoCount:t.length}),g.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl shadow-lg p-6 border-2 border-blue-200",children:[g.jsxs("div",{className:"flex items-center mb-4",children:[g.jsx(jv,{className:"text-blue-600 mr-2",size:24}),g.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"解析サンプル動画"}),g.jsx("span",{className:"ml-3 px-3 py-1 bg-blue-600 text-white text-xs font-semibold rounded-full",children:"参考例"})]}),g.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:"このサンプル動画で、フォーム解析がどのように機能するかをご確認いただけます。"}),g.jsx("div",{className:"bg-white rounded-xl overflow-hidden shadow-md",children:g.jsx("video",{src:d_,controls:!0,playsInline:!0,className:"w-full",style:{maxHeight:"400px",objectFit:"contain"},children:"お使いのブラウザは動画タグをサポートしていません。"})}),g.jsx("div",{className:"mt-4 text-sm text-gray-500",children:"💡 ヒント: 「解析開始」ボタンで詳細なフォーム分析結果を確認できます。"})]}),t.length===0?g.jsx("div",{className:"text-center py-12",children:g.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 max-w-md mx-auto",children:[g.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:g.jsx(Gd,{className:"text-blue-600",size:40})}),g.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No videos yet"}),g.jsx("p",{className:"text-gray-600 mb-6",children:"Start by adding your first running video for analysis"}),g.jsx("button",{onClick:b,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors duration-200",children:"Add Your First Video"})]})}):g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(w=>g.jsx(h_,{video:w,onEdit:P,onDelete:U,currentUser:y},w.id))})]}),l&&g.jsx(g_,{video:c,onSubmit:C,onCancel:S,loading:p})]})}Tp(document.getElementById("root")).render(g.jsx(ee.StrictMode,{children:g.jsx(w_,{})}));
